(this.webpackJsonptrello=this.webpackJsonptrello||[]).push([[0],{315:function(e,t,a){},526:function(e,t,a){},527:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(1),r=a.n(s),o=a(21),c=a.n(o),i=(a(315),a(38)),l=a(26),d=a(7),u=a(8),p=a(10),b=a(9),j=a(17),h=a(4),m=a.n(h),f=a(6),v=a(138),O=a.n(v),x="/api/",g=O.a.create({withCredentials:!0}),k=function(e,t){return w(e,"GET",t)},y=function(e,t){return w(e,"POST",t)},C=function(e,t){return w(e,"PUT",t)},N=function(e,t){return w(e,"DELETE",t)};function w(e){return I.apply(this,arguments)}function I(){return(I=Object(f.a)(m.a.mark((function e(t){var a,n,s,r=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:"get",n=r.length>2&&void 0!==r[2]?r[2]:null,e.prev=2,e.next=5,g({url:"".concat(x).concat(t),method:a,data:n});case 5:return s=e.sent,e.abrupt("return",s.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(a,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(n)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var T="user",D={getUsers:function(){return B.apply(this,arguments)},login:function(e){return S.apply(this,arguments)},signup:function(e,t){return P.apply(this,arguments)},filterUsersBy:function(e){return A.apply(this,arguments)}};function B(){return(B=Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(T);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(f.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("".concat(T,"/login?password=").concat(t.password,"&username=").concat(t.username));case 3:a=e.sent,console.log("logged",a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("couldnt find user");case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function P(){return(P=Object(f.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("userrrr",t),e.prev=1,e.next=4,y("".concat(T,"/signup"),{user:t,isGoogle:a});case 4:return e.abrupt("return",t);case 7:e.prev=7,e.t0=e.catch(1),console.log("problem signing in ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function A(){return(A=Object(f.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k(T);case 3:return a=e.sent,n=new RegExp(t,"i"),a=a.filter((function(e){return n.test(e.fullname)||n.test(e.username)})),console.log("filtered users:",a),e.abrupt("return",a);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function L(){return function(e){e({type:"CLEAR_USER"})}}var E={on:function(e,t){var a=function(e){var a=e.detail;t(a)};return window.addEventListener(e,a),function(){window.removeEventListener(e,a)}},emit:function(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}},R=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={navBgc:""},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("scroll",(function(){window.scrollY>100?e.setState({navBgc:"colored-nav"}):e.setState({navBgc:"homepage-nav"})}))}},{key:"logout",value:function(){E.emit("logout")}},{key:"render",value:function(){var e=this.props.history.location.pathname,t=this.state.navBgc,a=this.props.user;return console.log("user from header:",a),Object(n.jsx)("header",{className:"main-nav-header flex align-center  ".concat("/"===e?t:""," ").concat("/login"===e||"/board"===e?"homepage-nav":""),children:Object(n.jsxs)("ul",{className:"main-nav  flex clear-list flex ",children:[Object(n.jsx)("li",{className:"logo",children:Object(n.jsx)(i.c,{to:"/",children:Object(n.jsx)("span",{children:"Chello"})})}),a&&Object(n.jsxs)("li",{className:"user-desc flex align-center",children:[" Hello, ",a.fullname.substring(0,a.fullname.indexOf(" "))," "]}),Object(n.jsx)("li",{children:Object(n.jsx)(i.c,{to:"/board",children:Object(n.jsx)("span",{children:"Boards"})})}),!a&&Object(n.jsx)("li",{children:Object(n.jsx)(i.c,{to:"/login",children:Object(n.jsx)("span",{children:"Login"})})}),a&&Object(n.jsx)("li",{className:"logout flex align-center",onClick:this.logout,children:" Logout "})]})})}}]),a}(s.Component),M={clearUser:L},F=Object(j.b)((function(e){return{isOverlayOpen:e.boardReducer.isOverlayOpen,user:e.userReducer.user}}),M)(Object(l.f)(R)),_=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("main",{className:"home-page",children:[Object(n.jsxs)("section",{className:"homepage-fold",children:[Object(n.jsxs)("div",{className:"homepage-heading flex column  justify-center align-center",children:[Object(n.jsx)("h1",{children:"Chello"}),Object(n.jsx)("h2",{children:"Task Managment,"}),Object(n.jsxs)("h2",{children:["The ",Object(n.jsx)("span",{children:"Clever"})," Way."]}),Object(n.jsx)("a",{href:"/board/600c504bd8ab8f77385f28c6",className:"cta-btn primary-btn",children:"Start Now"})]}),Object(n.jsx)("div",{className:"homepage-image"})]}),Object(n.jsxs)("section",{className:"features  ",children:[Object(n.jsxs)("div",{className:"features-feature-1",children:[Object(n.jsx)("div",{className:"feature-1-bg"}),Object(n.jsxs)("div",{className:"feature-1-txt flex column justify-center",children:[Object(n.jsx)("h3",{children:"All the tools your team needs"}),Object(n.jsx)("span",{children:"Organize and assign tasks."}),Object(n.jsx)("span",{children:"With lists, teams see immediately what they need to do,"}),Object(n.jsx)("span",{children:"which tasks are a priority, and when work is due."})]})]}),Object(n.jsxs)("div",{className:"features-feature-2",children:[Object(n.jsxs)("div",{className:"feature-2-txt flex column justify-center",children:[Object(n.jsx)("h3",{children:"Manage your time wisely"}),Object(n.jsx)("span",{children:"Instantly see which projects are on track,"}),Object(n.jsx)("span",{children:"which ones are falling behind,"}),Object(n.jsx)("span",{children:"and what every team member is working on at a glance."})]}),Object(n.jsx)("div",{className:"feature-2-bg"})]}),Object(n.jsxs)("div",{className:"features-feature-3",children:[Object(n.jsx)("div",{className:"feature-3-bg"}),Object(n.jsxs)("div",{className:"feature-3-txt flex column justify-center",children:[Object(n.jsx)("h3",{children:"Organize anything"}),Object(n.jsx)("h3",{children:"with anyone, anywhere"}),Object(n.jsx)("span",{children:"Bring your team\u2019s work together in one shared space."}),Object(n.jsx)("span",{children:"Choose the project view that suits your style, and collaborate no matter where you are."})]})]}),Object(n.jsx)("section",{className:"bottom-cta flex justify-center",children:Object(n.jsxs)("a",{href:"/board/600c504bd8ab8f77385f28c6",children:[Object(n.jsx)("span",{}),Object(n.jsx)("span",{}),Object(n.jsx)("span",{}),Object(n.jsx)("span",{}),"Get Started"]})})]}),Object(n.jsx)("footer",{className:"flex align-center justify-center",children:Object(n.jsxs)("p",{children:["\xae 2021 Chello | Reem Ben David | ",Object(n.jsx)("a",{href:"https://www.linkedin.com/in/yehonathan-segev-743a431a5/",children:"Yehonathan Segev"})," | Nofar Yunger"]})})]})}}]),a}(s.Component),U=a(32),H={store:function(e,t){sessionStorage[e]=JSON.stringify(t)},load:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=sessionStorage[e];return a?JSON.parse(a):t},clear:function(){sessionStorage.clear()},saveToLocalStorage:function(e,t){localStorage[e]=JSON.stringify(t)},loadFromLocalStorage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=localStorage[e];return a?JSON.parse(a):t}};var q={delay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;return new Promise((function(t){setTimeout(t,e)}))},getRandomInt:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)},makeId:G,formatTime:function(e){return new Date(e).toLocaleDateString()},getRandomColor:function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e},formActivity:function(e){var t=e.user,a=e.txt,n=e.task,s=void 0===n?null:n;return{id:G(),createdAt:Date.now(),txt:a,byMember:{imgUrl:null===t||void 0===t?void 0:t.imgUrl,fullname:(null===t||void 0===t?void 0:t.fullname)||"Guest"},task:s?{id:s.id,title:s.title}:null}},lightenColor:function(e,t){var a=parseInt(e.replace("#",""),16),n=Math.round(2.55*t),s=(a>>16)+n,r=(a>>8&255)+n,o=(255&a)+n;return(16777216+65536*(s<255?s<1?0:s:255)+256*(r<255?r<1?0:r:255)+(o<255?o<1?0:o:255)).toString(16).slice(1)}};function G(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}var W={query:function(){return V.apply(this,arguments)},getById:X,save:function(e){return Y.apply(this,arguments)},remove:function(e){return J.apply(this,arguments)},getTaskById:function(e,t){return Q.apply(this,arguments)},getListIdxById:ee,getTaskIdxById:$,getLabelIdxById:function(e,t){return e.labels.findIndex((function(e){return e.id===t}))},getListAndTaskIdxById:function(e,t,a){var n=e.lists.find((function(e){return e.id===t})),s=ee(e,t),r=$(n,a);return{listIdx:s,taskIdx:r}},getEmptyList:function(){return{id:"k23eps34fc",title:"",tasks:[],style:{title:{bgColor:"#3cc2e0"}}}},getNotifications:function(){return H.loadFromLocalStorage(z)||[{id:"i101",txt:"Yoni added you to task i101"},{id:"i102",txt:"Nofar broke the server"},{id:"i103",txt:"Its time for shnatz"},{id:"i104",txt:"Guest has joined the board"}]},saveNotifications:function(e){H.saveToLocalStorage(z,e)},getListByTaskId:function(e,t){return e.lists.find((function(e){return e.tasks.some((function(e){return e.id===t}))}))}},K="board",z="notificationDB";function V(){return(V=Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(K);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(f.a)(m.a.mark((function e(t){var a,n,s=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.length>1&&void 0!==s[1]?s[1]:null,t._id){e.next=7;break}return e.next=4,y(K,t);case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,C("".concat(K,"/").concat(t._id),{board:t,activity:a});case 9:n=e.sent;case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(f.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("".concat(K,"/").concat(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(f.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("".concat(K,"/").concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(f.a)(m.a.mark((function e(t,a){var n,s,r,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X(t);case 2:return n=e.sent,s=n.lists.map((function(e){return e.tasks})),r=[],s.forEach((function(e){r.push.apply(r,Object(U.a)(e))})),o=r.find((function(e){return e.id===a})),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t){return e.tasks.findIndex((function(e){return e.id===t}))}function ee(e,t){return e.lists.findIndex((function(e){return e.id===t}))}var te=a(3),ae=a(47),ne=a.n(ae);function se(e){var t=e.title,a=e.setCurrPopover,s=e.className;return Object(n.jsxs)("div",{className:"popover-header flex align-center justify-center ".concat(s&&s),children:[Object(n.jsx)("span",{className:"popover-header-title",children:t}),Object(n.jsx)(ne.a,{className:"close-icon",onClick:a})]})}var re=a(89),oe=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).handleClickOutside=function(t){e.props.toggleBoardActions(!1)},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.board,a=e.onEditBoard,s=e.onRemoveBoard,r=e.toggleBoardActions;return Object(n.jsxs)("div",{className:"board-actions-popover",onClick:function(e){return e.stopPropagation()},children:[Object(n.jsx)(se,{title:"Board Actions",setCurrPopover:function(e){e.stopPropagation(),r()}}),Object(n.jsx)("section",{className:"popover-section",children:Object(n.jsxs)("ul",{className:"popover-section-list clear-list",children:[Object(n.jsx)("li",{className:"add-task popover-section-list-item",onClick:function(e){r(),a(t)},children:"Edit board..."}),Object(n.jsx)("li",{className:"remove-list popover-section-list-item",onClick:function(e){r(),s(t._id)},children:"Remove board..."})]})})]})}}]),a}(s.Component),ce=Object(re.a)(oe),ie=a(143),le=a.n(ie),de=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={isBoardActionsOpen:!1,isBoardHovered:!1},e.toggleBoardActions=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!e.state.isBoardActionsOpen;e.setState({isBoardActionsOpen:t})},e.boardPreviewHandlers={onMouseEnter:function(){e.setState({isBoardHovered:!0})},onMouseLeave:function(){e.setState({isBoardHovered:!1})}},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.board,a=e.onRemove,s=e.onEdit;return Object(n.jsxs)("div",Object(te.a)(Object(te.a)({},this.boardPreviewHandlers),{},{className:"board-card flex flex justify-center align-center ".concat(this.state.isBoardActionsOpen&&"board-actions-open"),style:{backgroundImage:t.style.bg},children:[Object(n.jsx)(i.b,{to:"/board/".concat(t._id),children:Object(n.jsx)("h1",{children:t.title})}),Object(n.jsx)("div",{className:"card-overlay"}),Object(n.jsxs)("div",{className:"board-actions-popover-wrapper",children:[this.state.isBoardHovered&&Object(n.jsx)(le.a,{className:"toggle-actions-icon",onClick:this.toggleBoardActions}),this.state.isBoardActionsOpen&&Object(n.jsx)(ce,Object(te.a)(Object(te.a)({board:t,onRemoveBoard:a,onEditBoard:s},this.props),{},{toggleBoardActions:this.toggleBoardActions}))]})]}))}}]),a}(s.Component),ue=a(64),pe=a.n(ue),be=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.boards,a=e.onRemove,s=e.onEdit,r=e.onToggleCompose;return Object(n.jsxs)("div",{className:"board-box board-layout",children:[t.map((function(e){return Object(n.jsx)(de,{onRemove:a,board:e,onEdit:s},e._id)})),Object(n.jsxs)("div",{className:"board-card flex flex justify-center align-center add-board",onClick:r,children:[Object(n.jsx)(pe.a,{className:"add-board-icon"}),Object(n.jsx)("div",{className:"add-board-txt",children:"New"})]})]})}}]),a}(s.Component),je=a(34),he={getBgOptions:function(){return me.apply(this,arguments)}};function me(){return(me=Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["url('https://res.cloudinary.com/nofar/image/upload/v1611088348/trello%20background/pexels-photo-3769139_szaes1.jpg')","url('https://res.cloudinary.com/nofar/image/upload/v1611088331/trello%20background/pexels-photo-2310885_zczpxr.jpg')","url('https://res.cloudinary.com/nofar/image/upload/v1611088313/trello%20background/pexels-photo-266451_cyv6ux.jpg')","url('https://res.cloudinary.com/nofar/image/upload/v1611088301/trello%20background/pexels-photo-417173_oq55fd.jpg')","url('https://res.cloudinary.com/nofar/image/upload/v1611088285/trello%20background/pexels-photo-326055_bxexhu.jpg')","url('https://res.cloudinary.com/nofar/image/upload/v1611088271/trello%20background/pexels-photo-39811_mauelm.jpg')","url('https://res.cloudinary.com/nofar/image/upload/v1611088256/trello%20background/pexels-photo-934718_xv1kkf.jpg')","url('https://res.cloudinary.com/nofar/image/upload/v1611088244/trello%20background/pexels-photo-2246476_xueoqq.jpg')","url('https://res.cloudinary.com/nofar/image/upload/v1611088228/trello%20background/pexels-photo-4101555_svdfsl.jpg')","url('https://res.cloudinary.com/nofar/image/upload/v1611088214/trello%20background/pexels-photo-1591305_ui4iai.jpg')","url('https://res.cloudinary.com/nofar/image/upload/v1611059426/photo-1610377551984-9dc3f82aa31f_wuk20y.jpg')","url('https://res.cloudinary.com/nofar/image/upload/v1611328219/photo-1610720684893-619cd7a5cde5_zqn2tf.jpg')"]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fe=a(280),ve=a.n(fe),Oe=a(144),xe=a.n(Oe),ge=(a(344),a(279)),ke=a.n(ge);function ye(e){return Object(n.jsx)("div",{className:"spinner flex justify-center align-center column",style:{width:"100%",height:"100%",position:"fixed"},children:Object(n.jsx)(ke.a,{type:"ThreeDots",color:"#6c63ff",height:"100",width:"100"})})}var Ce=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={users:[],filterBy:""},e.filterMembers=function(t){var a=t.target.value;e.setState({filterBy:a},(function(){return e.getUsers()}))},e.getUsers=Object(f.a)(m.a.mark((function t(){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.filterBy,t.next=3,D.filterUsersBy(a);case 3:n=t.sent,e.setState({users:n});case 5:case"end":return t.stop()}}),t)}))),e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getUsers()}},{key:"render",value:function(){var e=this.props,t=e.isBoardMember,a=e.toggleMember,s=e.closeModal,r=this.state.users;return r?Object(n.jsxs)("div",{className:"change-members-popover boards ",onClick:function(e){e.stopPropagation()},children:[Object(n.jsxs)("div",{className:"popover-header boards flex align-center justify-center",children:[Object(n.jsxs)("span",{className:"popover-header-title",children:[" ",Object(n.jsx)("input",{type:"text",placeholder:"Add Members",name:"filterBy",value:this.state.filterMembers,onChange:this.filterMembers})]}),Object(n.jsx)(ne.a,{className:"close-icon",onClick:function(){return s()}})]}),Object(n.jsx)("section",{className:"popover-section",children:Object(n.jsxs)("ul",{className:"popover-section-list clear-list",children:[Object(n.jsx)("h3",{className:"popover-section-header ",children:"Board members"}),r.map((function(e){return Object(n.jsxs)("li",{"data-id":e._id,onClick:function(){return a(e)},style:{height:"60px"},className:"popover-section-list-item flex align-center ".concat(t(e._id)&&"picked"),children:[t(e._id)?Object(n.jsx)(xe.a,{}):Object(n.jsx)(pe.a,{}),Object(n.jsx)("img",{className:"avatarPic",alt:"avatar picture",src:e.imgUrl}),Object(n.jsxs)("span",{"data-id":e._id,children:[e.fullname," "]})]},e._id)}))]})})]}):Object(n.jsx)(ye,{})}}]),a}(s.Component),Ne=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={isMembersPreviewOpen:!1,newBoard:{title:"",members:[],style:{bg:"#3d3d3d"}},users:[],bgs:[],filterMembersBy:"",btnTxt:"Create Board"},e.onAddBoard=function(){var t=Object(f.a)(m.a.mark((function t(a){var n,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),(n=e.state.newBoard)._id&&(n=Object(te.a)(Object(te.a)({},e.props.board),n)),t.next=5,W.save(n);case 5:s=t.sent,e.props.history.push("/board/".concat(s._id));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.loadBgs=Object(f.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,he.getBgOptions();case 2:a=t.sent,e.setState({bgs:a});case 4:case"end":return t.stop()}}),t)}))),e.getUsers=Object(f.a)(m.a.mark((function t(){var a,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.filterMembersBy,t.next=3,D.filterUsersBy(a);case 3:n=t.sent,e.setState({users:n});case 5:case"end":return t.stop()}}),t)}))),e.handleInput=function(t){var a=t.target,n=a.value,s=a.name;e.setState((function(e){return{newBoard:Object(te.a)(Object(te.a)({},e.newBoard),{},Object(je.a)({},s,n))}}))},e.setBg=function(t){e.setState({newBoard:Object(te.a)(Object(te.a)({},e.state.newBoard),{},{style:Object(te.a)(Object(te.a)({},e.state.newBoard.style),{},{bg:t})})})},e.toggleMemberPreview=function(){var t=e.state.isMembersPreviewOpen;e.setState({isMembersPreviewOpen:!t})},e.closeMembersPreview=function(){e.setState({isMembersPreviewOpen:!1})},e.isBoardMember=function(t){var a=e.state.newBoard.members;return null===a||void 0===a?void 0:a.some((function(e){return e._id===t}))},e.toggleMember=function(t){var a=Object(te.a)({},e.state.newBoard).members;e.isBoardMember(t._id)?a=a.filter((function(e){return e._id!==t._id})):a.unshift(t);var n=Object(te.a)({},e.state.newBoard);n.members=a,e.setState({newBoard:n})},e}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this.props.board;e.board!==this.props.board&&this.props.board&&this.setState({newBoard:{title:t.title,style:{bg:t.style.bg},members:t.members,_id:t._id},btnTxt:"Update Board"})}},{key:"componentDidMount",value:function(){this.getUsers(),this.loadBgs()}},{key:"componentWillUnmount",value:function(){this.setState({isMembersPreviewOpen:!1,newBoard:{title:"",members:[],style:{bg:"#3d3d3d"}},users:[],bgs:[],filterMembersBy:"",btnTxt:"Create Board"})}},{key:"render",value:function(){var e=this,t=this.state,a=t.bgs,r=t.newBoard,o=t.isMembersPreviewOpen,c=t.btnTxt,i=this.props.onToggleCompose;return Object(n.jsx)(s.Fragment,{children:Object(n.jsxs)("form",{className:"board-composer board-composer-layout flex column",onClick:function(e){return e.stopPropagation()},onSubmit:this.onAddBoard,children:[Object(n.jsx)("div",{className:"close-btn flex align-center justify-center",children:Object(n.jsx)(ne.a,{onClick:i})}),Object(n.jsxs)("div",{className:"flex justify-center align-center board-details-wrapper",children:[Object(n.jsx)("div",{className:"demo-board board-card  flex justify-center align-center",style:{backgroundImage:r.style.bg,backgroundSize:"cover"},children:Object(n.jsx)("textarea",{className:"title",onChange:this.handleInput,placeholder:"Enter Board Title ",name:"title",autoComplete:"off",value:r.title})}),Object(n.jsxs)("span",{className:"edit-board-members",children:[Object(n.jsx)(ve.a,{className:"addIcon",onClick:this.toggleMemberPreview}),o&&Object(n.jsx)(Ce,{isBoardMember:this.isBoardMember,toggleMember:this.toggleMember,closeModal:this.closeMembersPreview})]})]}),Object(n.jsx)("div",{className:"bg-options",children:a.map((function(t){return Object(n.jsx)("div",{className:"bg-preview",onClick:function(){return e.setBg(t)},style:{backgroundImage:t,backgroundSize:"cover"},children:" "},q.makeId())}))}),Object(n.jsx)("button",{className:"primary-btn compose-board-btn",children:c})]})})}}]),a}(s.Component),we=Object(l.f)(Ne),Ie=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={boards:[],isComposerOpen:!1,boardToEdit:null},e.loadBoards=Object(f.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W.query();case 2:a=t.sent,e.setState({boards:a});case 4:case"end":return t.stop()}}),t)}))),e.onRemove=function(){var t=Object(f.a)(m.a.mark((function t(a){var n,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W.remove(a);case 2:n=e.state.boards,s=n.filter((function(e){return e._id!==a})),e.setState({boards:s});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onToggleCompose=function(){var t=e.state.isComposerOpen;e.setState({isComposerOpen:!t})},e.editBoard=function(t){e.setState({isComposerOpen:!0,boardToEdit:t})},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.loadBoards()}},{key:"render",value:function(){var e=this.state,t=e.boards,a=e.isComposerOpen,r=e.boardToEdit;return t?Object(n.jsxs)(s.Fragment,{children:[Object(n.jsx)("div",{className:"glass-screen "}),Object(n.jsx)("div",{className:"boards-bg "}),Object(n.jsx)("div",{className:"board-page-container flex",children:Object(n.jsx)("div",{className:"boards-page bg-overlay main-layout flex column board-layout",children:Object(n.jsxs)("section",{className:"user-boards-section",children:[Object(n.jsx)("div",{className:"user-boards-title",children:"Your Boards"}),Object(n.jsx)(be,{boards:t,onRemove:this.onRemove,onEdit:this.editBoard,onToggleCompose:this.onToggleCompose})]})})}),Object(n.jsx)("div",{onClick:this.onToggleCompose,className:"composer-screen flex justify-center align-center ".concat(!a&&"transparent"),children:Object(n.jsx)(we,{board:r,onToggleCompose:this.onToggleCompose})})]}):Object(n.jsx)(ye,{})}}]),a}(s.Component);function Te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(){var n=Object(f.a)(m.a.mark((function n(s){var r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!a){n.next=7;break}return n.next=4,W.save(e,t,a);case 4:n.t0=n.sent,n.next=8;break;case 7:n.t0=e;case 8:r=n.t0,s({type:"UPDATE_BOARD",updatedBoard:r}),n.next=16;break;case 13:n.prev=13,n.t1=n.catch(0),console.log("couldnt update board",n.t1);case 16:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(e){return n.apply(this,arguments)}}()}function De(){return function(){var e=Object(f.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t({type:"TOGGLE_TASK"})}catch(a){console.log("Board actions, failed to toggle task",a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function Be(){return function(){var e=Object(f.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t({type:"TOGGLE_OVERLAY"})}catch(a){console.log("Couldnt put overlay",a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}var Se=a(281),Pe=a.n(Se),Ae=a(198),Le=a.n(Ae),Ee=a(90),Re=a.n(Ee),Me=a(149),Fe=a.n(Me),_e=a(148),Ue=a.n(_e),He=a(16),qe=a(282),Ge=a.n(qe),We=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={labels:[{id:"101",color:"#61bd4f",title:"",isPicked:!1},{id:"102",color:"#f2d602",title:"",isPicked:!1},{id:"103",color:"#f99f1b",title:"",isPicked:!1},{id:"104",color:"#eb5a46",title:"",isPicked:!1},{id:"105",color:"#c377e0",title:"",isPicked:!1},{id:"107",color:"#1f79bf",title:"",isPicked:!1},{id:"108",color:"#3cc2e0",title:"",isPicked:!1}],elRefs:[]},e.onToggleLabel=function(t){t.stopPropagation();var a=Object(te.a)({},e.state).labels,n=Object(te.a)({},e.props),s=n.board,r=n.list,o=n.task,c=n.updateBoard,i=t.target.dataset.id,l=e.getLabelIdxById(i);a[l].isPicked=!a[l].isPicked,e.setState({labels:a},Object(f.a)(m.a.mark((function t(){var n,d,u,p,b,j;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return delete a[l].isPicked,d=W.getListAndTaskIdxById(s,r.id,o.id),u=d.listIdx,p=d.taskIdx,b={task:o},(null===(n=o.labels)||void 0===n?void 0:n.some((function(e){return e.id===i})))?(j=o.labels.findIndex((function(e){return e.id===i})),o.labels.splice(j,1),s.lists[u].tasks[p]=o,b.txt="has removed label from task"):(o.labels=o.labels?[].concat(Object(U.a)(o.labels),[a[l]]):[a[l]],s.lists[u].tasks[p]=o,b.txt="has added label to task"),t.next=6,c(s,b);case 6:e.markExistingLabels();case 7:case"end":return t.stop()}}),t)}))))},e.handleChange=function(t,a){var n=e.state.labels,s=Object(He.cloneDeep)(n);s[t].title=a.target.value,e.setState({labels:s})},e.onEnterPress=function(t){if(t.target.value&&13===t.keyCode&&!1===t.shiftKey){t.preventDefault();var a=e.props,n=a.board,s=a.list,r=a.task,o=a.updateBoard,c=W.getListAndTaskIdxById(n,s.id,r.id),i=c.listIdx,l=c.taskIdx,d=Object(He.cloneDeep)(n),u=e.state.labels.filter((function(e){return e.isPicked}));d.lists[i].tasks[l].labels=u,o(d)}},e.onEditLabel=function(t,a){a.stopPropagation(),e.state.elRefs[t].current.focus()},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.markExistingLabels(),this.setRefs()}},{key:"markExistingLabels",value:function(){var e,t=this.props.task;if(null===(e=t.labels)||void 0===e?void 0:e.length){var a=Object(te.a)({},this.state).labels,n=a.map((function(e){return e.id}));t.labels.forEach((function(e){if(n.includes(e.id)){var t=a.findIndex((function(t){return t.id===e.id}));a[t].isPicked=!0,a[t].title=e.title}})),this.setState({labels:a})}}},{key:"setRefs",value:function(){var e=[];this.state.labels.forEach((function(t){e.push(r.a.createRef())})),this.setState({elRefs:e})}},{key:"getLabelIdxById",value:function(e){return this.state.labels.findIndex((function(t){return t.id===e}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.labels,s=t.elRefs;return Object(n.jsxs)("div",{className:"labels-popover quick-edit-popover",children:[Object(n.jsx)(se,{title:"Labels",setCurrPopover:this.props.setCurrPopover}),Object(n.jsx)("section",{className:"popover-section",children:Object(n.jsxs)("ul",{className:"popover-section-list clear-list flex column",children:[Object(n.jsx)("h3",{className:"popover-section-header",children:"Labels"}),a.map((function(t,r){return Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsx)("input",{"data-id":t.id,onClick:e.onToggleLabel,onMouseDown:function(e){return e.preventDefault()},onChange:function(t){return e.handleChange(r,t)},value:a[r].title,onKeyDown:e.onEnterPress,ref:s[r],className:"popover-section-list-item ".concat(t.isPicked&&"picked"),style:{backgroundColor:t.color}},t.id),Object(n.jsx)(Ge.a,{onClick:function(t){return e.onEditLabel(r,t)}})]},t.id)}))]})})]})}}]),a}(s.Component),Ke={updateBoard:Te},ze=Object(j.b)((function(e){return{board:e.boardReducer.currBoard}}),Ke)(We),Ve=a(194);function Ye(e){var t=e.member,a=e.size,s=void 0===a?30:a,r=e.className,o=void 0===r?null:r;return Object(n.jsx)(Ve.a,{className:"task-member-preview-img ".concat(o),alt:"task-member-preview-img",name:t.fullname.toUpperCase(),size:s,textSizeRatio:1.75,fgColor:"#fff",round:!0,src:t.imgUrl})}var Je=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={currTask:{}},e.onUpdateTaskMember=function(){var t=Object(f.a)(m.a.mark((function t(a){var n,s,r,o,c,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.stopPropagation(),n=e.props.membersRef,s=a.target.dataset.id,r=Object(te.a)({},e.props),o=r.board,c=o.members,i=c.find((function(e){return e._id===s})),!e.isTaskMember(i._id)){t.next=11;break}return t.next=9,e.onRemoveTaskMember(i);case 9:t.next=13;break;case 11:return t.next=13,e.onAddTaskMember(i);case 13:(null===n||void 0===n?void 0:n.current)&&(n.current.clientWidth>97?n.current.classList.add("narrow-down"):n.current.classList.remove("narrow-down"));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onAddTaskMember=function(){var t=Object(f.a)(m.a.mark((function t(a){var n,s,r,o,c,i,l,d,u,p,b,j,h;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(te.a)({},e.props),s=n.board,r=n.updateBoard,o=e.listAndTaskIdx,c=o.listIdx,i=o.taskIdx,l=s.lists[c].tasks[i],d=a._id,u=a.username,p=a.fullname,b=a.imgUrl,j={_id:d,username:u,fullname:p,imgUrl:b},l.members?l.members.push(j):l.members=[j],e.setState({currTask:l}),h={txt:"has added ".concat(j.fullname," to task"),task:Object(te.a)({},l)},t.next=10,r(s,h);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemoveTaskMember=function(){var t=Object(f.a)(m.a.mark((function t(a){var n,s,r,o,c,i,l,d,u,p,b,j,h;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(te.a)({},e.props),s=n.board,r=n.updateBoard,o=n.task,c=o.members,i=c.findIndex((function(e){return a._id===e._id})),l=e.listAndTaskIdx,d=l.listIdx,u=l.taskIdx,p=Object(te.a)({},c[i]),b=p.fullname,(j=s.lists[d].tasks[u]).members.splice(i,1),e.setState({currTask:j}),h={txt:"has removed ".concat(b," from task"),task:Object(te.a)({},j)},t.next=9,r(s,h);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(a,[{key:"loadTaskMembers",value:function(){return this.props.task.members}},{key:"isTaskMember",value:function(e){var t,a=null===(t=this.props.task.members)||void 0===t?void 0:t.some((function(t){return e===t._id}));return a}},{key:"render",value:function(){var e=this,t=this.props.board.members;return Object(n.jsxs)("div",{className:"change-members-popover ",onClick:function(e){e.stopPropagation()},children:[Object(n.jsx)(se,{title:"Members",setCurrPopover:this.props.setCurrPopover}),Object(n.jsx)("section",{className:"popover-section",children:Object(n.jsxs)("ul",{className:"popover-section-list clear-list",children:[Object(n.jsx)("h3",{className:"popover-section-header",children:"Board members"}),t.map((function(t){return Object(n.jsxs)("li",{"data-id":t._id,onClick:e.onUpdateTaskMember,className:"popover-section-list-item flex align-center ".concat(e.isTaskMember(t._id)&&"picked"),children:[Object(n.jsx)(Ye,{member:t,size:40,className:"board-member-img"}),Object(n.jsxs)("span",{"data-id":t._id,children:[t.fullname,"  (",t.username,")"]}),e.isTaskMember(t._id)&&Object(n.jsx)(xe.a,{className:"picked-icon"})]},t._id)}))]})})]})}},{key:"listAndTaskIdx",get:function(){var e=this.props,t=e.board,a=e.list,n=e.task,s=W.getListAndTaskIdxById(t,a.id,n.id);return{listIdx:s.listIdx,taskIdx:s.taskIdx}}}]),a}(s.Component),Xe=a(563),Ze=a(572),Qe=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={selectedListIdx:0},e.handleInput=function(t){e.setState({selectedListIdx:t.target.value})},e.onCopyClick=Object(f.a)(m.a.mark((function t(){var a,n,s,r,o,c,i,l;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.board,s=a.task,r=a.updateBoard,o=a.setCurrPopover,c=e.state.selectedListIdx,i=Object(He.cloneDeep)(n),(l=Object(He.cloneDeep)(s)).id=q.makeId(),l.createdAt=Date.now(),i.lists[c].tasks.push(l),t.next=9,r(i);case 9:o();case 10:case"end":return t.stop()}}),t)}))),e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.board;return Object(n.jsxs)("div",{className:"copy-task-popover",onClick:function(e){return e.stopPropagation()},children:[Object(n.jsx)(se,{title:"Copy Task",setCurrPopover:this.props.setCurrPopover}),Object(n.jsxs)("div",{className:"copy-task-body flex column  justify-center align-center",children:[Object(n.jsx)("h3",{children:"Select Destination"}),Object(n.jsx)(Xe.a,{style:{marginBottom:"10px",minWidth:"120px"},children:Object(n.jsx)(Ze.a,{native:!0,onChange:this.handleInput,inputProps:{name:"list",id:"age-native-simple"},children:e.lists.map((function(e,t){if(e.title)return Object(n.jsx)("option",{value:t,children:e.title})}))})}),Object(n.jsx)("button",{onClick:this.onCopyClick,className:"date-close-btn primary-btn",children:"Copy"})]})]})}}]),a}(s.Component),$e=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={isLabelsPopoverOpen:!1},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.Component,s=e.setCurrPopover,r=e.currPopover,o=e.Icon;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("a",{className:"quick-task-editor-buttons-item js-edit-labels",onClick:function(e){e.stopPropagation(),r===t?s():s(t)},"data-for":"editLabels",children:Object(n.jsxs)("span",{className:"quick-task-editor-buttons-item-text flex align-center",children:[o&&Object(n.jsx)(o,{className:"quick-task-editor-buttons-item-icon"}),t]})}),a&&r===t&&Object(n.jsx)(a,Object(te.a)({},this.props))]})}}]),a}(s.Component),et=a(145),tt=a.n(et),at=a(146),nt=a.n(at),st=a(286),rt=a.n(st),ot=a(285),ct=a.n(ot),it=a(112),lt=a.n(it),dt=a(147),ut=a.n(dt),pt=a(566),bt=a(574),jt=Object(pt.a)((function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200}}}));function ht(e){var t=jt();return Object(n.jsx)("form",{className:t.container,noValidate:!0,children:Object(n.jsx)(bt.a,Object(te.a)({id:"datetime-local",format:"yyyy/MM/dd HH:mm",type:"datetime-local",defaultValue:"2021-01-24T10:30",className:t.textField,InputLabelProps:{shrink:!0}},e))})}var mt=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classNames;return Object(n.jsxs)("div",{className:"due-date-popover quick-edit-popover ".concat(t&&t),onClick:function(e){return e.stopPropagation()},children:[Object(n.jsx)(se,{title:"Due Date",setCurrPopover:this.props.setCurrPopover}),Object(n.jsxs)("div",{className:"due-date-body flex justify-center align-center",children:[Object(n.jsx)(ht,{onChange:this.props.onDateChange}),Object(n.jsx)("button",{onClick:function(){return e.props.onSaveDate()},className:"date-close-btn primary-btn",children:"Save"})]})]})}}]),a}(s.Component),ft=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={selectedListIdx:0},e.handleInput=function(t){e.setState({selectedListIdx:t.target.value})},e.onMoveSaveClick=Object(f.a)(m.a.mark((function t(){var a,n,s,r,o,c,i,l,d,u,p,b,j,h,f;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.board,s=a.list,r=a.task,o=a.updateBoard,c=a.setCurrPopover,i=e.state.selectedListIdx,l=W.getListAndTaskIdxById(n,s.id,r.id),d=l.listIdx,u=l.taskIdx,p=Object(He.cloneDeep)(n),b=p.lists[d].tasks.splice(u,1),p.lists[+i].tasks.push(b[0]),t.next=8,o(p);case 8:c(),j=e.props.match.params,h=j.taskId,f=j.listId,h&&f&&e.props.history.push("/board/".concat(n._id,"/").concat(n.lists[i].id,"/").concat(r.id));case 11:case"end":return t.stop()}}),t)}))),e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.board;return Object(n.jsxs)("div",{className:"move-task-popover",onClick:function(e){return e.stopPropagation()},children:[Object(n.jsx)(se,{title:"Move Task",setCurrPopover:this.props.setCurrPopover}),Object(n.jsxs)("div",{className:"move-task-body flex column  justify-center align-center",children:[Object(n.jsx)("h3",{children:"Select Destination"}),Object(n.jsx)(Xe.a,{style:{marginBottom:"10px",minWidth:"120px"},children:Object(n.jsx)(Ze.a,{native:!0,onChange:this.handleInput,inputProps:{name:"list",id:"age-native-simple"},children:e.lists.map((function(e,t){if(e.title)return Object(n.jsx)("option",{value:t,children:e.title})}))})}),Object(n.jsx)("button",{onClick:this.onMoveSaveClick,className:"date-close-btn primary-btn",children:"Move"})]})]})}}]),a}(s.Component),vt=a(567),Ot=a(568),xt=[{title:"Edit Labels",Component:ze,Icon:tt.a},{title:"Change Members",Component:Je,Icon:nt.a},{title:"Move",Icon:lt.a,Component:ft},{title:"Copy",Icon:ut.a},{title:"Change Due Date",Component:mt,Icon:ct.a,classNames:"quick-edit-datepicker"}],gt=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={dueDate:{timestamp:"",isDone:!1}},e.dueDateHandlers={onDateChange:function(t){var a=Object(vt.a)(t.target.value),n={timestamp:Object(Ot.a)(a),isDone:!1};e.setState({dueDate:n})},onSaveDate:function(){var t=e.props,a=t.board,n=t.list,s=t.task,r=t.updateBoard,o=W.getListAndTaskIdxById(a,n.id,s.id),c=o.listIdx,i=o.taskIdx,l=Object(te.a)({},a);e.state.dueDate.timestamp&&(l.lists[c].tasks[i].dueDate=e.state.dueDate,r(l),e.props.setCurrPopover())}},e.onRemoveTask=function(t){t.stopPropagation();var a=e.props,n=a.task,s=a.list,r=a.board,o=W.getListAndTaskIdxById(r,s.id,n.id),c=o.listIdx,i=o.taskIdx,l=Object(te.a)({},e.props.board);l.lists[c].tasks.splice(i,1),e.props.updateBoard(l)},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{className:"quick-task-editor-buttons",children:[xt.map((function(t){return Object(n.jsx)($e,Object(te.a)(Object(te.a)(Object(te.a)({},e.dueDateHandlers),e.props),t))})),Object(n.jsxs)("a",{className:"quick-task-editor-buttons-item js-edit-labels",href:"#",onClick:this.onRemoveTask,children:[Object(n.jsx)("span",{className:"icon-sm icon-label light"}),Object(n.jsxs)("span",{className:"quick-task-editor-buttons-item-text flex align-center",children:[Object(n.jsx)(rt.a,{className:"quick-task-editor-buttons-item-icon"}),"Remove"]})]})]})}}]),a}(s.Component),kt=a(150),yt=a.n(kt),Ct=a(154),Nt=a(71),wt=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={isTaskHovered:!1,isEditOpen:!1,taskTitle:"",titleBeforeChange:"",unreadNotificationsCount:0,isLabelOpen:!1,isManyMembers:!1},e.membersRef=r.a.createRef(),e.onTaskUpdated=function(t){var a=Object(te.a)({},e.state).unreadNotificationsCount;e.setState({unreadNotificationsCount:a+1},(function(){}))},e.setDefaultTitle=function(){var t=e.state.titleBeforeChange;e.setState({taskTitle:t})},e.onOpenDetails=function(){var t=Object(f.a)(m.a.mark((function t(a){var n,s,r,o,c,i,l;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.stopPropagation(),!e.state.isEditOpen){t.next=3;break}return t.abrupt("return");case 3:return n=e.props,s=n.list,r=n.board,o=n.task,c=W.getListAndTaskIdxById(r,s.id,o.id),i=c.taskIdx,l=c.listIdx,t.next=7,e.props.setCurrListAndTaskIdx(l,i);case 7:return t.next=9,e.props.toggleOverlay();case 9:e.props.history.push("/board/".concat(r._id,"/").concat(s.id,"/").concat(o.id));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.taskPreviewHandlers={onMouseEnter:function(){e.setState({isTaskHovered:!0})},onMouseLeave:function(){e.setState({isTaskHovered:!1})}},e.onToggleEdit=function(t){t.stopPropagation();var a=e.state.isEditOpen;e.setState({isEditOpen:!a}),a&&e.setDefaultTitle(),e.props.setListDnd(a)},e.handleChange=function(t){e.setState({taskTitle:t.target.value})},e.onSaveTitle=function(){var t=Object(f.a)(m.a.mark((function t(a){var n,s,r,o,c,i,l,d,u,p;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.taskTitle){t.next=3;break}return t.abrupt("return");case 3:if(s=e.props,r=s.list,o=s.board,c=s.task,n!==c.title){t.next=7;break}return e.onToggleEdit(a),t.abrupt("return");case 7:return i=W.getListAndTaskIdxById(o,r.id,c.id),l=i.listIdx,d=i.taskIdx,(u=Object(te.a)({},o)).lists[l].tasks[d].title=n,p=e.props.user,t.next=13,e.props.updateBoard(u,{user:p,txt:"has changed task (".concat(c.title,") title"),task:Object(te.a)({},e.props.task)});case 13:e.onToggleEdit(a);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.task;this.setState({taskTitle:e.title,titleBeforeChange:e.title}),this.membersRef.current&&(this.membersRef.current.clientWidth>97?this.membersRef.current.classList.add("narrow-down"):this.membersRef.current.classList.remove("narrow-down"))}},{key:"componentDidUpdate",value:function(e){var t=this.props.task;e.task!==t&&this.setState({taskTitle:t.title,titleBeforeChange:t.title})}},{key:"render",value:function(){var e=this,t=this.props,a=t.task,r=t.list,o=t.taskIdx,c=t.toggleLabels,i=t.isLabelOpen,l=this.state,d=l.isEditOpen,u=l.isTaskHovered;return Object(n.jsxs)(s.Fragment,{children:[Object(n.jsx)("div",{className:"".concat(d&&"main-overlay"),onClick:this.onToggleEdit}),Object(n.jsx)(Nt.b,{draggableId:a.id,index:o,isDragDisabled:d,children:function(t,s){var o,l,p,b,j,h,m;return Object(n.jsx)("div",Object(te.a)(Object(te.a)(Object(te.a)({},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,children:Object(n.jsxs)("div",Object(te.a)(Object(te.a)({},e.taskPreviewHandlers),{},{className:"task-preview ".concat(s.isDragging&&"moving"," ").concat(d&&" quickEdit"," ").concat(e.props.className),onClick:e.onOpenDetails,children:[(null===(o=a.attachments)||void 0===o?void 0:o.length)?Object(n.jsx)("div",{className:"preview-img",style:{backgroundImage:"url(".concat(a.attachments.slice(-1)[0],")")}}):"",(null===(l=a.labels)||void 0===l?void 0:l.length)?Object(n.jsxs)("div",{className:"top-line-preview-container flex",children:[Object(n.jsx)("div",{className:"labels-container flex",children:a.labels.map((function(e){return Object(n.jsx)("div",{onClick:function(e){e.stopPropagation(),c()},style:{backgroundColor:e.color},className:"task-label ".concat(i&&"open"),title:e.title,children:i?e.title:""},e.id)}))}),Object(n.jsxs)("div",{className:"quick-edit-wrapper",children:[u&&Object(n.jsx)(Le.a,{className:"edit-icon",onClick:e.onToggleEdit}),d&&Object(n.jsx)(gt,Object(te.a)(Object(te.a)({},e.props),{},{membersRef:e.membersRef,task:a,list:r,onToggleEdit:e.onToggleEdit}))]})]}):"",Object(n.jsxs)("div",{className:"task-title-wrapper flex space-between ",children:[Object(n.jsx)(Pe.a,{style:{color:r.style.title.bgColor},html:e.state.taskTitle,disabled:!d,onChange:e.handleChange,className:"task-title-input"}),!(null===(p=a.labels)||void 0===p?void 0:p.length)&&Object(n.jsxs)("div",{className:"quick-edit-wrapper",children:[(u||d)&&Object(n.jsx)(Le.a,{className:"edit-icon",onClick:e.onToggleEdit}),d&&Object(n.jsx)(gt,Object(te.a)(Object(te.a)({},e.props),{},{task:a,membersRef:e.membersRef,list:r,onToggleEdit:e.onToggleEdit}))]})]}),e.doesContainIndics&&Object(n.jsxs)("div",{className:"task-preview-icons-container indication-icon flex ",children:[Object(n.jsxs)("div",{className:"task-preview-indication-icons flex start",children:[a.description&&Object(n.jsx)(Ue.a,{className:"description-indication-icon indication-icon"}),(null===(b=a.checklists)||void 0===b?void 0:b.length)?Object(n.jsxs)("div",{className:"flex align-center",children:[Object(n.jsx)(Re.a,{className:"indication-icon"}),e.taskDoneTodosLength,"/",e.taskTodosLength]}):"",a.dueDate?Object(n.jsxs)("div",{className:"date-indication  flex align-center ".concat(a.dueDate.isDone?"complete":""),children:[Object(n.jsx)(Fe.a,{className:"indication-icon"}),Object(n.jsxs)("div",{children:[Object(Ct.a)(new Date(null===a||void 0===a||null===(j=a.dueDate)||void 0===j?void 0:j.timestamp),"LLL")," ",Object(Ct.a)(new Date(null===a||void 0===a||null===(h=a.dueDate)||void 0===h?void 0:h.timestamp),"d")]})]}):"",a.comments&&Object(n.jsx)(yt.a,{className:"comment-indication-icon indication-icon"})]}),(null===(m=a.members)||void 0===m?void 0:m.length)?Object(n.jsx)("div",{ref:e.membersRef,className:"task-members-imgs flex",children:a.members.map((function(e){return Object(n.jsx)(Ye,{member:e},e._id)}))}):""]}),d&&Object(n.jsx)("button",{className:"primary-btn quick-btn",onClick:e.onSaveTitle,children:" Save "})]}))}))}})]})}},{key:"doesContainIndics",get:function(){var e,t,a,n=this.props.task;return n.description||(null===(e=n.checklists)||void 0===e?void 0:e.length)||n.dueDate||(null===(t=n.comments)||void 0===t?void 0:t.length)||(null===(a=n.members)||void 0===a?void 0:a.length)}},{key:"taskTodosLength",get:function(){return this.props.task.checklists.reduce((function(e,t){return e+t.todos.length}),0)}},{key:"taskDoneTodosLength",get:function(){var e=this.props.task,t=[];return e.checklists.forEach((function(e){var a=e.todos.filter((function(e){return e.isDone}));t=[].concat(Object(U.a)(t),Object(U.a)(a))})),t.length}}]),a}(s.Component),It={toggleTask:De,setCurrListAndTaskIdx:function(e,t){return function(){var a=Object(f.a)(m.a.mark((function a(n){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:try{n({type:"SET_CURR_LIST_AND_TASK",listIdx:e,taskIdx:t})}catch(s){console.log("Borad actions, failed to get curr list",s)}case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},updateBoard:Te},Tt=Object(j.b)((function(e){return{isTaskOpen:e.boardReducer.isTaskOpen,isOverlayOpen:e.boardReducer.isOverlayOpen,board:e.boardReducer.currBoard}}),It)(Object(l.f)(wt));function Dt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(){var t=Object(f.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:"SET_CURR_POPOVER",popover:e})}catch(n){console.log("Could not set popover status, ",n)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var Bt=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={listColors:["#9895E0","#4A94F8","#56c991","#3cc2e0","#eb5a46","#ac0275","#67c0a4","#F5E50E"]},e.onSetListColor=function(t){var a=Object(te.a)({},e.props),n=a.board,s=a.listIdx,r=a.updateBoard;n.lists[s].style.title.bgColor=t,r(n)},e.handleClickOutside=function(){e.props.handleClickOutside()},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.onToggleComposer,s=t.onRemoveList,r=t.setCurrPopover;return Object(n.jsxs)("div",{className:"list-actions-popover",onClick:function(e){return e.stopPropagation()},children:[Object(n.jsx)(se,{title:"List Actions",setCurrPopover:r}),Object(n.jsx)("section",{className:"popover-section",children:Object(n.jsxs)("ul",{className:"popover-section-list clear-list",children:[Object(n.jsx)("li",{className:"add-task popover-section-list-item",onClick:function(e){r(),a(e)},children:"Add task..."}),Object(n.jsx)("li",{className:"remove-list popover-section-list-item",onClick:function(e){r(),s(e)},children:"Remove list..."}),Object(n.jsx)("li",{className:" popover-section-list-item",children:Object(n.jsx)("div",{className:"list-colors-grid",children:this.state.listColors.map((function(t){return Object(n.jsx)("div",{className:"list-color-option",onClick:function(){return e.onSetListColor(t)},style:{backgroundColor:t}},t)}))})})]})})]})}}]),a}(s.Component),St=Object(re.a)(Bt),Pt=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={title:"",isListActionsOpen:!1},e.elListTitleRef=r.a.createRef(),e.updateBoard=function(){var t=Object(f.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.updateBoard(a);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.listTitleHandlers={onChange:function(t){var a=t.target,n=a.name,s=a.value;e.setState(Object(je.a)({},n,s))},onBlur:function(t){var a=t.target,n=Object(te.a)({},e.props.board),s=e.props.list,r=W.getListIdxById(n,s.id);n.lists[r][a.name]=a.value,a.style.backgroundColor=s.style.title.bgColor,a.style.color="#fff",e.props.updateBoard(n)},onFocus:function(e){var t=e.target;t.style.backgroundColor="#fff",t.style.color="#212121",t.style.borderRadius="2px"}},e.editIconHandlers={onMouseEnter:function(t){var a=t.target,n=e.props.list,s=q.lightenColor(n.style.title.bgColor,10);a.style.backgroundColor=s},onMouseLeave:function(e){e.target.style.backgroundColor="transparent"}},e.onPressEnter=function(t){t.preventDefault(),e.elListTitleRef.current.blur()},e.onToggleListActions=function(t){console.log("isPropagation stopped? ",t.stopPropagation),e.setState({isListActionsOpen:!e.state.isListActionsOpen})},e.handleClickOutside=function(t){e.setState({isListActionsOpen:!1})},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.title;this.setState({title:e})}},{key:"render",value:function(){var e=this.props,t=e.list,a=e.isComposerOpen,s=this.state.isListActionsOpen;return t?Object(n.jsxs)("form",{onSubmit:this.onPressEnter,autoComplete:"off",className:"list-title flex align-center",style:{backgroundColor:"".concat(t.style.title.bgColor)},children:[Object(n.jsx)("input",Object(te.a)(Object(te.a)({},this.listTitleHandlers),{},{placeholder:"Enter list title",ref:this.elListTitleRef,value:this.state.title,name:"title"})),Object(n.jsxs)("div",{className:"list-actions-popover-wrapper",children:[Object(n.jsx)(le.a,Object(te.a)(Object(te.a)({},this.editIconHandlers),{},{onClick:this.onToggleListActions,className:"toggle-actions-icon ".concat(a&&"close")})),s&&Object(n.jsx)(St,Object(te.a)(Object(te.a)({},this.props),{},{handleClickOutside:this.handleClickOutside}))]})]}):Object(n.jsx)(ye,{})}}]),a}(s.Component),At={updateBoard:Te,setCurrPopover:Dt,toggleOverlay:Be},Lt=Object(j.b)((function(e){return{board:e.boardReducer.currBoard}}),At)(Pt),Et=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={task:{title:"",description:""}},e.handleChange=function(t){var a=t.target,n=a.name,s=a.value;e.setState((function(e){return{task:Object(te.a)(Object(te.a)({},e.task),{},Object(je.a)({},n,s))}}))},e.onAddTask=function(t){t.preventDefault(),t.stopPropagation();var a=Object(te.a)({},e.state).task,n=Object(te.a)({},e.props).board,s=e.props.list,r=W.getListIdxById(n,s.id);a.createdAt=Date.now(),a.id=q.makeId(),n.lists[r].tasks||(n.lists[r].tasks=[]),n.lists[r].tasks.push(a),e.setState({task:{title:"",description:""}},(function(){e.props.updateBoard(n)}))},e}return Object(u.a)(a,[{key:"updateBoard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.board;this.props.updateBoard(e)}},{key:"render",value:function(){var e=this.props,t=e.isComposerOpen,a=e.titleRef,s=e.setCurrPopover,r=e.list,o=this.state.task;return Object(n.jsxs)("form",{className:"task-composer",onSubmit:this.onAddTask,children:[Object(n.jsx)("input",{value:o.title,type:"text",ref:a,name:"title",onClick:function(){s("TASK_COMPOSER".concat(r.id))},onChange:this.handleChange,placeholder:r.tasks.length?"+ Add another card":"+ Add a card",autoComplete:"off",id:""}),Object(n.jsx)("div",{className:"open-composer-section ".concat(!t&&"display-none"),children:Object(n.jsx)("button",{className:"save-task-btn primary-btn ",children:"Add"})})]})}}]),a}(s.Component),Rt={updateBoard:Te},Mt=Object(j.b)((function(e){return{board:e.boardReducer.currBoard}}),Rt)(Et),Ft=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={isComposerOpen:!1,isDragDisabled:!1},e.elTaskTitleRef=r.a.createRef(),e.updateBoard=Object(f.a)(m.a.mark((function t(){var a,n=arguments;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.length>0&&void 0!==n[0]?n[0]:e.props.board,t.next=3,e.props.updateBoard(a);case 3:case"end":return t.stop()}}),t)}))),e.onEditTask=function(){var t=e.props.list,a=e.state.task,n=Object(te.a)({},e.props.board),s=W.getTaskIdxById(t,a.id);n.lists.tasks[s]=a,e.updateBoard()},e.listTitleHandlersProps={onRemoveList:function(){var t=e.listIdx,a=Object(te.a)({},e.props),n=a.board,s=a.updateBoard,r={txt:"has removed list ".concat(n.lists[t].title)};n.lists.splice(t,1),s(n,r)},onToggleComposer:function(t){t.stopPropagation(),e.props.setCurrPopover("TASK_COMPOSER".concat(e.props.list.id)),e.setState({isComposerOpen:!e.state.isComposerOpen},(function(){e.elTaskTitleRef.current.focus()}))}},e.setDragability=function(t){e.setState({isDragDisabled:!t}),console.log("isDragable?",e.state.isDragDisabled)},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.list,s=t.currPopover,r=t.listIdx,o=a.tasks;return Object(n.jsx)(Nt.b,{draggableId:a.id,index:r,isDragDisabled:this.state.isDragDisabled,children:function(t,r){return Object(n.jsxs)("li",Object(te.a)(Object(te.a)(Object(te.a)({style:{backgroundColor:a.style.bgColor},className:"task-list task-list-container ".concat(r.isDragging&&"moving","  ")},t.dragHandleProps),t.draggableProps),{},{ref:t.innerRef,children:[Object(n.jsx)(Lt,Object(te.a)(Object(te.a)(Object(te.a)({},t.dragHandleProps),e.props),e.listTitleHandlersProps)),Object(n.jsx)("div",{className:"task-previews-container",children:Object(n.jsx)(Nt.c,{droppableId:a.id,type:"task",children:function(t){return Object(n.jsxs)("div",Object(te.a)(Object(te.a)({ref:t.innerRef},t.droppableProps),{},{className:"flex column",style:{flexGrow:"1",minHeight:"1px"},children:[o?o.map((function(t,a){return Object(n.jsx)(Tt,Object(te.a)(Object(te.a)({taskIdx:a},e.props),{},{setListDnd:e.setDragability,task:t,className:a===o.length-1&&"last-child"}),t.id)})):"",t.placeholder]}))}})}),Object(n.jsx)(Mt,Object(te.a)(Object(te.a)({},e.props),{},{titleRef:e.elTaskTitleRef,isComposerOpen:s==="TASK_COMPOSER".concat(a.id),onToggleComposer:e.onToggleComposer}))]}))}})}},{key:"listIdx",get:function(){var e=this.props,t=e.list,a=e.board;return W.getListIdxById(a,t.id)}}]),a}(s.Component),_t=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={listColors:["#9895E0","#4A94F8","#56c991","#3cc2e0","#eb5a46"],listToAdd:{title:"",tasks:[],style:{bgColor:"",title:{bgColor:""}}},isLabelOpen:!1},e.elListTitleRef=r.a.createRef(),e.toggleLabels=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!e.state.isLabelOpen;e.setState({isLabelOpen:t})},e.addListHandlers={onClick:function(t){t.stopPropagation(),e.elListTitleRef.current.focus(),(0,e.props.setCurrPopover)("LIST_ADD")},onSubmit:function(t){t.preventDefault();var a=Object(te.a)({},e.props),n=a.board,s=a.updateBoard,r=Object(te.a)({},e.state).listToAdd,o=n.lists.length,c=e.state.listColors[o];c||(c=q.getRandomColor()),r.id=q.makeId(),r.style.title.bgColor=c,r.style.bgColor=r.style.title.bgColor+"82",n.lists.push(r),e.setState({listToAdd:{title:"",tasks:[],style:{title:{bgColor:""}}}}),s(n,{txt:"has added list (".concat(r.title,") to the board.")})}},e.handleChange=function(t){var a=t.target,n=a.name,s=a.value;e.setState((function(e){return{listToAdd:Object(te.a)(Object(te.a)({},e.listToAdd),{},Object(je.a)({},n,s))}}))},e.onDragEnd=function(t){var a=t.destination,n=t.source,s=t.type;if(a&&(a.droppableId!==n.droppableId||a.index!==n.index)){var r=Object(te.a)({},e.props.board);if("task"===s){var o=W.getListIdxById(r,n.droppableId),c=W.getListIdxById(r,a.droppableId),i=r.lists[o].tasks.splice(n.index,1);r.lists[c].tasks.splice(a.index,0,i[0])}else{var l=r.lists.splice(n.index,1);r.lists.splice(a.index,0,l[0])}e.props.updateBoard(r)}},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.board,s=t.currPopover,r=t.isDashboardOpen,o=a.lists,c="LIST_ADD"===s,i=this.state,l=i.listToAdd,d=i.isLabelOpen;return a?Object(n.jsx)("div",{className:"board board-layout ".concat(r&&"slide-from-left"),style:{height:"76vh"},children:Object(n.jsx)(Nt.a,{onDragEnd:this.onDragEnd,children:Object(n.jsx)(Nt.c,{droppableId:"all-columns",direction:"horizontal",type:"list",children:function(t){return Object(n.jsxs)("ul",Object(te.a)(Object(te.a)({className:"lists-group clear-list flex  "},t.droppableProps),{},{ref:t.innerRef,children:[o.map((function(t,a){return Object(n.jsx)(Ft,Object(te.a)({toggleLabels:e.toggleLabels,isLabelOpen:d,list:t,listIdx:a,title:t.title},e.props),t.id)})),t.placeholder,Object(n.jsx)("li",{className:"add-list task-list-container flex column",children:Object(n.jsxs)("form",Object(te.a)(Object(te.a)({},e.addListHandlers),{},{className:"add-list-form  flex column ".concat(c&&"open"),children:[Object(n.jsxs)("div",{className:"input-wrapper align-center flex",children:[!c&&Object(n.jsx)(pe.a,{}),Object(n.jsx)("input",{type:"text",value:l.title,className:"add-list-title",placeholder:"Add New List",name:"title",autoComplete:"off",ref:e.elListTitleRef,onChange:e.handleChange})]}),Object(n.jsx)("button",{type:"submit",className:"add-list-btn primary-btn ".concat(c&&"open"),children:"Add list"})]}))})]}))}})})}):Object(n.jsx)(ye,{})}}]),a}(s.Component),Ut={updateBoard:Te},Ht=Object(j.b)((function(e){return{currPopover:e.popoverReducer.currPopover}}),Ut)(_t),qt=a(287),Gt=a.n(qt),Wt=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={isOpen:!1},e.handleClickOutside=function(){e.setState({isOpen:!1})},e.toggleSearch=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.setState({isOpen:t})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state.isOpen;return Object(n.jsxs)("div",{className:"board-filter flex align-center ".concat(e&&"open"),children:[Object(n.jsx)("input",{type:"text",name:"txt",className:"filter-by-txt",disabled:!e,autoComplete:"off"}),Object(n.jsx)(Gt.a,{onClick:this.toggleSearch,className:"filter-icon"})]})}}]),a}(s.Component),Kt=Object(re.a)(Wt),zt=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={notifications:[]},e.onReadNotification=function(t){var a=e.state.notifications,n=a.findIndex((function(e){return e.id===t}));a.splice(n,1),e.setState({notifications:a})},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=W.getNotifications();this.setState({notifications:e})}},{key:"render",value:function(){var e=this,t=this.state.notifications,a=this.props,s=a.board,r=a.setCurrPopover;return t?Object(n.jsxs)("div",{className:"notification-popover flex column",onClick:function(e){return e.stopPropagation()},children:[Object(n.jsx)(se,{title:"Notifications",setCurrPopover:r}),Object(n.jsxs)("div",{className:"notification-actions flex space-between",children:[Object(n.jsx)("span",{className:"view-all",children:"View All"}),Object(n.jsx)("span",{className:"mark-all-as-read",children:"Mark All as Read"})]}),Object(n.jsx)("section",{className:"popover-section flex column",children:Object(n.jsxs)("ul",{className:"popover-section-list clear-list",children:[Object(n.jsx)("h3",{className:"popover-section-header",children:"Your Notifications"}),t.map((function(t){return Object(n.jsxs)("li",{className:"popover-section-list-item flex",children:[Object(n.jsx)("div",{className:"checkbox-container ",title:"mark-read",children:Object(n.jsx)("input",{type:"checkbox",className:"read-notification-checkbox",onChange:function(){e.onReadNotification(t.id)}})}),Object(n.jsxs)("div",{className:"notification-details",children:[Object(n.jsxs)("div",{className:"notification-details-header flex column justify-center align-start",children:[Object(n.jsx)("span",{className:"notification-details-header-task-title",children:t.txt}),Object(n.jsx)("div",{className:"notification-details-header-board-title",children:Object(n.jsx)("span",{children:s.title})})]}),Object(n.jsx)("div",{className:"notification-details-body",children:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Nesciunt odit voluptas, similique eius corporis reprehenderit officiis cupiditate eos beatae molestias."})]})]},t.id)}))]})})]}):Object(n.jsx)("h1",{children:"Loading..."})}}]),a}(s.Component),Vt=a(290),Yt=a.n(Vt),Jt=a(292),Xt=a.n(Jt),Zt=a(291),Qt=a.n(Zt),$t=a(289),ea=a.n($t),ta=a(288),aa=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={activites:[]},e.onOpenTask=function(t){var a=W.getListByTaskId(e.props.board,t);e.props.history.push("/board/".concat(e.props.board._id,"/").concat(a.id,"/").concat(t))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.setCurrPopover,a=Object(te.a)({},this.props).board.activities,s="ACTIVITY_MENU"===this.props.currPopover;return Object(n.jsxs)("div",{className:"activity-menu ".concat(s&&"open"),onClick:function(e){e.stopPropagation()},children:[Object(n.jsx)(se,{title:"Activities",setCurrPopover:t}),Object(n.jsx)("section",{className:"popover-section flex column",children:Object(n.jsx)("ul",{className:"popover-section-list clear-list",children:a.map((function(t){return Object(n.jsxs)("li",{className:"popover-section-list-item",children:[Object(n.jsx)(Ye,{member:t.byMember}),Object(n.jsxs)("div",{className:"activity-txt",children:[Object(n.jsxs)("span",{className:"activity-by",children:[t.byMember.fullname," "]}),Object(n.jsxs)("span",{className:"txt",children:[t.txt," ",t.task&&Object(n.jsx)("span",{className:"task-title",onClick:function(){e.onOpenTask(t.task.id)},children:t.task.title})]}),Object(n.jsx)("div",{className:"activity-at",children:Object(ta.a)(new Date(t.createdAt),{addSuffix:!0})})]})]},t.id)}))})})]})}}]),a}(s.Component),na=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={currBadgeCount:0},e.incNotificationBadge=function(t){e.setState({currBadgeCount:e.state.currBadgeCount+1},(function(){}))},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.board,s=t.setCurrPopover,r=t.currPopover,o=t.onToggleDashboard,c=t.className,i=t.isDashboardOpen,l=a.members,d=this.state.currBadgeCount,u="NOTIFICATION_POPOVER"===r;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("header",{className:"board-header board-layout  ".concat(c),children:[i&&Object(n.jsx)(ea.a,{className:"go-back-icon",onClick:function(){return o()}}),Object(n.jsx)("div",{className:"board-title",children:a.title}),Object(n.jsx)("div",{className:"members-nav-display flex",children:l.map((function(e){return Object(n.jsx)("div",{className:"board-member-img-wrapper",children:Object(n.jsx)(Ye,{member:e})},e._id)}))}),Object(n.jsxs)("ul",{className:"board-nav clear-list flex",children:[Object(n.jsx)("li",{className:"board-filter-container",children:Object(n.jsx)(Kt,{})}),Object(n.jsx)("li",{className:"notification-icon-container ".concat(d&&"unread"),children:Object(n.jsx)(Yt.a,{onClick:function(t){t.stopPropagation(),e.setState({currBadgeCount:0}),s("NOTIFICATION_POPOVER")}})}),Object(n.jsx)("li",{title:"dashboard",children:Object(n.jsx)(Qt.a,{className:"dashboard-icon",onClick:function(){return o()}})}),Object(n.jsx)("li",{title:"activity",children:Object(n.jsx)(Xt.a,{className:"activity-menu-icon",onClick:function(e){e.stopPropagation(),s("ACTIVITY_MENU")}})})]})]}),u&&Object(n.jsx)(zt,Object(te.a)({},this.props)),Object(n.jsx)(aa,Object(te.a)({},this.props))]})}}]),a}(s.Component),sa=a(575),ra=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={isMemberModalOpen:!1},e.onToggleMembersModal=function(){e.setState({isMemberModalOpen:!e.state.isMemberModalOpen})},e.onDateCheckChange=function(t,a,n){var s=e.props,r=s.currBoard,o=s.updateBoard,c=s.user,i=s.task,l=Object(He.cloneDeep)(r),d=l.lists[t].tasks[a].dueDate;d.isDone=n.target.checked,o(l,{user:c,txt:d.isDone?"marked the due date complete on":"marked the due date incomplete on",task:i})},e}return Object(u.a)(a,[{key:"render",value:function(){var e,t,a,s,r=this,o=this.props,c=o.currBoard,i=o.currPopver,l=o.togglePopover,d=this.props.match.params,u=d.listId,p=d.taskId,b=W.getListAndTaskIdxById(c,u,p),j=b.listIdx,h=b.taskIdx,m=c.lists[j],f=c.lists[j].tasks[h],v=this.state.isMemberModalOpen;return Object(n.jsx)("div",{className:"details-info",children:Object(n.jsxs)("div",{className:"flex",style:{flexWrap:"wrap"},children:[(null===f||void 0===f||null===(e=f.members)||void 0===e?void 0:e.length)&&Object(n.jsxs)("div",{className:"card-detail",children:[Object(n.jsx)("h3",{children:"Members"}),Object(n.jsxs)("div",{className:"member-imgs flex align-center",children:[f.members.map((function(e){return Object(n.jsx)("div",{className:"task-member-img",children:Object(n.jsx)("img",{src:e.imgUrl})},e._id)})),Object(n.jsxs)("div",{className:"task-add-member small-btn-bgc",title:"Add Member",children:[Object(n.jsx)(pe.a,{onClick:this.onToggleMembersModal,style:{height:"32px"}}),v&&Object(n.jsx)(Je,{board:c,list:m,task:f,setCurrPopover:this.onToggleMembersModal,currListIdx:this.props.currListIdx,currTaskIdx:this.props.currTaskIdx,updateBoard:this.props.updateBoard})]})]})]}),(null===(t=f.labels)||void 0===t?void 0:t.length)?Object(n.jsxs)("div",{className:"card-detail detail-labels",children:[Object(n.jsx)("h3",{children:"Labels"}),Object(n.jsxs)("div",{className:"task-labels flex",children:[f.labels.map((function(e){return Object(n.jsx)("span",{onClick:function(){return l("labels")},className:"task-label-preview flex align-center justify-center",style:{backgroundColor:e.color},children:Object(n.jsx)("span",{className:"label-title",children:null===e||void 0===e?void 0:e.title})},e.id)})),Object(n.jsxs)("div",{className:"task-add-label small-btn-bgc",title:"Add Label",children:[Object(n.jsx)(pe.a,{onClick:function(){return l("labels")},style:{height:"32px"}}),"labels"===i&&Object(n.jsx)(ze,Object(te.a)({setCurrPopover:function(){return l("")}},this.props))]})]})]}):"",(null===(a=f.dueDate)||void 0===a?void 0:a.timestamp)&&Object(n.jsxs)("div",{className:"card-detail",children:[Object(n.jsx)("h3",{children:"Due Date"}),Object(n.jsxs)("div",{className:"task-due-time flex align-center justify-center",children:[Object(n.jsxs)("span",{style:{marginLeft:"5px"},children:[Object(n.jsx)("span",{className:"date-checkbox",children:Object(n.jsx)("input",{checked:f.dueDate.isDone,onChange:function(e){return r.onDateCheckChange(j,h,e)},type:"checkbox"})}),Object(sa.a)(null===f||void 0===f||null===(s=f.dueDate)||void 0===s?void 0:s.timestamp,Date.now())]}),Object(n.jsx)("span",{className:"date-complete ".concat(!f.dueDate.isDone&&"hidden"),children:"COMPLETE"})]})]})]})})}}]),a}(s.Component),oa={updateBoard:Te},ca=Object(j.b)((function(e){return{currBoard:e.boardReducer.currBoard,currListIdx:e.boardReducer.currListIdx,currTaskIdx:e.boardReducer.currTaskIdx}}),oa)(ra),ia=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={currTask:"",isTxtAreaOpen:!1},e.handleInput=function(t){var a=t.target,n=a.name,s=a.value;e.setState((function(e){return{currTask:Object(te.a)(Object(te.a)({},e.currTask),{},Object(je.a)({},n,s))}}))},e.toggleControls=function(t){e.setState({isTxtAreaOpen:t})},e.closeInput=function(){e.setState({currTask:e.props.task},(function(){return e.toggleControls(!1)}))},e.saveDescription=function(t){var a=e.props,n=a.board,s=a.user,r=e.props.match.params,o=r.listId,c=r.taskId,i=W.getListAndTaskIdxById(n,o,c),l=i.listIdx,d=i.taskIdx,u=Object(He.cloneDeep)(e.props.task);u=Object(He.cloneDeep)(e.state.currTask);var p=Object(He.cloneDeep)(n);p.lists[l].tasks[d]=u;var b={user:s,txt:"changed task description on",task:u};e.props.updateBoard(p,b),e.toggleControls(!1)},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.task;this.setState({currTask:e})}},{key:"render",value:function(){var e=this,t=this.props,a=(t.board,t.list,t.task),s=this.state,r=s.currTask,o=s.isTxtAreaOpen;return Object(n.jsx)("div",{className:"task-middle-details",children:Object(n.jsxs)("div",{className:"details-description",children:[Object(n.jsx)(Ue.a,{style:{position:"absolute",left:"-30px",top:"3px"}}),Object(n.jsx)("h3",{className:"task-section-heading",children:"Description"}),a.description?Object(n.jsx)("textarea",{className:"task-textarea",style:{fontSize:"16px",fontWeight:"400px",height:"auto"},value:r.description,name:"description",spellCheck:"false",onChange:this.handleInput,rows:"3",onFocus:function(){return e.toggleControls(!0)},onBlur:function(){return e.saveDescription()}}):Object(n.jsx)("textarea",{className:"task-textarea",style:{fontSize:"16px",fontWeight:"400px",height:"auto",backgroundColor:"rgba(9,30,66,.04)"},value:r.description,placeholder:"Add a more detailed description...",name:"description",spellCheck:"false",onChange:this.handleInput,rows:"3",onFocus:function(){return e.toggleControls(!0)},onBlur:function(){return e.saveDescription()}}),Object(n.jsxs)("div",{className:"task-desc-buttons flex align-center ".concat(!o&&"hidden"),children:[Object(n.jsx)("button",{onClick:this.saveDescription,className:"primary-btn",children:"Save"}),Object(n.jsx)(ne.a,{onClick:function(){return e.closeInput()}})]})]})})}}]),a}(s.Component),la={updateBoard:Te},da=Object(j.b)((function(e){return{board:e.boardReducer.currBoard,currListIdx:e.boardReducer.currListIdx,currTaskIdx:e.boardReducer.currTaskIdx}}),la)(Object(l.f)(ia)),ua=(a(300),a(569)),pa=a(570),ba=a(573),ja=a(91),ha=a.n(ja),ma=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={checklists:[],newTodo:{txt:""},newTodos:[]},e.elTitleRef=r.a.createRef(),e.handleInput=function(t,a){var n=a.target,s=n.name,r=n.value,o=Object(He.cloneDeep)(e.state.checklists[t]),c=Object(He.cloneDeep)(e.state.checklists);o[s]=r,c[t]=o,e.setState({checklists:c})},e.handleCheckbox=function(t,a,n){var s=Object(He.cloneDeep)(e.state.checklists),r=s[a].todos[t];r.isDone=n.target.checked,e.setState({checklists:s},(function(){r.isDone?e.onUpdateBoard("completed",r.title):e.onUpdateBoard("unchecked",r.title)}))},e.handleTodoChange=function(t,a,n){var s=Object(He.cloneDeep)(e.state.checklists);s[a].todos[t].title=n.target.value,e.setState({checklists:s})},e.percentDone=function(e){var t=e.todos.filter((function(e){return e.isDone}));return parseInt(t.length/e.todos.length*100)},e.handleNewTodo=function(t){var a=t.target.name,n=t.target.value,s=Object(U.a)(e.state.newTodos);s[a]=n,e.setState({newTodos:s})},e.onEnterPress=function(t){t.target.value&&13===t.keyCode&&!1===t.shiftKey&&(t.preventDefault(),"title"===t.target.name?e.onUpdateBoard("changeTitle"):e.onUpdateBoard("changeTxt"))},e.onUpdateBoard=function(){var t=Object(f.a)(m.a.mark((function t(a,n){var s,r,o,c,i,l,d,u,p,b,j,h;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,o=r.board,c=r.list,i=r.task,l=e.state.checklists,d=Object(He.cloneDeep)(o),u=W.getListIdxById(o,c.id),p=W.getTaskIdxById(c,i.id),d.lists[u].tasks[p].checklists=l,b=e.props.user,j="completed"===a?'completed "'.concat(n,'" on task '):"changeTxt"===a?"changed a todo in task":"unchecked"===a?'unchecked "'.concat(n,'" on task'):"remove"===a?'removed "'.concat(n,'" from task'):"newTodo"===a?'added a todo: "'.concat(n,'" to task'):"changed checklist title in",h={user:b,txt:j,task:i},t.next=11,e.props.updateBoard(d,h);case 11:null===(s=e.elTitleRef.current)||void 0===s||s.blur();case 12:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.onRemoveTodo=function(t,a,n){var s=Object(He.cloneDeep)(e.state.checklists),r=s[a].todos[t];s[a].todos.splice(t,1),s[a].todos.length||s.splice(a,1),e.setState({checklists:s},(function(){return e.onUpdateBoard("remove",r.title)}))},e.onAddItem=function(t,a){if(a.target.value&&13===a.keyCode&&!1===a.shiftKey){var n={id:q.makeId(),title:e.state.newTodos[t],isDone:!1},s=Object(He.cloneDeep)(e.state.checklists);s[t].todos.push(n),e.setState({checklists:s},(function(){e.onUpdateBoard("newTodo",n.title);var a=Object(U.a)(e.state.newTodos);a[t]="",e.setState({newTodos:a})}))}},e.onDeleteChecklist=function(t){var a=Object(He.cloneDeep)(e.props.board),n=e.props,s=n.list,r=n.task,o=n.updateBoard,c=W.getListAndTaskIdxById(a,s.id,r.id),i=c.listIdx,l=c.taskIdx;a.lists[i].tasks[l].checklists.splice(t,1),o(a)},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.task.checklists;if(e){var t=Object(He.cloneDeep)(e);this.setState({checklists:t})}else this.setState({checklists:[]})}},{key:"componentDidUpdate",value:function(e){var t=this.props.task.checklists;if(e.task.checklists!==t){var a=Object(He.cloneDeep)(t);this.setState({checklists:a})}}},{key:"render",value:function(){var e=this,t=this.state,a=t.checklists,s=t.newTodos,r=this.percentDone;return a?Object(n.jsx)("div",{className:"task-checklist",children:null===a||void 0===a?void 0:a.map((function(t,a){return Object(n.jsxs)("div",{className:"checklist-header",children:[Object(n.jsx)(Re.a,{style:{position:"absolute",left:"-30px",top:"3px"}}),Object(n.jsxs)("div",{className:"flex align-center space-between",children:[Object(n.jsx)("textarea",{style:{width:"70%"},className:"task-textarea",value:t.title,name:"title",onChange:function(t){return e.handleInput(a,t)},spellCheck:"false",onKeyDown:e.onEnterPress,ref:e.elTitleRef}),Object(n.jsx)("span",{onClick:function(){return e.onDeleteChecklist(a)},children:Object(n.jsx)("button",{className:"secondary-btn",style:{padding:"5px 8px"},children:"Delete"})})]}),(null===t||void 0===t?void 0:t.todos.length)?Object(n.jsx)(Oa,{value:r(t)}):"",(null===t||void 0===t?void 0:t.todos)&&t.todos.map((function(t,s){return Object(n.jsxs)("div",{className:"task-todo-container flex align-center justify-center",children:[Object(n.jsx)("input",{type:"checkbox",name:"checkbox",onChange:function(t){return e.handleCheckbox(s,a,t)},checked:t.isDone}),Object(n.jsx)("input",{type:"text",className:"".concat(t.isDone&&"checked"," todo-title task-todo-input"),value:t.title,onChange:function(t){return e.handleTodoChange(s,a,t)},onKeyDown:e.onEnterPress,autoComplete:"false",onBlur:e.onUpdateBoard}),Object(n.jsx)(ha.a,{className:"todo-delete-btn",onClick:function(t){return e.onRemoveTodo(s,a,t)}})]})})),Object(n.jsx)("input",{type:"text",autoComplete:"false",name:a,placeholder:"Add an item",className:"task-todo-input",value:s[a],onChange:e.handleNewTodo,onKeyDown:function(t){return e.onAddItem(a,t)},onBlur:function(){e.setState({newTodo:{txt:""}})}})]})}))}):Object(n.jsx)(ye,{})}}]),a}(s.Component),fa={updateBoard:Te},va=Object(j.b)((function(e){return{currListIdx:e.boardReducer.currListIdx}}),fa)(ma);function Oa(e){return Object(n.jsxs)(ba.a,{display:"flex",alignItems:"center",children:[Object(n.jsx)(ba.a,{width:"100%",mr:1,children:Object(n.jsx)(ua.a,Object(te.a)({variant:"determinate"},e))}),Object(n.jsx)(ba.a,{minWidth:35,children:Object(n.jsx)(pa.a,{variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})}Object(pt.a)({root:{width:"100%"}});var xa=a(299),ga=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={isActivityOpen:!1,comment:{txt:""}},e.onToggleDetails=function(){e.setState({isActivityOpen:!e.state.isActivityOpen})},e.handleComment=function(t){var a=t.target,n=a.name,s=a.value;e.setState((function(e){return{comment:Object(te.a)(Object(te.a)({},e.comment),{},Object(je.a)({},n,s))}}))},e.onEnterPress=function(t){13===t.keyCode&&!1===t.shiftKey&&(t.preventDefault(),e.saveComment(t))},e.saveComment=function(){var t=Object(f.a)(m.a.mark((function t(a){var n,s,r,o,c,i,l,d,u,p,b,j,h,f,v;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state.comment.txt,s=e.props.user,r={id:q.makeId(),createdAt:Date.now(),txt:n},o=s?{_id:s._id,fullname:s.fullname,imgUrl:s.imgUrl}:{_id:"guest",fullname:"Guest",imgUrl:"https://res.cloudinary.com/nofar/image/upload/v1611336021/psvaqtmh8ithfqe8ah27.png"},r.byMember=o,c=e.props,i=c.currBoard,l=c.list,d=c.task,u=Object(He.cloneDeep)(d),p=Object(He.cloneDeep)(i),u.comments||(u.comments=[]),u.comments.unshift(r),b=W.getListAndTaskIdxById(i,l.id,d.id),j=b.taskIdx,h=b.listIdx,p.lists[h].tasks[j]=u,f={user:s,txt:'commented  "'.concat(n,'" on'),task:d},t.next=15,e.props.updateBoard(p,f);case 15:v={txt:""},e.setState({comment:v});case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemoveComment=function(){var t=Object(f.a)(m.a.mark((function t(a,n,s){var r,o,c,i,l;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=Object(He.cloneDeep)(e.props.currBoard)).lists[a].tasks[n].comments.splice(s,1),o=e.props,c=o.user,i=o.task,l={user:c,txt:"removed a comment from",task:i},t.next=6,e.props.updateBoard(r,l);case 6:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.currBoard,s=t.user,r=this.props.match.params,o=r.listId,c=r.taskId,i=W.getListAndTaskIdxById(a,o,c),l=i.listIdx,d=i.taskIdx,u=a.lists[l].tasks[d],p=null===u||void 0===u?void 0:u.comments,b=a.activities.filter((function(e){if(e.task)return e.task.id===u.id})),j=this.state,h=j.isActivityOpen,m=j.comment;return b?Object(n.jsxs)("div",{className:"task-activity",children:[Object(n.jsxs)("div",{className:"activity-header flex",children:[Object(n.jsx)(yt.a,{style:{position:"absolute",left:"-30px",top:"3px"}}),Object(n.jsx)("h3",{className:"task-section-heading",style:{padding:"4px 8px"},children:"Activity"}),Object(n.jsx)("button",{onClick:this.onToggleDetails,className:"secondary-btn",children:h?"Hide Activity":"Show Activity"})]}),Object(n.jsxs)("div",{className:"task-comments",children:[Object(n.jsxs)("div",{className:"new-comment flex align-center",children:[Object(n.jsx)("div",{className:"task-member-img",children:s?Object(n.jsx)("img",{src:s.imgUrl}):Object(n.jsx)("img",{src:"https://res.cloudinary.com/nofar/image/upload/v1611336021/psvaqtmh8ithfqe8ah27.png"})}),Object(n.jsx)("form",{children:Object(n.jsx)("div",{className:"comment-box",children:Object(n.jsx)("textarea",{className:"comment-textarea",placeholder:"Write a comment...",value:m.txt,name:"txt",onChange:this.handleComment,onKeyDown:this.onEnterPress})})})]}),p?p.map((function(t,a){return Object(n.jsxs)("div",{className:"task-user-comment flex",children:[Object(n.jsx)("div",{className:"task-member-img",children:Object(n.jsx)("img",{src:t.byMember.imgUrl})}),Object(n.jsxs)("div",{className:"activity-info flex column justify-center",children:[Object(n.jsxs)("p",{className:"activity-txt",children:[Object(n.jsxs)("span",{className:"activity-member-name",children:[t.byMember.fullname," "]}),Object(n.jsx)("div",{className:"activity-date",style:{display:"inline-block"},children:Object(n.jsx)("span",{children:Object(xa.a)(t.createdAt,Date.now())})})]}),Object(n.jsx)("div",{className:"comment-txt",children:Object(n.jsx)("span",{children:t.txt})})]}),t.byMember._id===(null===s||void 0===s?void 0:s._id)?Object(n.jsx)("span",{onClick:function(){return e.onRemoveComment(l,d,a)},className:"comment-dlt-container",children:Object(n.jsx)(ha.a,{className:"comment-dlt-btn"})}):""]},t.id)})):""]}),Object(n.jsx)("div",{className:"activity-container ".concat(!h&&"hidden"),children:b&&b.map((function(e){return Object(n.jsxs)("div",{className:"task-user-activity flex",children:[Object(n.jsx)("div",{className:"task-member-img",children:Object(n.jsx)("img",{src:e.byMember.imgUrl})}),Object(n.jsxs)("div",{className:"activity-info flex column justify-center",children:[Object(n.jsxs)("p",{className:"activity-txt",children:[Object(n.jsxs)("span",{className:"activity-member-name",children:[e.byMember.fullname," "]}),Object(n.jsxs)("span",{children:[e.txt," "]}),Object(n.jsx)("span",{className:"activity-task-title",children:e.task.title})]}),Object(n.jsx)("div",{className:"activity-date",children:Object(n.jsx)("span",{children:Object(xa.a)(e.createdAt,Date.now())})})]})]},e.id)}))})]}):Object(n.jsx)(ye,{})}}]),a}(s.Component),ka={updateBoard:Te},ya=Object(j.b)((function(e){return{currBoard:e.boardReducer.currBoard,user:e.userReducer.user}}),ka)(ga),Ca=a(151),Na=a.n(Ca),wa=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).onDeleteImg=function(t){var a=e.props,n=a.board,s=a.list,r=a.task,o=a.updateBoard,c=a.user,i=W.getListAndTaskIdxById(n,s.id,r.id),l=i.listIdx,d=i.taskIdx,u=Object(He.cloneDeep)(n);u.lists[l].tasks[d].attachments.splice(t,1),o(u,{user:c,txt:"removed an image from",task:r})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=(t.board,t.list,t.task.attachments);return Object(n.jsx)("section",{className:"attachments",children:Object(n.jsxs)("div",{className:"details-images",children:[Object(n.jsx)(Na.a,{style:{position:"absolute",left:"-30px",top:"3px"}}),Object(n.jsx)("h3",{className:"task-section-heading",children:"Images"}),a?Object(n.jsx)("div",{className:"img-list",children:a.map((function(t,a){return Object(n.jsx)("div",{className:"img-preview flex",style:{backgroundImage:"url('".concat(t,"')")},children:Object(n.jsx)(ha.a,{onClick:function(){return e.onDeleteImg(a)},className:"todo-delete-btn",style:{position:"absolute",right:"0"}})})}))}):""]})})}}]),a}(s.Component),Ia=a(293),Ta=a.n(Ia),Da=a(294),Ba=a.n(Da),Sa={uploadImg:function(e){return Pa.apply(this,arguments)}};function Pa(){return(Pa=Object(f.a)(m.a.mark((function e(t){var a,n,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Clouddddddddd"),"nofar","https://api.cloudinary.com/v1_1/nofar/image/upload",(a=new FormData).append("file",t),a.append("upload_preset","yn9mpntb"),e.prev=6,e.next=9,O()("https://api.cloudinary.com/v1_1/nofar/image/upload",{method:"POST",data:a});case 9:return n=e.sent,s=n.data,console.log("data:",s),e.abrupt("return",s);case 15:e.prev=15,e.t0=e.catch(6),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[6,15]])})))).apply(this,arguments)}var Aa=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={dueDate:{timestamp:"",isDone:!1},taskImgUrl:""},e.onAddNewList=function(){var t=e.props,a=t.board,n=t.list,s=t.task,r=t.updateBoard,o=t.user,c=W.getListAndTaskIdxById(a,n.id,s.id),i=c.listIdx,l=c.taskIdx,d=Object(He.cloneDeep)(a),u={id:q.makeId(),title:"Checklist",todos:[]};d.lists[i].tasks[l].checklists||(d.lists[i].tasks[l].checklists=[]),d.lists[i].tasks[l].checklists.push(u),r(d,{user:o,txt:"added ".concat(u.title," to"),task:s}),console.log("after update")},e.onRemoveTask=Object(f.a)(m.a.mark((function t(){var a,n,s,r,o,c,i,l,d,u,p;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.board,s=a.list,r=a.task,o=a.updateBoard,c=a.user,i=W.getListAndTaskIdxById(n,s.id,r.id),l=i.listIdx,d=i.taskIdx,(u=Object(He.cloneDeep)(n)).lists[l].tasks.splice(d,1),p={user:c,txt:"removed task",task:r},e.props.history.push("/board/".concat(n._id)),t.next=8,o(u,p);case 8:case"end":return t.stop()}}),t)}))),e.onDateChange=function(t){var a=Object(vt.a)(t.target.value),n={timestamp:Object(Ot.a)(a),isDone:!1};e.setState({dueDate:n})},e.onSaveDate=function(){var t=e.props,a=t.board,n=t.list,s=t.task,r=t.updateBoard,o=t.user,c=W.getListAndTaskIdxById(a,n.id,s.id),i=c.listIdx,l=c.taskIdx,d=Object(He.cloneDeep)(a);e.state.dueDate.timestamp&&(d.lists[i].tasks[l].dueDate=e.state.dueDate,r(d,{user:o,txt:"set a due date to ".concat(Object(sa.a)(e.state.dueDate.timestamp,Date.now())," on"),task:s}),e.props.togglePopover(""))},e.onUploadImg=function(){var t=Object(f.a)(m.a.mark((function t(a){var n,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Sa.uploadImg(a.target.files[0]);case 3:n=t.sent,s=n.secure_url,e.setState({taskImgUrl:s},Object(f.a)(m.a.mark((function t(){var a,n,s,r,o,c,i,l,d,u,p,b,j;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,s=n.board,r=n.list,o=n.task,c=n.updateBoard,i=n.user,l=W.getListAndTaskIdxById(s,r.id,o.id),d=l.listIdx,u=l.taskIdx,p=Object(He.cloneDeep)(s),b=p.lists[d].tasks[u],(null===(a=b.attachments)||void 0===a?void 0:a.length)?b.attachments=[].concat(Object(U.a)(p.lists[d].tasks[u].attachments),[e.state.taskImgUrl]):(b.attachments=[],b.attachments.push(e.state.taskImgUrl)),j={user:i,txt:"uploaded an image to",task:o},t.next=8,c(p,j);case 8:case"end":return t.stop()}}),t)})))),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.setState({msg:"Couldnt upload your image try again"}),console.log("problem loading the img ",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.currPopover,a=e.togglePopover;return Object(n.jsxs)("aside",{className:"sidebar flex column",children:[Object(n.jsx)("h3",{className:"sidebar-heading",children:"Actions"}),Object(n.jsxs)("div",{className:"sidebar-actions flex column",children:[Object(n.jsxs)("div",{className:"action-container flex align-center",onClick:function(){return a("labels")},children:[Object(n.jsx)("span",{className:"action-icon",children:Object(n.jsx)(tt.a,{})}),Object(n.jsx)("span",{className:"action-txt",children:"Labels"}),"labels"===t&&Object(n.jsx)(ze,Object(te.a)({setCurrPopover:function(){return a("")}},this.props))]}),Object(n.jsxs)("div",{className:"action-container flex align-center",onClick:function(){return a("members")},children:[Object(n.jsx)("span",{className:"action-icon",children:Object(n.jsx)(nt.a,{})}),Object(n.jsx)("span",{className:"action-txt",children:"Members"}),"members"===t&&Object(n.jsx)(Je,Object(te.a)({setCurrPopover:function(){return a("")}},this.props))]}),Object(n.jsxs)("div",{className:"action-container flex align-center",onClick:function(){return a("date")},children:[Object(n.jsx)("span",{className:"action-icon",children:Object(n.jsx)(Fe.a,{})}),Object(n.jsx)("span",{className:"action-txt",children:"Due Date"}),"date"===t&&Object(n.jsx)(mt,Object(te.a)({onClick:function(e){return e.stopPropagation()},setCurrPopover:function(){return a("")},onDateChange:this.onDateChange,onSaveDate:this.onSaveDate},this.props))]}),Object(n.jsxs)("div",{className:"action-container flex align-center",onClick:this.onAddNewList,children:[Object(n.jsx)("span",{className:"action-icon",children:Object(n.jsx)(Re.a,{})}),Object(n.jsx)("span",{className:"action-txt",children:"Checklist"})]}),Object(n.jsx)("div",{className:"action-container flex align-center",children:Object(n.jsxs)("label",{className:"action-icon",style:{width:"100%",cursor:"pointer"},children:["  ",Object(n.jsx)(Na.a,{className:"add-img-icon"}),Object(n.jsx)("input",{onChange:this.onUploadImg,type:"file",hidden:!0}),Object(n.jsx)("span",{className:"action-txt",children:"Image"})]})}),Object(n.jsxs)("div",{className:"action-container flex align-center",onClick:function(){return a("move")},children:[Object(n.jsx)("span",{className:"action-icon",children:Object(n.jsx)(Ta.a,{})}),Object(n.jsx)("span",{className:"action-txt",children:"Move"}),"move"===t&&Object(n.jsx)(ft,Object(te.a)({setCurrPopover:function(){return a("")}},this.props))]}),Object(n.jsxs)("div",{className:"action-container flex align-center",onClick:function(){return a("copy")},children:[Object(n.jsx)("span",{className:"action-icon",children:Object(n.jsx)(ut.a,{})}),Object(n.jsx)("span",{className:"action-txt",children:"Copy"}),"copy"===t&&Object(n.jsx)(Qe,Object(te.a)({setCurrPopover:function(){return a("")}},this.props))]}),Object(n.jsxs)("div",{className:"action-container flex align-center",onClick:this.onRemoveTask,children:[Object(n.jsx)("span",{className:"action-icon",children:Object(n.jsx)(Ba.a,{})}),Object(n.jsx)("span",{className:"action-txt",children:"Delete"})]})]})]})}}]),a}(s.Component),La=a(295),Ea=a.n(La),Ra=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={isDetailsOpen:!1,currPopover:"",board:{},list:{},task:{}},e.elTitleRef=r.a.createRef(),e.getDetails=function(){var t=e.props.match.params,a=t.listId,n=t.taskId;if(a&&n){var s=Object(te.a)({},e.props).board,r=W.getListAndTaskIdxById(s,a,n),o=r.listIdx,c=r.taskIdx,i=s.lists[o];return{board:s,list:i,task:i.tasks[c]}}},e.handleTitle=function(t){var a=t.target,n=(a.name,a.value),s=Object(He.cloneDeep)(e.state.task);s.title=n,e.setState({task:s})},e.onEnterPress=function(t){13===t.keyCode&&!1===t.shiftKey&&(t.preventDefault(),e.onSubmitForm(t))},e.onSubmitForm=function(){var t=Object(f.a)(m.a.mark((function t(a){var n,s,r,o,c,i,l,d,u;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.state,s=n.board,r=n.list,(o=n.task).title){t.next=4;break}return t.abrupt("return");case 4:return c=Object(te.a)({},e.state.board),i=W.getListIdxById(s,r.id),l=c.lists[i].tasks.findIndex((function(e){return e.id===o.id})),c.lists[i].tasks[l]=o,d=e.props.user,u={user:d,txt:"has changed task (".concat(o.title,") title"),task:o},e.elTitleRef.current.blur(),t.next=13,e.props.updateBoard(c,u);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getCurrTask=function(){var t=Object(f.a)(m.a.mark((function t(a,n){var s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W.getTaskById(a,n);case 2:s=t.sent,e.setState({task:s});case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.onCloseModal=function(t){t.preventDefault(),t.stopPropagation();var a=e.state.board;e.setState({isDetailsOpen:!1},Object(f.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.history.push("/board/".concat(a._id));case 1:case"end":return t.stop()}}),t)}))))},e.togglePopover=function(t){e.state.currPopover===t?e.setState({currPopover:""}):e.setState({currPopover:t})},e.onOverlayClick=function(){var t=e.props.board;e.props.history.push("/board/".concat(t._id))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=(e.listId,e.taskId),a=this.getDetails();if(a){var n=a.board,s=a.list,r=a.task;this.getCurrTask(n._id,t),this.setState({board:n,list:s,task:r})}}},{key:"componentDidUpdate",value:function(){var e=this,t=this.props.match.params,a=t.listId,n=t.taskId,s=this.getDetails();if(s){var r=s.board,o=s.list,c=s.task;n&&a&&!this.state.isDetailsOpen&&this.setState({isDetailsOpen:!0,board:r,list:o,task:c},Object(f.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.getCurrTask(r._id,n),e.props.isOverlayOpen){t.next=4;break}return t.next=4,e.props.toggleOverlay();case 4:case"end":return t.stop()}}),t)}))))}}},{key:"componentWillUnmount",value:function(){this.props.toggleOverlay()}},{key:"render",value:function(){var e,t,a=this,s=this.state,r=s.isDetailsOpen,o=s.currPopover,c=this.props,i=c.board,l=c.user,d=this.props.match.params,u=d.listId,p=d.taskId,b=W.getListAndTaskIdxById(i,u,p),j=b.listIdx,h=b.taskIdx,m=i.lists[j],f=i.lists[j].tasks[h];return f?Object(n.jsx)("section",{onClick:function(){return o?a.togglePopover(""):""},className:"task-details",children:this.state.isDetailsOpen&&Object(n.jsx)("div",{className:"".concat(this.props.isOverlayOpen&&"main-overlay"," ").concat(!r&&"hidden"),onClick:this.onOverlayClick,children:Object(n.jsxs)("div",{className:"details-modal flex",onClick:function(e){e.stopPropagation(),o&&a.togglePopover("")},children:[Object(n.jsxs)("div",{className:"main-details flex column",children:[Object(n.jsxs)("div",{className:"details-header flex column",children:[Object(n.jsxs)("form",{className:"flex",children:[Object(n.jsx)(Ea.a,{style:{position:"absolute",left:"-30px",top:"3px"}}),Object(n.jsx)("textarea",{onKeyDown:this.onEnterPress,ref:this.elTitleRef,className:"task-textarea",name:"title",onChange:this.handleTitle,value:null===(e=this.state.task)||void 0===e?void 0:e.title,spellCheck:"false",onBlur:this.onSubmitForm}),Object(n.jsx)("div",{className:"task-details-close-btn close-btn flex align-center justify-center",children:Object(n.jsx)(ne.a,{onClick:this.onCloseModal})})]}),Object(n.jsxs)("p",{children:["in list ",Object(n.jsx)("span",{className:"details-list-name",children:null===m||void 0===m?void 0:m.title})]})]}),Object(n.jsx)("div",{className:"details-info",children:Object(n.jsx)(ca,Object(te.a)({board:i,list:m,task:f,togglePopover:this.togglePopover,currPopover:this.state.currPopover},this.props))}),Object(n.jsx)("div",{className:"details-description",children:Object(n.jsx)(da,{board:i,list:m,task:f,user:l})}),(null===(t=f.attachments)||void 0===t?void 0:t.length)?Object(n.jsx)("div",{className:"details-attachments",children:Object(n.jsx)(wa,Object(te.a)({board:i,list:m,task:f},this.props))}):"",Object(n.jsx)("div",{className:"details-checklist",children:Object(n.jsx)(va,{board:i,list:m,task:f,user:l})}),Object(n.jsx)("div",{className:"details-activity",children:Object(n.jsx)(ya,Object(te.a)({board:i,list:m,task:f},this.props))})]}),Object(n.jsx)("div",{className:"details-buttons",children:Object(n.jsx)("div",{className:"task-sidebar",children:Object(n.jsx)(Aa,Object(te.a)({board:i,list:m,task:f,togglePopover:this.togglePopover,currPopover:this.state.currPopover},this.props))})})]})})}):Object(n.jsx)("div",{children:"Loading details..."})}}]),a}(s.Component),Ma={updateBoard:Te,toggleTask:De,toggleOverlay:Be},Fa=Object(j.b)((function(e){return{isTaskOpen:e.boardReducer.isTaskOpen,board:e.boardReducer.currBoard,currListIdx:e.boardReducer.currListIdx,currTaskIdx:e.boardReducer.currTaskIdx,isOverlayOpen:e.boardReducer.isOverlayOpen,user:e.userReducer.user}}),Ma)(Object(l.f)(Ra)),_a=a(296),Ua=a.n(_a),Ha=function(){var e;return{setup:function(){e=Ua()("",{withCredentials:!0})},on:function(t,a){e.on(t,a)},off:function(t,a){e.off(t,a)},emit:function(t,a){e.emit(t,a)},terminate:function(){e=null},saveMsgsToStorage:function(e){H.store(qa,e)},getMsgsFromStorage:function(){return H.load(qa)}}}();window.socketService=Ha;var qa="msgDB";var Ga=a(92),Wa=a(571),Ka=a(576),za={getTasksPerPeopleData:function(e){var t=e.members.map((function(e){return e.fullname})),a=[];e.lists.forEach((function(e){a=[].concat(Object(U.a)(a),Object(U.a)(e.tasks))}));var n=a.reduce((function(e,a){var n;return(null===(n=a.members)||void 0===n?void 0:n.length)&&a.members.forEach((function(a){var n=t.indexOf(a.fullname);e[n]=e[n]?e[n]+1:1})),e}),[]);return{labels:t,tasksPerPerson:n,data:{labels:t,datasets:[{data:n,backgroundColor:["#FF6384","#36A2EB","#FFCE56"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56"]}]}}},getActivityPerDayData:function(e){for(var t=[],a=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date,s=Object(Wa.a)(n,a),r=0;r<6;r++)t[r]=Object(Ka.a)(s,"LLL")+" "+(s.getDate()-r);var o=e.activities.reduce((function(e,n){var s=Object(Wa.a)(new Date(n.createdAt),a),r=Object(Ka.a)(s,"LLL")+" "+s.getDate(),o=t.indexOf(r);return-1!==o&&(e[o]=e[o]?e[o]+1:1),e}),[]);return{labels:t,datasets:[{label:"Activity",data:o,barPercentage:.8,borderColor:["#FF6384","#36A2EB","#FFCE56","#c377e0","#FFCE56","#FFCE56","#FFCE56"],borderWidth:2,backgroundColor:["#FF638450","#36A2EB50","#FFCE5650","#c377e050","#FFCE56","#FFCE56","#FFCE56"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56","#c377e0","#FFCE56","#FFCE56","#FFCE56"]}]}},getTasksPerDayData:function(e){for(var t=[],a=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date,s=Object(Wa.a)(n,a),r=0;r<6;r++)t[r]=Object(Ka.a)(s,"LLL")+" "+(s.getDate()-r);var o=[];e.lists.forEach((function(e){o=[].concat(Object(U.a)(o),Object(U.a)(e.tasks))}));var c=o.reduce((function(e,n){var s=Object(Wa.a)(new Date(n.createdAt),a),r=Object(Ka.a)(s,"LLL")+" "+s.getDate(),o=t.indexOf(r);return-1!==o&&(e[o]=e[o]?e[o]+1:1),e}),[]);return{labels:t,datasets:[{label:"Tasks",data:c,barPercentage:.8,borderColor:["#FF6384","#36A2EB","#FFCE56","#FFCE56","#FFCE56","#FFCE56","#FFCE56"],borderWidth:2,backgroundColor:["#FF638450","#36A2EB50","#FFCE56","#FFCE56","#FFCE56","#FFCE56","#FFCE56"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56","#FFCE56","#FFCE56","#FFCE56","#FFCE56"]}]}}};var Va=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={data:{labels:["Adult Toys","Kid Toys","Yellow"],datasets:[{data:[300,50,100],backgroundColor:["#FF6384","#36A2EB","#FFCE56"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56"]}]}},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.board,t=za.getTasksPerPeopleData(e).data;return Object(n.jsxs)("div",{className:"tasks-per-person",children:[Object(n.jsx)("h3",{children:"Tasks per Person"}),Object(n.jsx)(Ga.Doughnut,{data:t,height:400})]})}}]),a}(s.Component),Ya=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={data:{}},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.board,t=za.getActivityPerDayData(e);return t?Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:"Activity per Day"}),Object(n.jsx)(Ga.Bar,{data:t,width:400,height:400})]}):Object(n.jsx)("h1",{children:"Loading"})}}]),a}(s.Component),Ja=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={data:{}},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.board,t=za.getTasksPerDayData(e);return Object(n.jsxs)("div",{className:"tasks-per-person",children:[Object(n.jsx)("h3",{children:"New Tasks per Day"}),Object(n.jsx)(Ga.Line,{data:t,height:400})]})}}]),a}(s.Component),Xa=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={},e.handleClickOutside=function(t){e.props.toggleDashboard(!1)},e}return Object(u.a)(a,[{key:"render",value:function(){this.props.board;return Object(n.jsxs)("div",{className:"dashboard flex space-between board-layout",children:[Object(n.jsx)(Va,Object(te.a)({},this.props)),Object(n.jsx)(Ya,Object(te.a)({},this.props)),Object(n.jsx)(Ja,Object(te.a)({},this.props))]})}}]),a}(s.Component),Za=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={isDashboardOpen:!1,isBoardClosed:!1},e.componentDidMount=Object(f.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params.boardId,Ha.setup(),Ha.emit("member connected",{userId:"123",boardId:a}),Ha.on("board updated fs",e.onBoardUpdated),t.next=6,e.props.setBoard(a);case 6:case"end":return t.stop()}}),t)}))),e.toggleDashboard=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!e.state.isDashboardOpen;e.setState({isDashboardOpen:t},(function(){e.state.isBoardClosed?e.setState({isBoardClosed:!1}):setTimeout((function(){e.setState({isBoardClosed:!0})}),1e3)}))},e.onBoardUpdated=function(){var t=Object(f.a)(m.a.mark((function t(a){var n,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.updatedBoard,a.activity,s=Object(te.a)({},n),t.next=4,e.props.updateBoard(s,null,!1);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(a,[{key:"componentWillUnmount",value:function(){var e=Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ha.off("board updated fs",this.onBoardUpdated),Ha.terminate(),t=this.props.setBoard,e.next=5,t(null);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params.boardId;e.match.params.boardId!==t&&this.props.setBoard(t)}},{key:"render",value:function(){var e=this.props,t=e.board,a=e.setCurrPopover,s=this.state,r=s.isDashboardOpen,o=s.isBoardClosed;return t?Object(n.jsxs)("div",{onClick:function(){a()},style:{paddingTop:"54px"},children:[Object(n.jsx)("div",{className:"main-bg",style:{backgroundImage:t.style.bg},onClick:function(e){e.stopPropagation()}}),Object(n.jsxs)("div",{className:"bg-overlay ",children:[Object(n.jsx)(na,Object(te.a)(Object(te.a)({},this.props),{},{className:r&&"dashboard-mode",isDashboardOpen:r,onToggleDashboard:this.toggleDashboard})),!o&&Object(n.jsx)(Ht,Object(te.a)(Object(te.a)({},this.props),{},{isDashboardOpen:r})),this.props.match.params.listId&&Object(n.jsx)(Fa,{})]}),Object(n.jsx)("div",{className:"dashboard-screen ".concat(r&&"slide-to-right"," ").concat(!r&&"hidden"),children:Object(n.jsx)(Xa,{board:t})})]}):Object(n.jsx)(ye,{})}}]),a}(s.Component),Qa={setBoard:function(e){return function(){var t=Object(f.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=5;break}n=null,t.next=8;break;case 5:return t.next=7,W.getById(e);case 7:n=t.sent;case 8:a({type:"SET_BOARD",board:n}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log("Couldnt get Board",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},updateBoard:Te,setCurrPopover:Dt,toggleOverlay:Be},$a=Object(j.b)((function(e){return{board:e.boardReducer.currBoard,isOverlayOpen:e.boardReducer.isOverlayOpen,currPopover:e.popoverReducer.currPopover,user:e.userReducer.user}}),Qa)(Za),en=a(297),tn=a.n(en),an=a(153),nn=function(e){var t=1e3*(e.tokenObj.expires_in||3300),a=function(){var n=Object(f.a)(m.a.mark((function n(){var s;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.reloadAuthResponse();case 2:s=n.sent,t=1e3*(s.expires_in||3300),console.log("newAuthRes:",s),localStorage.setItem("authToken",s.id_token),setTimeout(a,t);case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();setTimeout(a,t)},sn="996251564221-qedkti8vudlin8md60j8dllv408gqodo.apps.googleusercontent.com",rn=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={signupCred:{username:"",fullname:"",password:"",imgUrl:""},loginCred:{username:"",password:""},googleCreds:{},isNewUser:!0,msg:"",isUploading:!1,isGoogle:!1},e.onSuccessGoogleLogin=function(t){console.log(t.profileObj);var a=t.profileObj;e.setState({signupCred:{username:a.email,fullname:a.name,password:a.googleId,imgUrl:a.imageUrl},isGoogle:!0}),nn(t)},e.onFailureGoogleLogin=function(e){console.log("Login failed: res:",e)},e.onSubmit=function(){var t=Object(f.a)(m.a.mark((function t(a){var n,s,r,o,c,i,l;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),a.stopPropagation(),n=e.state,s=n.signupCred,r=n.loginCred,o=n.isNewUser,c=n.isGoogle,(i=o?s:r).password&&i.username){t.next=7;break}return e.setState({msg:"you need to fill all the feilds"}),t.abrupt("return");case 7:return t.prev=7,l=e.props.setUser,t.next=11,l(i,o,c);case 11:if(e.props.user){t.next=14;break}return t.abrupt("return");case 14:e.setState({msg:""}),e.props.history.push("/board"),t.next=23;break;case 18:t.prev=18,t.t0=t.catch(7),console.log("inside the catchhhhhhhhhhhhhhhhhhhhhhhhhh"),console.log(t.t0,"inside catch"),e.setState({msg:"somthing went worng!"});case 23:case"end":return t.stop()}}),t,null,[[7,18]])})));return function(e){return t.apply(this,arguments)}}(),e.handleInput=function(t){var a=t.target,n=a.value,s=a.name,r=e.state.isNewUser?"signupCred":"loginCred";e.setState((function(e){return Object(je.a)({},r,Object(te.a)(Object(te.a)({},e[r]),{},Object(je.a)({},s,n)))}))},e.toggleForms=function(t){t.preventDefault(),e.setState((function(e){return{isNewUser:!e.isNewUser,msg:""}}))},e.onUploadImg=function(){var t=Object(f.a)(m.a.mark((function t(a){var n,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isUploading:!0}),t.prev=1,t.next=4,Sa.uploadImg(a.target.files[0]);case 4:n=t.sent,s=n.secure_url,console.log("url:",s),e.setState({signupCred:Object(te.a)(Object(te.a)({},e.state.signupCred),{},{imgUrl:s}),isUploading:!1},console.log("imgUrl",e.state.signupCred)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),e.setState({msg:"Couldnt upload your image try again"}),console.log("problem loading the img ",t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}(),e.onLogout=Object(f.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.clearUser();case 2:e.setState({signupCred:{username:"",fullname:"",password:"",imgUrl:""},loginCred:{username:"",password:""},isNewUser:!0,msg:"",isUploading:!1,isGoogle:!1});case 3:case"end":return t.stop()}}),t)}))),e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribe=E.on("logout",(function(){e.onLogout()}))}},{key:"render",value:function(){var e=this.state,t=e.signupCred,a=e.loginCred,r=e.isNewUser,o=e.isUploading,c=e.msg,l=this.props.user;return Object(n.jsxs)(s.Fragment,{children:[Object(n.jsx)("div",{className:"login-bg-screen",children:" "}),Object(n.jsx)("div",{className:"login-container flex justify-center ",children:Object(n.jsxs)("div",{className:"login-signup-wrapper flex  ".concat(o&&"uploadStage"),children:[l&&Object(n.jsxs)("div",{className:"glass-form ",children:[Object(n.jsxs)("h2",{children:["Welcome ",l.fullname]}),Object(n.jsx)("div",{className:"avatar",style:{backgroundImage:"url(".concat(l.imgUrl,")")},children:" "}),Object(n.jsxs)("button",{className:"primary-btn",children:[" ",Object(n.jsx)(i.b,{to:"/board",children:" Start Now "})," "]}),Object(n.jsxs)("a",{onClick:this.onLogout,children:[" ",Object(n.jsx)(an.GoogleLogout,{clientId:sn,buttonText:"Logout",onLogoutSuccess:this.onLogout})]})]}),!l&&r&&Object(n.jsxs)("div",{children:[Object(n.jsxs)("form",{className:"glass-form",onSubmit:this.onSubmit,children:[Object(n.jsx)("h1",{children:"Sign Up"}),Object(n.jsxs)("label",{children:[" ",Object(n.jsxs)("div",{className:"avatar flex justify-center align-center",style:{backgroundImage:" url(".concat(t.imgUrl,")")},children:[" ",Object(n.jsx)(tn.a,{style:{color:" #dadbdb"},className:t.imgUrl&&"hidden"}),"  "]}),Object(n.jsx)("input",{onChange:this.onUploadImg,type:"file",hidden:!0})]}),Object(n.jsx)(an.GoogleLogin,{className:"with-btn",clientId:sn,buttonText:"Login with Google",onSuccess:this.onSuccessGoogleLogin,onFailure:this.onFailureGoogleLogin,cookiePolicy:"single_host_origin",isSignedIn:!0===l}),Object(n.jsx)("input",{type:"text",value:t.fullname,name:"fullname",placeholder:"Name",onChange:this.handleInput}),Object(n.jsx)("input",{type:"text",value:t.username,name:"username",placeholder:"Username",onChange:this.handleInput}),Object(n.jsx)("input",{type:"password",className:"password",value:t.password,name:"password",placeholder:"Password",onChange:this.handleInput})]}),Object(n.jsx)("span",{style:{display:"block"},children:c}),Object(n.jsx)("button",{className:"primary-btn",onClick:this.onSubmit,children:Object(n.jsx)(lt.a,{})}),Object(n.jsxs)("p",{children:["Already have an account? ",Object(n.jsx)("span",{onClick:this.toggleForms,children:"Sign In"})," "]})]}),!l&&!r&&Object(n.jsxs)("div",{children:[Object(n.jsxs)("form",{className:"glass-form  login",onSubmit:this.onSubmit,children:[Object(n.jsx)("h1",{children:"Log In"}),Object(n.jsx)("input",{type:"text",name:"username",value:a.username,placeholder:"Username",onChange:this.handleInput}),Object(n.jsx)("input",{type:"password",name:"password",value:a.password,placeholder:"Password",onChange:this.handleInput}),Object(n.jsx)("span",{style:{display:"block"},children:c}),Object(n.jsx)("button",{type:"submit",className:"primary-btn",onClick:this.onSubmit,children:Object(n.jsx)(lt.a,{})})]}),Object(n.jsxs)("p",{children:["Dont have an account? ",Object(n.jsx)("span",{onClick:this.toggleForms,children:"Sign Up"})," "]})]}),Object(n.jsx)("div",{className:"SVG"})]})})]})}}]),a}(s.Component),on={setUser:function(e,t,a){return function(){var n=Object(f.a)(m.a.mark((function n(s){var r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,console.log("from action",e),!t){n.next=8;break}return n.next=5,D.signup(e,a);case 5:r=n.sent,n.next=11;break;case 8:return n.next=10,D.login(e);case 10:r=n.sent;case 11:if(r){n.next=13;break}throw new Error("error");case 13:delete r.password,s({type:"SET_USER",loggedUser:r}),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(0),console.log("had problem seting the user",n.t0);case 21:case"end":return n.stop()}}),n,null,[[0,18]])})));return function(e){return n.apply(this,arguments)}}()},clearUser:L},cn=[{path:"/",component:_},{path:"/board/:boardId/:listId?/:taskId?",component:$a},{path:"/board",component:Ie},{path:"/login",component:Object(j.b)((function(e){return{user:e.userReducer.user}}),on)(rn)}];var ln=function(){return Object(n.jsxs)(i.a,{children:[Object(n.jsx)(F,{}),Object(n.jsx)("main",{className:"App",children:Object(n.jsx)(l.c,{children:cn.map((function(e){return Object(n.jsx)(l.a,{exact:!0,path:e.path,component:e.component},e.path)}))})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var dn=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,579)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,o=t.getTTFB;a(e),n(e),s(e),r(e),o(e)}))},un=(a(526),a(298)),pn=a(43),bn={currBoard:null,isTaskOpen:!1,currListIdx:null,currTaskIdx:null,isOverlayOpen:!1,isPopoverOpen:!1};var jn={user:null};var hn={currPopover:""};var mn=Object(pn.c)({boardReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOARD":return Object(te.a)(Object(te.a)({},e),{},{currBoard:t.board});case"TOGGLE_TASK":return Object(te.a)(Object(te.a)({},e),{},{isTaskOpen:!e.isTaskOpen});case"SET_CURR_LIST_AND_TASK":return Object(te.a)(Object(te.a)({},e),{},{currListIdx:t.listIdx,currTaskIdx:t.taskIdx});case"UPDATE_BOARD":return Object(te.a)(Object(te.a)({},e),{},{currBoard:t.updatedBoard});case"TOGGLE_OVERLAY":return Object(te.a)(Object(te.a)({},e),{},{isOverlayOpen:!e.isOverlayOpen});case"SET_POPOVER_STATUS":return Object(te.a)(Object(te.a)({},e),{},{isPopoverOpen:t.isPopover});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return Object(te.a)(Object(te.a)({},e),{},{user:t.loggedUser});case"CLEAR_USER":return Object(te.a)(Object(te.a)({},e),{},{user:null});default:return console.log("state"),e}},popoverReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURR_POPOVER":return Object(te.a)(Object(te.a)({},e),{},{currPopover:t.popover});default:return e}}}),fn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||pn.d,vn=Object(pn.e)(mn,fn(Object(pn.a)(un.a)));c.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(j.a,{store:vn,children:Object(n.jsx)(ln,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),dn()}},[[527,1,2]]]);
//# sourceMappingURL=main.3c7aca76.chunk.js.map