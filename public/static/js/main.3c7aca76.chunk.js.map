{"version":3,"sources":["services/httpService.js","services/userService.js","store/actions/userAction.js","services/eventBusService.js","cmps/AppHeader.jsx","pages/HomePage.jsx","services/storageService.js","services/utilService.js","services/boardService.js","cmps/PopoverHeader.jsx","cmps/BoardActions.jsx","cmps/BoardPreview.jsx","cmps/BoardList.jsx","services/styleService.js","cmps/LoadingSpinner.jsx","cmps/BoardMembersComposer.jsx","cmps/BoardComposer.jsx","pages/Boards.jsx","store/actions/boardActions.js","cmps/LabelsPopover.jsx","cmps/BoardMemberImg.jsx","cmps/ChangeMembersPopover.jsx","cmps/CopyTaskPopover.jsx","cmps/QuickEditButton.jsx","cmps/MUIDateTime.jsx","cmps/DateTimePopover.jsx","cmps/MoveTaskPopover.jsx","cmps/TaskEdit.jsx","cmps/TaskPreview.jsx","store/actions/popoverActions.js","cmps/ListActions.jsx","cmps/ListTitle.jsx","cmps/TaskComposer.jsx","cmps/TaskList.jsx","cmps/Board.jsx","cmps/BoardFilter.jsx","cmps/NotificationPopover.jsx","cmps/ActivityMenu.jsx","cmps/BoardHeader.jsx","cmps/TaskDetailsInfo.jsx","cmps/TaskDetailsDesc.jsx","cmps/TaskDetailsChecklist.jsx","cmps/TaskDetailsActivity.jsx","cmps/TaskDetailsAttachments.jsx","services/cloudinaryService.js","cmps/TaskSidebar.jsx","cmps/TaskDetails.jsx","services/socketService.js","services/dashboardService.js","cmps/Charts/TasksPerPerson.jsx","cmps/Charts/ActivityPerDay.jsx","cmps/Charts/TasksPerDay.jsx","cmps/Dashboard.jsx","pages/TrelloApp.jsx","services/googleService.js","pages/LoginSignup.jsx","routes.js","App.js","serviceWorkerRegistration.js","reportWebVitals.js","store/reducers/boardReducer.js","store/reducers/userReducer.js","store/reducers/popoverReducer.js","store/store.js","index.js"],"names":["BASE_URL","axios","Axios","create","withCredentials","httpService","endpoint","data","ajax","a","method","url","res","console","log","dir","response","status","window","location","assign","userService","getUsers","login","signup","filterUsersBy","users","user","password","username","loggedUser","isGoogle","value","regex","RegExp","filter","test","fullname","clearUser","dispatch","type","eventBusService","on","eventName","listener","callListener","detail","addEventListener","removeEventListener","emit","dispatchEvent","CustomEvent","_AppHeader","state","navBgc","document","scrollY","setState","currPath","this","props","history","pathname","className","to","substring","indexOf","onClick","logout","Component","mapDispatchToProps","AppHeader","connect","isOverlayOpen","boardReducer","userReducer","withRouter","HomePage","href","storageService","store","key","sessionStorage","JSON","stringify","load","defaultValue","parse","clear","saveToLocalStorage","localStorage","loadFromLocalStorage","utilService","delay","ms","Promise","resolve","setTimeout","getRandomInt","min","max","Math","ceil","floor","random","makeId","formatTime","timestamp","Date","toLocaleDateString","getRandomColor","color","i","formActivity","txt","task","id","createdAt","now","byMember","imgUrl","title","lightenColor","percent","num","parseInt","replace","amt","round","R","B","G","toString","slice","length","possible","charAt","boardService","query","getById","save","remove","getTaskById","getListIdxById","getTaskIdxById","getLabelIdxById","labelId","labels","findIndex","label","getListAndTaskIdxById","board","listId","taskId","list","lists","find","listIdx","taskIdx","getEmptyList","tasks","style","bgColor","getNotifications","NOTIFICATION_KEY","saveNotifications","notifications","getListByTaskId","some","boards","activity","_id","savedBoard","boardId","map","taskIds","forEach","push","PopoverHeader","setCurrPopover","_BoardActions","handleClickOutside","ev","toggleBoardActions","onEditBoard","onRemoveBoard","stopPropagation","BoardActions","onClickOutside","BoardPreview","isBoardActionsOpen","isBoardHovered","toggle","boardPreviewHandlers","onMouseEnter","onMouseLeave","onRemove","onEdit","backgroundImage","bg","BoardList","onToggleCompose","styleService","getBgOptions","LoadingSpinner","width","height","position","BoardMemberComposer","filterBy","filterMembers","target","usersToShow","isBoardMember","toggleMember","closeModal","placeholder","name","onChange","data-id","alt","src","_BoardComposer","isMembersPreviewOpen","newBoard","members","bgs","filterMembersBy","btnTxt","onAddBoard","preventDefault","loadBgs","handleInput","field","prevState","setBg","toggleMemberPreview","memberPreview","closeMembersPreview","member","unshift","copyBoard","prevProps","onSubmit","backgroundSize","autoComplete","BoardComposer","Boards","isComposerOpen","boardToEdit","loadBoards","newBoards","currBoard","lastState","editBoard","updateBoard","isEmitting","updatedBoard","toggleTask","err","toggleOverlay","_LabelsPopover","isPicked","elRefs","onToggleLabel","dataset","labelIdx","taskLabelIdx","splice","markExistingLabels","handleChange","labelsCopy","cloneDeep","onEnterPress","keyCode","shiftKey","boardCopy","labelsToAdd","onEditLabel","current","focus","setRefs","labelsIdsMap","taskLabel","includes","currLabel","refs","React","createRef","onMouseDown","onKeyDown","ref","backgroundColor","LabelsPopover","BoardMemberImg","size","toUpperCase","textSizeRatio","fgColor","ChangeMembersPopover","currTask","onUpdateTaskMember","membersRef","isTaskMember","onRemoveTaskMember","onAddTaskMember","clientWidth","classList","add","listAndTaskIdx","miniMember","memberIdx","currMember","boardMembers","CopyTaskPopover","selectedListIdx","onCopyClick","copyTask","FormControl","marginBottom","minWidth","Select","native","inputProps","QuickEditButton","isLabelsPopoverOpen","currPopover","Icon","data-for","useStyles","makeStyles","theme","container","display","flexWrap","textField","marginLeft","spacing","marginRight","DateAndTimePickers","classes","noValidate","TextField","format","InputLabelProps","shrink","DateTimePopover","classNames","onDateChange","onSaveDate","MoveTaskPopover","onMoveSaveClick","taskToMove","match","params","popovers","LabelIcon","ChangeMembersIcon","ArrowForwardIcon","FileCopyOutlinedIcon","ChangeDueDateIcon","TaskEdit","dueDate","isDone","dueDateHandlers","parsedString","parseISO","getTime","onRemoveTask","popover","_TaskPreview","isTaskHovered","isEditOpen","taskTitle","titleBeforeChange","unreadNotificationsCount","isLabelOpen","isManyMembers","onTaskUpdated","activityTxt","setDefaultTitle","onOpenDetails","setCurrListAndTaskIdx","taskPreviewHandlers","onToggleEdit","setListDnd","evt","onSaveTitle","toggleLabels","draggableId","index","isDragDisabled","provided","snapshot","draggableProps","dragHandleProps","innerRef","isDragging","attachments","html","disabled","doesContainIndics","description","checklists","taskDoneTodosLength","taskTodosLength","comments","reduce","acc","checklist","todos","doneTodos","checklistDoneTodos","todo","TaskPreview","isTaskOpen","_ListActions","listColors","onSetListColor","onToggleComposer","onRemoveList","ListActions","_ListTitle","isListActionsOpen","elListTitleRef","listTitleHandlers","onBlur","onFocus","borderRadius","editIconHandlers","onPressEnter","blur","onToggleListActions","ListTitle","_TaskComposer","onAddTask","titleRef","TaskComposer","TaskList","elTaskTitleRef","onEditTask","listTitleHandlersProps","setDragability","boolean","droppableId","droppableProps","flexGrow","minHeight","idx","_Board","listToAdd","addListHandlers","listToAddIdx","listColor","onDragEnd","destination","source","sourceListIdx","destinationListIdx","isDashboardOpen","isCurrPopover","direction","Board","popoverReducer","_BoardFilter","isOpen","toggleSearch","BoardFilter","NotificationPopover","onReadNotification","notificationId","notificationIdx","notification","ActivityMenu","activites","onOpenTask","activities","formatDistanceToNow","addSuffix","BoardHeader","currBadgeCount","incNotificationBadge","onToggleDashboard","_TaskDetailsInfo","isMemberModalOpen","onToggleMembersModal","onDateCheckChange","taskDueDate","checked","currPopver","togglePopover","currListIdx","currTaskIdx","formatRelative","TaskDetailsInfo","_TaskDetailsDesc","isTxtAreaOpen","toggleControls","closeInput","saveDescription","left","top","fontSize","fontWeight","spellCheck","rows","TaskDetailsDesc","_TaskDetailsChecklist","newTodo","newTodos","elTitleRef","checkListToUpdate","checklistsCopy","handleCheckbox","todoIdx","copyChecklists","onUpdateBoard","handleTodoChange","percentDone","handleNewTodo","checklistIdx","activityType","onRemoveTodo","todoToRemove","onAddItem","todoToAdd","onDeleteChecklist","padding","LinearProgressWithLabel","TaskDetailsChecklist","Box","alignItems","mr","LinearProgress","variant","Typography","root","_TaskDetailsActivity","isActivityOpen","comment","onToggleDetails","handleComment","saveComment","commentToAdd","onRemoveComment","commentIdx","taskComments","taskActivities","formatDistance","TaskDetailsActivity","TaskDetailsAttachments","onDeleteImg","imgIdx","taskImages","img","right","cloudinaryService","uploadImg","file","formData","FormData","append","TaskSidebar","taskImgUrl","onAddNewList","newChecklist","onUploadImg","files","secure_url","msg","cursor","hidden","_TaskDetails","isDetailsOpen","getDetails","handleTitle","onSubmitForm","getCurrTask","onCloseModal","onOverlayClick","details","currList","TaskDetails","socketService","socket","setup","io","cb","off","terminate","saveMsgsToStorage","msgs","MSG_STORAGE_KEY","getMsgsFromStorage","createSocketService","dashboardService","getTasksPerPeopleData","boardTasks","tasksPerPerson","currIdx","datasets","hoverBackgroundColor","getActivityPerDayData","timeZone","Intl","DateTimeFormat","resolvedOptions","date","zonedDate","utcToZonedTime","getDate","activityPerDay","zonedCreatedAt","formattedTime","barPercentage","borderColor","borderWidth","getTasksPerDayData","tasksPerDay","MyChart","ActivityPerDay","Dashboard","toggleDashboard","_TrelloApp","isBoardClosed","componentDidMount","userId","onBoardUpdated","setBoard","paddingTop","TrelloApp","refreshTokenSetup","refreshTiming","tokenObj","expires_in","refreshToken","reloadAuthResponse","newAuthRes","setItem","id_token","clientId","_LoginSignup","signupCred","loginCred","googleCreds","isNewUser","isUploading","onSuccessGoogleLogin","profileObj","email","googleId","imageUrl","onFailureGoogleLogin","userCreds","setUser","typeOfForm","toggleForms","onLogout","unsubscribe","buttonText","onLogoutSuccess","onSuccess","onFailure","cookiePolicy","isSignedIn","Error","routes","path","component","App","route","exact","Boolean","hostname","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","isPopoverOpen","rootReducer","combineReducers","action","isPopover","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","applyMiddleware","thunk","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.3c7aca76.chunk.js","sourcesContent":["import Axios from \"axios\";\n\nconst BASE_URL =\n  process.env.NODE_ENV === \"production\"\n    ? \"/api/\"\n    : \"http://localhost:3031/api/\";\n\nvar axios = Axios.create({\n  withCredentials: true,\n});\n\nexport const httpService = {\n  get(endpoint, data) {\n    return ajax(endpoint, \"GET\", data);\n  },\n  post(endpoint, data) {\n    return ajax(endpoint, \"POST\", data);\n  },\n  put(endpoint, data) {\n    return ajax(endpoint, \"PUT\", data);\n  },\n  delete(endpoint, data) {\n    return ajax(endpoint, \"DELETE\", data);\n  },\n};\n\nasync function ajax(endpoint, method = \"get\", data = null) {\n  try {\n    const res = await axios({\n      url: `${BASE_URL}${endpoint}`,\n      method,\n      data,\n    });\n    return res.data;\n  } catch (err) {\n    console.log(\n      `Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}`\n    );\n    console.dir(err);\n    if (err.response && err.response.status === 401) {\n      window.location.assign(\"/#/login\");\n    }\n    throw err;\n  }\n}\n","import { httpService } from \"./httpService\";\r\nconst endpoint = \"user\";\r\n\r\nexport const userService = {\r\n  getUsers,\r\n  login,\r\n  signup,\r\n  filterUsersBy,\r\n};\r\n\r\nasync function getUsers() {\r\n  const users = await httpService.get(endpoint);\r\n  return users;\r\n}\r\n\r\nasync function login(user) {\r\n  let loggedUser;\r\n  try {\r\n    loggedUser = await httpService.post(\r\n      `${endpoint}/login?password=${user.password}&username=${user.username}`\r\n    );\r\n    console.log(\"logged\", loggedUser);\r\n  } catch (err) {\r\n    console.log(\"couldnt find user\");\r\n  }\r\n  return loggedUser;\r\n}\r\n\r\nasync function signup(user, isGoogle) {\r\n  console.log(\"userrrr\", user);\r\n  try {\r\n    await httpService.post(`${endpoint}/signup`, { user, isGoogle });\r\n    return user;\r\n  } catch (err) {\r\n    console.log(\"problem signing in \", err);\r\n  }\r\n}\r\n\r\nasync function filterUsersBy(value) {\r\n  try {\r\n    var users = await httpService.get(endpoint);\r\n    const regex = new RegExp(value, \"i\");\r\n    users = users.filter(\r\n      (user) => regex.test(user.fullname) || regex.test(user.username)\r\n    );\r\n    console.log(\"filtered users:\", users);\r\n    return users;\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n}\r\n","import { userService } from \"../../services/userService\";\r\n\r\nexport function setUser(user, isNewUser, isGoogle) {\r\n  return async (dispatch) => {\r\n    let loggedUser;\r\n    try {\r\n      console.log(\"from action\", user);\r\n      if (isNewUser) loggedUser = await userService.signup(user, isGoogle);\r\n      else loggedUser = await userService.login(user);\r\n      if (!loggedUser) throw new Error(\"error\");\r\n      delete loggedUser.password;\r\n      const action = {\r\n        type: \"SET_USER\",\r\n        loggedUser,\r\n      };\r\n      dispatch(action);\r\n    } catch (err) {\r\n      console.log(\"had problem seting the user\", err);\r\n    }\r\n  };\r\n}\r\n\r\nexport function clearUser() {\r\n  return (dispatch) => {\r\n    const action = {\r\n      type: \"CLEAR_USER\",\r\n    };\r\n    dispatch(action);\r\n  };\r\n}\r\n","\r\nfunction on(eventName, listener) {\r\n\r\n    const callListener = ({ detail }) => {\r\n        listener(detail);\r\n    };\r\n    window.addEventListener(eventName, callListener);\r\n    \r\n    return () => {\r\n        window.removeEventListener(eventName, callListener);\r\n    };\r\n}\r\n\r\nfunction emit(eventName, data) {\r\n    window.dispatchEvent(new CustomEvent(eventName, { detail: data }));\r\n}\r\n\r\n\r\nexport const eventBusService = { on, emit };","import React, { Component } from 'react'\r\nimport { NavLink, withRouter } from 'react-router-dom'\r\nimport PersonRoundedIcon from '@material-ui/icons/PersonRounded';\r\nimport AppsIcon from '@material-ui/icons/Apps';\r\nimport { connect } from 'react-redux'\r\nimport { clearUser } from '../store/actions/userAction'\r\nimport { eventBusService } from '../services/eventBusService'\r\n\r\nexport class _AppHeader extends Component {\r\n    state = {\r\n        navBgc: ''\r\n    }\r\n\r\n    componentDidMount() {\r\n        document.addEventListener('scroll', () => {\r\n            if (window.scrollY > 100) {\r\n                this.setState({ navBgc: 'colored-nav' })\r\n            } else {\r\n                this.setState({ navBgc: 'homepage-nav' })\r\n            }\r\n        })\r\n    }\r\n\r\n    logout() {\r\n        eventBusService.emit('logout')\r\n    }\r\n\r\n    render() {\r\n        const currPath = this.props.history.location.pathname\r\n        const { navBgc } = this.state\r\n        const { user } = this.props\r\n        console.log('user from header:', user);\r\n        return (\r\n            <header className={`main-nav-header flex align-center  ${currPath === '/' ? navBgc : ''} ${currPath === '/login' || currPath === '/board' ? \"homepage-nav\" : \"\"}`}>\r\n                <ul className=\"main-nav  flex clear-list flex \">\r\n                    <li className=\"logo\"><NavLink to=\"/\"><span>Chello</span></NavLink></li>\r\n                    {user && <li className=\"user-desc flex align-center\"> Hello, {user.fullname.substring(0, user.fullname.indexOf(' '))} </li>}\r\n                    <li><NavLink to=\"/board\"><span>Boards</span></NavLink></li>\r\n                    {!user && <li><NavLink to=\"/login\"><span >Login</span></NavLink></li>}\r\n                    {user && <li className=\"logout flex align-center\" onClick={this.logout} > Logout </li>}\r\n                </ul>\r\n            </header>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        isOverlayOpen: state.boardReducer.isOverlayOpen,\r\n        user: state.userReducer.user\r\n\r\n    }\r\n}\r\n\r\n\r\nconst mapDispatchToProps = {\r\n    clearUser\r\n}\r\n\r\n\r\n\r\n\r\nexport const AppHeader = connect(mapStateToProps, mapDispatchToProps)(withRouter(_AppHeader))","import React, { Component } from 'react'\r\n\r\nexport class HomePage extends Component {\r\n\r\n    render() {\r\n        return (\r\n            <main className=\"home-page\">\r\n                <section className=\"homepage-fold\">\r\n                    <div className=\"homepage-heading flex column  justify-center align-center\">\r\n                        <h1>Chello</h1>\r\n                        <h2>Task Managment,</h2>\r\n                        <h2>The <span>Clever</span> Way.</h2>\r\n                        <a href=\"/board/600c504bd8ab8f77385f28c6\" className=\"cta-btn primary-btn\">Start Now</a>\r\n                    </div>\r\n                    <div className=\"homepage-image\">\r\n                    </div>\r\n                </section>\r\n\r\n                <section className=\"features  \">\r\n                    <div className=\"features-feature-1\">\r\n                        <div className=\"feature-1-bg\"></div>\r\n                        <div className=\"feature-1-txt flex column justify-center\">\r\n                            <h3>All the tools your team needs</h3>\r\n                            <span>Organize and assign tasks.</span>\r\n                            <span>With lists, teams see immediately what they need to do,</span>\r\n                            <span>which tasks are a priority, and when work is due.</span>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"features-feature-2\">\r\n                        <div className=\"feature-2-txt flex column justify-center\">\r\n                            <h3>Manage your time wisely</h3>\r\n                            <span>Instantly see which projects are on track,</span>\r\n                            <span>which ones are falling behind,</span>\r\n                            <span>and what every team member is working on at a glance.</span>\r\n                        </div>\r\n                        <div className=\"feature-2-bg\"></div>\r\n                    </div>\r\n                    <div className=\"features-feature-3\">\r\n                        <div className=\"feature-3-bg\"></div>\r\n                        <div className=\"feature-3-txt flex column justify-center\">\r\n                            <h3>Organize anything</h3>\r\n                            <h3>with anyone, anywhere</h3>\r\n                            <span>Bring your teams work together in one shared space.</span>\r\n                            <span>Choose the project view that suits your style, and collaborate no matter where you are.</span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <section className=\"bottom-cta flex justify-center\">\r\n                        <a href=\"/board/600c504bd8ab8f77385f28c6\">\r\n                            <span></span>\r\n                            <span></span>\r\n                            <span></span>\r\n                            <span></span>\r\n                            Get Started</a>\r\n                    </section>\r\n                </section>\r\n                <footer className=\"flex align-center justify-center\">\r\n                    <p> 2021 Chello | Reem Ben David | <a href=\"https://www.linkedin.com/in/yehonathan-segev-743a431a5/\">Yehonathan Segev</a> | Nofar Yunger</p>\r\n                </footer>\r\n            </main>\r\n        )\r\n    }\r\n}\r\n","export const storageService = {\r\n    store,\r\n    load,\r\n    clear,\r\n    saveToLocalStorage,\r\n    loadFromLocalStorage\r\n}\r\n\r\n\r\nfunction clear() {\r\n    sessionStorage.clear();\r\n}\r\n\r\nfunction store(key, value) {\r\n    sessionStorage[key] = JSON.stringify(value);\r\n}\r\n\r\nfunction load(key, defaultValue = null) {\r\n    var value = sessionStorage[key];\r\n    if (!value) return defaultValue\r\n    else return JSON.parse(value);\r\n}\r\nfunction saveToLocalStorage(key, value) {\r\n    localStorage[key] = JSON.stringify(value);\r\n}\r\n\r\nfunction loadFromLocalStorage(key, defaultValue = null) {\r\n    var value = localStorage[key];\r\n    if (!value) return defaultValue\r\n    else return JSON.parse(value);\r\n}\r\n\r\n","\r\nexport const utilService = {\r\n    delay,\r\n    getRandomInt,\r\n    makeId,\r\n    formatTime,\r\n    getRandomColor,\r\n    formActivity,\r\n    lightenColor\r\n}\r\n\r\nfunction delay(ms = 1500) {\r\n    return new Promise(resolve => {\r\n        setTimeout(resolve, ms)\r\n    })\r\n}\r\n\r\nfunction getRandomInt(min, max) {\r\n    min = Math.ceil(min);\r\n    max = Math.floor(max);\r\n    return Math.floor(Math.random() * (max - min) + min); //The maximum is exclusive and the minimum is inclusive\r\n}\r\n\r\nfunction makeId(length = 5) {\r\n    var txt = '';\r\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    for (var i = 0; i < length; i++) {\r\n        txt += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n    return txt;\r\n}\r\n\r\nfunction formActivity({ user, txt, task = null }) {\r\n    return {\r\n        id: makeId(),\r\n        createdAt: Date.now(),\r\n        txt,\r\n        byMember: { imgUrl: user?.imgUrl, fullname: user?.fullname || 'Guest' },\r\n        task: task ? { id: task.id, title: task.title } : null\r\n    }\r\n}\r\nfunction formatTime(timestamp) {\r\n    const date = new Date(timestamp).toLocaleDateString();\r\n    return date;\r\n}\r\n\r\nfunction getRandomColor() {\r\n    var letters = '0123456789ABCDEF';\r\n    var color = '#';\r\n    for (var i = 0; i < 6; i++) {\r\n        color += letters[Math.floor(Math.random() * 16)];\r\n    }\r\n    return color;\r\n}\r\nfunction lightenColor(color, percent) {\r\n    var num = parseInt(color.replace(\"#\",\"\"), 16),\r\n      amt = Math.round(2.55 * percent),\r\n      R = (num >> 16) + amt,\r\n      B = (num >> 8 & 0x00FF) + amt,\r\n      G = (num & 0x0000FF) + amt;\r\n\r\n      return (0x1000000 + (R<255?R<1?0:R:255)*0x10000 + (B<255?B<1?0:B:255)*0x100 + (G<255?G<1?0:G:255)).toString(16).slice(1);\r\n};","import { httpService } from './httpService'\r\nimport { storageService } from './storageService'\r\nimport { utilService } from './utilService'\r\n\r\n\r\nexport const boardService = {\r\n    query,\r\n    getById,\r\n    save,\r\n    remove,\r\n    getTaskById,\r\n    getListIdxById,\r\n    getTaskIdxById,\r\n    getLabelIdxById,\r\n    getListAndTaskIdxById,\r\n    getEmptyList,\r\n    getNotifications,\r\n    saveNotifications,\r\n    getListByTaskId\r\n}\r\n\r\nconst endpoint = 'board'\r\nconst NOTIFICATION_KEY = 'notificationDB'\r\n\r\nasync function query() {\r\n    const boards = await httpService.get(endpoint)\r\n    return boards\r\n}\r\n\r\n//UPDATES ENTIRE BOARD FOR ANY CHANGE INSIDE THE BOARD\r\nasync function save(board, activity = null) {\r\n    var savedBoard;\r\n\r\n    if (!board._id) {\r\n        savedBoard = await httpService.post(endpoint, board)\r\n    } else {\r\n        savedBoard = await httpService.put(`${endpoint}/${board._id}`, { board, activity })\r\n    }\r\n\r\n    return savedBoard\r\n}\r\n\r\n//ONLY FOR REMOVAL OF ENTIRE BOARD\r\nasync function remove(boardId) {\r\n    await httpService.delete(`${endpoint}/${boardId}`)\r\n}\r\n\r\nasync function getById(boardId) {\r\n    const board = await httpService.get(`${endpoint}/${boardId}`)\r\n    return board\r\n}\r\n\r\n\r\n\r\n\r\n// REFACTOR TO SYNCHRONOUS\r\nasync function getTaskById(boardId, taskId) {\r\n    const board = await getById(boardId)\r\n    let tasks = board.lists.map(list => list.tasks)\r\n    const taskIds = []\r\n    tasks.forEach(task => {\r\n        taskIds.push(...task)\r\n    })\r\n    const task = taskIds.find(task => task.id === taskId)\r\n    return task\r\n}\r\n\r\nfunction getTaskIdxById(list, taskId) {\r\n    const taskIdx = list.tasks.findIndex(task => task.id === taskId)\r\n    return taskIdx\r\n}\r\n\r\nfunction getListIdxById(board, listId) {\r\n    const listIdx = board.lists.findIndex(list => list.id === listId)\r\n    return listIdx\r\n}\r\n\r\nfunction getListByTaskId(board, taskId) {\r\n    const list = board.lists.find(list => {\r\n        return list.tasks.some(task => task.id === taskId)\r\n    })\r\n    return list\r\n}\r\nfunction getListAndTaskIdxById(board, listId, taskId) {\r\n    const list = board.lists.find(list => list.id === listId)\r\n    const listIdx = getListIdxById(board, listId)\r\n    const taskIdx = getTaskIdxById(list, taskId)\r\n    return { listIdx, taskIdx }\r\n}\r\n\r\nfunction getLabelById(task, id) {\r\n    const label = task.labels.map(label => label.id === id)\r\n}\r\n\r\nfunction getLabelIdxById(task, labelId) {\r\n    const labelIdx = task.labels.findIndex(label => label.id === labelId)\r\n    return labelIdx\r\n}\r\n\r\nfunction getEmptyList() {\r\n    return {\r\n        id: 'k23eps34fc',\r\n        title: '',\r\n        tasks: [],\r\n        style: {\r\n            title: { bgColor: '#3cc2e0' }\r\n        }\r\n    }\r\n}\r\n\r\nfunction getNotifications() {\r\n    return storageService.loadFromLocalStorage(NOTIFICATION_KEY) || [\r\n        {\r\n            id: 'i101',\r\n            txt: 'Yoni added you to task i101'\r\n        },\r\n        {\r\n            id: 'i102',\r\n            txt: 'Nofar broke the server'\r\n        },\r\n        {\r\n            id: 'i103',\r\n            txt: 'Its time for shnatz'\r\n        },\r\n        {\r\n            id: 'i104',\r\n            txt: 'Guest has joined the board'\r\n        }\r\n    ]\r\n}\r\n\r\nfunction saveNotifications(notifications) {\r\n    storageService.saveToLocalStorage(NOTIFICATION_KEY, notifications)\r\n}","import CloseIcon from '@material-ui/icons/Close';\r\n\r\nexport function PopoverHeader({ title, setCurrPopover, className }) {\r\n\r\n    return <div className={`popover-header flex align-center justify-center ${className && className}`}>\r\n        <span className=\"popover-header-title\">{title}</span>\r\n        <CloseIcon className=\"close-icon\" onClick={setCurrPopover} />\r\n    </div>\r\n}","import { PopoverHeader } from './PopoverHeader'\r\nimport onClickOutside from 'react-onclickoutside'\r\nimport { Component } from 'react'\r\n\r\n class _BoardActions extends Component {\r\n \r\n    handleClickOutside = ev => {\r\n        this.props.toggleBoardActions(false)\r\n    }\r\n\r\n    render() {\r\n        const { board, onEditBoard, onRemoveBoard, toggleBoardActions } = this.props\r\n        return (\r\n            <div className=\"board-actions-popover\" onClick={(ev) => ev.stopPropagation()}>\r\n                <PopoverHeader title='Board Actions' setCurrPopover={(ev) => {\r\n                    ev.stopPropagation()\r\n                    toggleBoardActions()\r\n                }} />\r\n                <section className=\"popover-section\">\r\n                    <ul className=\"popover-section-list clear-list\">\r\n                        <li className=\"add-task popover-section-list-item\" onClick={(ev) => {\r\n                            toggleBoardActions()\r\n                            onEditBoard(board)\r\n                        }}>Edit board...</li>\r\n                        <li className=\"remove-list popover-section-list-item\" onClick={(ev) => {\r\n                            toggleBoardActions()\r\n                            onRemoveBoard(board._id)\r\n                        }}>Remove board...</li>\r\n                    </ul>\r\n                </section>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport const BoardActions = onClickOutside(_BoardActions)","import React, { Component } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { BoardActions } from './BoardActions'\r\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\r\n\r\nexport class BoardPreview extends Component {\r\n\r\n    state = {\r\n        isBoardActionsOpen: false,\r\n        isBoardHovered: false\r\n    }\r\n    toggleBoardActions = (toggle = !this.state.isBoardActionsOpen) => {\r\n        this.setState({ isBoardActionsOpen: toggle })\r\n    }\r\n\r\n    boardPreviewHandlers = {\r\n        onMouseEnter: () => {\r\n            this.setState({ isBoardHovered: true })\r\n        },\r\n        onMouseLeave: () => {\r\n            this.setState({ isBoardHovered: false })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { board, onRemove, onEdit } = this.props\r\n        return (\r\n            <div {...this.boardPreviewHandlers}\r\n                className={`board-card flex flex justify-center align-center ${this.state.isBoardActionsOpen && 'board-actions-open'}`} style={{ backgroundImage: board.style.bg }} >\r\n                <Link to={`/board/${board._id}`}><h1>{board.title}</h1></Link>\r\n                <div className=\"card-overlay\"></div>\r\n                <div className=\"board-actions-popover-wrapper\">\r\n                    {this.state.isBoardHovered && <MoreHorizIcon className={`toggle-actions-icon`} onClick={this.toggleBoardActions} />}\r\n                    {this.state.isBoardActionsOpen &&\r\n                        <BoardActions\r\n                            board={board}\r\n                            onRemoveBoard={onRemove}\r\n                            onEditBoard={onEdit}\r\n                            {...this.props}\r\n                            toggleBoardActions={this.toggleBoardActions} />}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { BoardPreview } from './BoardPreview'\r\nimport AddIcon from '@material-ui/icons/Add';\r\n\r\nexport class BoardList extends Component {\r\n    render() {\r\n        const { boards, onRemove, onEdit, onToggleCompose } = this.props\r\n        return (\r\n            <div className=\"board-box board-layout\">\r\n                {boards.map(board => <BoardPreview key={board._id} onRemove={onRemove} board={board} onEdit={onEdit} />)}\r\n                <div className=\"board-card flex flex justify-center align-center add-board\" onClick={onToggleCompose}>\r\n                    <AddIcon className=\"add-board-icon\" /><div className=\"add-board-txt\">New</div></div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import { httpService } from \"./httpService\"\r\n\r\n\r\nexport const styleService = {\r\n\r\n    getBgOptions,\r\n    // letterAvatar\r\n}\r\n\r\n\r\nasync function getBgOptions() {\r\n\r\n    return [\r\n        \"url('https://res.cloudinary.com/nofar/image/upload/v1611088348/trello%20background/pexels-photo-3769139_szaes1.jpg')\",\r\n        \"url('https://res.cloudinary.com/nofar/image/upload/v1611088331/trello%20background/pexels-photo-2310885_zczpxr.jpg')\",\r\n        \"url('https://res.cloudinary.com/nofar/image/upload/v1611088313/trello%20background/pexels-photo-266451_cyv6ux.jpg')\",\r\n        \"url('https://res.cloudinary.com/nofar/image/upload/v1611088301/trello%20background/pexels-photo-417173_oq55fd.jpg')\",\r\n        \"url('https://res.cloudinary.com/nofar/image/upload/v1611088285/trello%20background/pexels-photo-326055_bxexhu.jpg')\",\r\n        \"url('https://res.cloudinary.com/nofar/image/upload/v1611088271/trello%20background/pexels-photo-39811_mauelm.jpg')\",\r\n        \"url('https://res.cloudinary.com/nofar/image/upload/v1611088256/trello%20background/pexels-photo-934718_xv1kkf.jpg')\",\r\n        \"url('https://res.cloudinary.com/nofar/image/upload/v1611088244/trello%20background/pexels-photo-2246476_xueoqq.jpg')\",\r\n        \"url('https://res.cloudinary.com/nofar/image/upload/v1611088228/trello%20background/pexels-photo-4101555_svdfsl.jpg')\",\r\n        \"url('https://res.cloudinary.com/nofar/image/upload/v1611088214/trello%20background/pexels-photo-1591305_ui4iai.jpg')\",\r\n        \"url('https://res.cloudinary.com/nofar/image/upload/v1611059426/photo-1610377551984-9dc3f82aa31f_wuk20y.jpg')\",\r\n        \"url('https://res.cloudinary.com/nofar/image/upload/v1611328219/photo-1610720684893-619cd7a5cde5_zqn2tf.jpg')\",\r\n\r\n    ]\r\n}\r\n\r\n\r\n//  function letterAvatar(name, size) {\r\n\r\n//     name = name || '';\r\n//     size = size || 60;\r\n\r\n//     var colours = [\r\n//         \"#1abc9c\", \"#2ecc71\", \"#3498db\", \"#9b59b6\", \"#34495e\", \"#16a085\", \"#27ae60\", \"#2980b9\", \"#8e44ad\", \"#2c3e50\",\r\n//         \"#f1c40f\", \"#e67e22\", \"#e74c3c\", \"#ecf0f1\", \"#95a5a6\", \"#f39c12\", \"#d35400\", \"#c0392b\", \"#bdc3c7\", \"#7f8c8d\"\r\n//     ],\r\n\r\n//         nameSplit = String(name).toUpperCase().split(' '),\r\n//         initials, charIndex, colourIndex, canvas, context, dataURI;\r\n\r\n\r\n//     if (nameSplit.length === 1) {\r\n//         initials = nameSplit[0] ? nameSplit[0].charAt(0) : '?';\r\n//     } else {\r\n//         initials = nameSplit[0].charAt(0) + nameSplit[1].charAt(0);\r\n//     }\r\n\r\n\r\n//     charIndex = (initials === '?' ? 72 : initials.charCodeAt(0)) - 64;\r\n//     colourIndex = charIndex % 20;\r\n//     canvas = d.createElement('canvas');\r\n//     canvas.width = size;\r\n//     canvas.height = size;\r\n//     context = canvas.getContext(\"2d\");\r\n\r\n//     context.fillStyle = colours[colourIndex - 1];\r\n//     context.fillRect(0, 0, canvas.width, canvas.height);\r\n//     context.font = Math.round(canvas.width / 2) + \"px Arial\";\r\n//     context.textAlign = \"center\";\r\n//     context.fillStyle = \"#FFF\";\r\n//     context.fillText(initials, size / 2, size / 1.5);\r\n\r\n//     dataURI = canvas.toDataURL();\r\n//     canvas = null;\r\n\r\n//     return dataURI;\r\n// }\r\n","import React from \"react\";\r\nimport { usePromiseTracker } from \"react-promise-tracker\";\r\nimport Loader from \"react-loader-spinner\";\r\n\r\nexport function LoadingSpinner(props) {\r\n    // const { promiseInProgress } = usePromiseTracker();\r\n\r\n    return (\r\n        // promiseInProgress && (\r\n            <div className=\"spinner flex justify-center align-center column\" style={{width:\"100%\",height:\"100%\",position:\"fixed\"  }}>\r\n               {/* <h1>Loading...</h1> */}\r\n                <Loader type=\"ThreeDots\" color=\"#6c63ff\" height=\"100\" width=\"100\" />\r\n            </div>\r\n        // )\r\n    );\r\n};          \r\n\r\n","import React, { Component } from 'react'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport DoneIcon from '@material-ui/icons/Done';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport { userService } from '../services/userService';\r\nimport { LoadingSpinner } from './LoadingSpinner';\r\n\r\nexport class BoardMemberComposer extends Component {\r\n    state = {\r\n        users: [],\r\n        filterBy: ''\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getUsers()\r\n    }\r\n\r\n\r\n    filterMembers = ({ target }) => {\r\n        const value = target.value\r\n        this.setState({ filterBy: value }, () => this.getUsers())\r\n\r\n    }\r\n\r\n\r\n    getUsers = async () => {\r\n        const { filterBy } = this.state\r\n        const usersToShow = await userService.filterUsersBy(filterBy)\r\n        this.setState({ users: usersToShow })\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        const { isBoardMember, toggleMember, closeModal } = this.props\r\n        const { users } = this.state\r\n        if (!users) return <LoadingSpinner/>\r\n        return (\r\n            <div className=\"change-members-popover boards \" onClick={(ev) => { ev.stopPropagation() }}>\r\n                <div className=\"popover-header boards flex align-center justify-center\">\r\n                    <span className=\"popover-header-title\"> <input type=\"text\" placeholder=\"Add Members\" name=\"filterBy\" value={this.state.filterMembers} onChange={this.filterMembers} /></span>\r\n                    <CloseIcon className=\"close-icon\" onClick={() => closeModal()} />\r\n                </div>\r\n                <section className=\"popover-section\">\r\n                    <ul className=\"popover-section-list clear-list\">\r\n                        <h3 className=\"popover-section-header \">Board members</h3>\r\n                        {users.map(user => {\r\n                            return <li key={user._id} data-id={user._id} onClick={() => toggleMember(user)} style={{ height: '60px' }} className={`popover-section-list-item flex align-center ${isBoardMember(user._id) && 'picked'}`}>\r\n                                {isBoardMember(user._id) ? <DoneIcon /> : <AddIcon />}\r\n                                <img className=\"avatarPic\" alt=\"avatar picture\" src={user.imgUrl} />\r\n                                <span data-id={user._id}>{user.fullname} </span>\r\n\r\n                            </li>\r\n                        })}\r\n                    </ul>\r\n                </section>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n","import { Component } from 'react'\r\nimport React, { Fragment } from 'react'\r\nimport { boardService } from '../services/boardService.js'\r\nimport { userService } from '../services/userService.js'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { utilService } from '../services/utilService.js'\r\nimport { styleService } from '../services/styleService.js'\r\nimport GroupAddIcon from '@material-ui/icons/GroupAdd';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { BoardMemberComposer } from './BoardMembersComposer.jsx'\r\n\r\nexport class _BoardComposer extends Component {\r\n\r\n    state = {\r\n        isMembersPreviewOpen: false,\r\n        newBoard: {\r\n            title: '',\r\n            members: [],\r\n            style: {\r\n                bg: '#3d3d3d'\r\n            }\r\n\r\n        },\r\n        users: [],\r\n        bgs: [],\r\n        filterMembersBy: '',\r\n        btnTxt: 'Create Board'\r\n    }\r\n\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { board } = this.props\r\n        if (prevProps.board === this.props.board) return\r\n        if (this.props.board) {\r\n            this.setState({\r\n                newBoard: {\r\n                    title: board.title,\r\n                    style: {\r\n                        bg: board.style.bg\r\n                    },\r\n                    members: board.members,\r\n                    _id: board._id\r\n                },\r\n                btnTxt: 'Update Board'\r\n            })\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getUsers()\r\n        this.loadBgs()\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.setState({\r\n            isMembersPreviewOpen: false,\r\n            newBoard: {\r\n                title: '',\r\n                members: [],\r\n                style: {\r\n                    bg: '#3d3d3d'\r\n                }\r\n\r\n            },\r\n            users: [],\r\n            bgs: [],\r\n            filterMembersBy: '',\r\n            btnTxt: 'Create Board'\r\n        })\r\n    }\r\n\r\n    onAddBoard = async (ev) => {\r\n        ev.preventDefault()\r\n        var { newBoard } = this.state\r\n        if (newBoard._id) {\r\n            newBoard = { ...this.props.board, ...newBoard }\r\n        }\r\n\r\n        const savedBoard = await boardService.save(newBoard)//add a new board to data\r\n        this.props.history.push(`/board/${savedBoard._id}`)//then gos to the board page\r\n    }\r\n\r\n\r\n\r\n    //gets all the bg style options from the service\r\n    loadBgs = async () => {\r\n        const bgs = await styleService.getBgOptions()\r\n        this.setState({ bgs })\r\n    }\r\n\r\n\r\n    //gets the filterd users from the data\r\n    getUsers = async () => {\r\n        const { filterMembersBy } = this.state\r\n        const usersToShow = await userService.filterUsersBy(filterMembersBy)\r\n        this.setState({ users: usersToShow })\r\n    }\r\n\r\n\r\n    handleInput = ({ target }) => {\r\n        const value = target.value\r\n        const field = target.name\r\n        this.setState(prevState => {\r\n            return {\r\n                newBoard: {\r\n                    ...prevState.newBoard,\r\n                    [field]: value\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    setBg = (bg) => {\r\n        this.setState({\r\n            newBoard: {\r\n                ...this.state.newBoard,\r\n                style: { ...this.state.newBoard.style, bg }\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    toggleMemberPreview = () => {\r\n        const memberPreview = this.state.isMembersPreviewOpen\r\n        this.setState({ isMembersPreviewOpen: !memberPreview })\r\n    }\r\n\r\n\r\n    closeMembersPreview = () => {\r\n        this.setState({ isMembersPreviewOpen: false })\r\n    }\r\n\r\n\r\n    isBoardMember = (id) => {\r\n        const { members } = this.state.newBoard\r\n        return members?.some(member => member._id === id)\r\n    }\r\n\r\n\r\n\r\n    toggleMember = (user) => {\r\n        let { members } = { ...this.state.newBoard }\r\n        const isMember = this.isBoardMember(user._id)\r\n\r\n        if (isMember) {//if the member is part of the board remove it\r\n            members = members.filter(member => member._id !== user._id)\r\n        } else { //else put it in\r\n            members.unshift(user)\r\n        }\r\n\r\n        const copyBoard = { ...this.state.newBoard }\r\n        copyBoard.members = members\r\n        this.setState({ newBoard: copyBoard })\r\n    }\r\n\r\n\r\n    render() {\r\n        const { bgs, newBoard, isMembersPreviewOpen, btnTxt } = this.state\r\n        const { onToggleCompose } = this.props\r\n        return (\r\n            <Fragment>\r\n\r\n                <form className=\"board-composer board-composer-layout flex column\" onClick={(ev) => ev.stopPropagation()} onSubmit={this.onAddBoard} >\r\n                    <div className=\"close-btn flex align-center justify-center\">\r\n                        <CloseIcon onClick={onToggleCompose} />\r\n                    </div>\r\n                    <div className=\"flex justify-center align-center board-details-wrapper\">\r\n\r\n                        <div className=\"demo-board board-card  flex justify-center align-center\" style={{ backgroundImage: newBoard.style.bg, backgroundSize: \"cover\" }}>\r\n                            <textarea className=\"title\" onChange={this.handleInput} placeholder=\"Enter Board Title \" name=\"title\" autoComplete=\"off\" value={newBoard.title} />\r\n                        </div>\r\n                        <span className=\"edit-board-members\">\r\n                            <GroupAddIcon className=\"addIcon\" onClick={this.toggleMemberPreview} />\r\n                            {isMembersPreviewOpen && <BoardMemberComposer isBoardMember={this.isBoardMember} toggleMember={this.toggleMember} closeModal={this.closeMembersPreview} />}\r\n                        </span>\r\n                    </div>\r\n\r\n                    <div className=\"bg-options\">\r\n                        {bgs.map(bg => {\r\n                            return <div className=\"bg-preview\" key={utilService.makeId()} onClick={() => this.setBg(bg)} style={{ backgroundImage: bg, backgroundSize: \"cover\" }}> </div>\r\n                        })}\r\n                    </div>\r\n\r\n\r\n                    <button className=\"primary-btn compose-board-btn\">{btnTxt}</button>\r\n                </form>\r\n            </Fragment >\r\n        )\r\n    }\r\n}\r\n\r\nexport const BoardComposer = withRouter(_BoardComposer)\r\n","import React, { Component, Fragment } from 'react'\r\nimport { boardService } from '../services/boardService.js'\r\nimport { BoardList } from '../cmps/BoardList'\r\nimport { BoardComposer } from '../cmps/BoardComposer.jsx'\r\nimport { LoadingSpinner } from '../cmps/LoadingSpinner.jsx'\r\n\r\nexport class Boards extends Component {\r\n\r\n    state = {\r\n        boards: [],\r\n        isComposerOpen: false,\r\n        boardToEdit: null\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.loadBoards()\r\n    }\r\n\r\n    loadBoards = async () => {\r\n        const boards = await boardService.query()\r\n        this.setState({ boards })\r\n    }\r\n\r\n\r\n    onRemove = async (boardId) => {\r\n        await boardService.remove(boardId)\r\n        let boards = this.state.boards\r\n        const newBoards = boards.filter(currBoard => currBoard._id !== boardId)\r\n        this.setState({ boards: newBoards })\r\n    }\r\n\r\n    onToggleCompose = () => {\r\n        const lastState = this.state.isComposerOpen\r\n        this.setState({ isComposerOpen: !lastState })//opens the add board form\r\n    }\r\n\r\n    editBoard = (board) => {\r\n        this.setState({ isComposerOpen: true, boardToEdit: board })\r\n    }\r\n\r\n    render() {\r\n\r\n        const { boards, isComposerOpen, boardToEdit } = this.state\r\n        if (!boards) return <LoadingSpinner />\r\n        return (\r\n            <Fragment>\r\n\r\n                <div className=\"glass-screen \"></div>\r\n                <div className=\"boards-bg \"></div>\r\n                <div className=\"board-page-container flex\">\r\n                    <div className=\"boards-page bg-overlay main-layout flex column board-layout\">\r\n                        <section className=\"user-boards-section\">\r\n                            <div className=\"user-boards-title\">Your Boards</div>\r\n                            <BoardList boards={boards} onRemove={this.onRemove} onEdit={this.editBoard} onToggleCompose={this.onToggleCompose} />\r\n                        </section>\r\n\r\n                    </div>\r\n                </div>\r\n                <div onClick={this.onToggleCompose} className={`composer-screen flex justify-center align-center ${!isComposerOpen && 'transparent'}`}>\r\n                    <BoardComposer board={boardToEdit} onToggleCompose={this.onToggleCompose} />\r\n                </div>\r\n\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n","import { boardService } from '../../services/boardService'\r\n\r\nexport function setBoard(boardId) {\r\n    return async dispatch => {\r\n        try {\r\n            var board;\r\n            if (!boardId) board = null\r\n            else board = await boardService.getById(boardId)\r\n\r\n            dispatch({ type: 'SET_BOARD', board })\r\n\r\n        } catch (err) {\r\n            console.log('Couldnt get Board', err)\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function updateBoard(board, activity = null, isEmitting = true) {\r\n    //ACTIVITY PARAM MUST BE AN OBJECT!\r\n    return async dispatch => {\r\n        try {\r\n            const updatedBoard = isEmitting ? await boardService.save(board, activity, isEmitting) : board\r\n            const action = {\r\n                type: 'UPDATE_BOARD',\r\n                updatedBoard\r\n            }\r\n            dispatch(action)\r\n        } catch (err) {\r\n            console.log('couldnt update board', err);\r\n        }\r\n    }\r\n}\r\n\r\nexport function toggleTask() {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch({ type: 'TOGGLE_TASK' })\r\n        } catch (err) {\r\n            console.log('Board actions, failed to toggle task', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport function toggleOverlay() {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch({ type: 'TOGGLE_OVERLAY' })\r\n        }\r\n        catch (err) {\r\n            console.log('Couldnt put overlay', err);\r\n        }\r\n    }\r\n}\r\n\r\nexport function setCurrListAndTaskIdx(listIdx, taskIdx) {\r\n    return async dispatch => {\r\n        try {\r\n            const action = {\r\n                type: 'SET_CURR_LIST_AND_TASK',\r\n                listIdx, taskIdx\r\n            }\r\n            dispatch(action)\r\n        }\r\n        catch (err) {\r\n            console.log('Borad actions, failed to get curr list', err);\r\n        }\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport { updateBoard } from '../store/actions/boardActions'\r\nimport { boardService } from '../services/boardService'\r\nimport { connect } from 'react-redux'\r\nimport { PopoverHeader } from './PopoverHeader';\r\nimport { cloneDeep } from 'lodash'\r\nimport EditOutlinedIcon from '@material-ui/icons/EditOutlined';\r\n\r\nexport class _LabelsPopover extends Component {\r\n    state = {\r\n        labels: [\r\n            { id: '101', color: \"#61bd4f\", title: '', isPicked: false },\r\n            { id: '102', color: \"#f2d602\", title: '', isPicked: false },\r\n            { id: '103', color: \"#f99f1b\", title: '', isPicked: false },\r\n            { id: '104', color: \"#eb5a46\", title: '', isPicked: false },\r\n            { id: '105', color: \"#c377e0\", title: '', isPicked: false },\r\n            { id: '107', color: \"#1f79bf\", title: '', isPicked: false },\r\n            { id: '108', color: \"#3cc2e0\", title: '', isPicked: false },\r\n        ],\r\n        elRefs: []\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        this.markExistingLabels()\r\n        this.setRefs()\r\n    }\r\n\r\n    markExistingLabels() {\r\n        const { task } = this.props\r\n        if (!task.labels?.length) return;\r\n        let { labels } = { ...this.state }\r\n        const labelsIdsMap = labels.map(label => label.id)\r\n        task.labels.forEach(taskLabel => {\r\n            if (labelsIdsMap.includes(taskLabel.id)) {\r\n                const labelIdx = labels.findIndex(currLabel => currLabel.id === taskLabel.id)\r\n                labels[labelIdx].isPicked = true\r\n                labels[labelIdx].title = taskLabel.title\r\n            }\r\n        })\r\n        this.setState({ labels })\r\n    }\r\n\r\n    setRefs() {\r\n        const refs = []\r\n        this.state.labels.forEach(label => {\r\n            refs.push(React.createRef())\r\n        })\r\n        this.setState({ elRefs: refs })\r\n\r\n    }\r\n    onToggleLabel = ev => {\r\n        ev.stopPropagation()\r\n        const { labels } = { ...this.state }\r\n        const { board, list, task, updateBoard } = { ...this.props }\r\n        const labelId = ev.target.dataset.id\r\n        const labelIdx = this.getLabelIdxById(labelId)\r\n        labels[labelIdx].isPicked = !labels[labelIdx].isPicked\r\n        this.setState({ labels }, async () => {\r\n            delete labels[labelIdx].isPicked\r\n            const { listIdx, taskIdx } = boardService.getListAndTaskIdxById(board, list.id, task.id)\r\n            const activity = { task }\r\n            if (task.labels?.some(label => label.id === labelId)) {\r\n                const taskLabelIdx = task.labels.findIndex(label => label.id === labelId)\r\n                task.labels.splice(taskLabelIdx, 1)\r\n                board.lists[listIdx].tasks[taskIdx] = task\r\n                activity.txt = `has removed label from task`\r\n            }\r\n            else {\r\n                task.labels = task.labels ? [...task.labels, labels[labelIdx]] : [labels[labelIdx]]\r\n                board.lists[listIdx].tasks[taskIdx] = task\r\n                activity.txt = `has added label to task`\r\n            }\r\n\r\n            await updateBoard(board, activity)\r\n            this.markExistingLabels()\r\n        })\r\n    }\r\n\r\n    getLabelIdxById(labelId) {\r\n        const { labels } = this.state\r\n        return labels.findIndex(label => label.id === labelId)\r\n    }\r\n\r\n    handleChange = (labelIdx, ev) => {\r\n        const { labels } = this.state\r\n        const labelsCopy = cloneDeep(labels)\r\n        labelsCopy[labelIdx].title = ev.target.value\r\n        this.setState({ labels: labelsCopy })\r\n    }\r\n\r\n    onEnterPress = ev => {\r\n        if (!ev.target.value) return\r\n        if (ev.keyCode === 13 && ev.shiftKey === false) {\r\n            ev.preventDefault()\r\n            const { board, list, task, updateBoard } = this.props\r\n            const { listIdx, taskIdx } = boardService.getListAndTaskIdxById(board, list.id, task.id)\r\n            const boardCopy = cloneDeep(board)\r\n            const { labels } = this.state\r\n            const labelsToAdd = labels.filter(label => label.isPicked)\r\n            boardCopy.lists[listIdx].tasks[taskIdx].labels = labelsToAdd\r\n            updateBoard(boardCopy)\r\n        }\r\n    }\r\n\r\n    onEditLabel = (labelIdx, ev) => {\r\n        ev.stopPropagation()\r\n        const { elRefs } = this.state\r\n        elRefs[labelIdx].current.focus()\r\n    }\r\n\r\n\r\n    render() {\r\n        const { labels, elRefs } = this.state\r\n        return (\r\n            <div className=\"labels-popover quick-edit-popover\" >\r\n                <PopoverHeader title='Labels' setCurrPopover={this.props.setCurrPopover} />\r\n                <section className=\"popover-section\">\r\n                    <ul className=\"popover-section-list clear-list flex column\">\r\n                        <h3 className=\"popover-section-header\">Labels</h3>\r\n                        {labels.map((label, labelIdx) => {\r\n                            return (\r\n\r\n                                <div className=\"flex\" key={label.id}>\r\n                                    <input\r\n                                        data-id={label.id}\r\n                                        onClick={this.onToggleLabel}\r\n                                        onMouseDown={(ev) => ev.preventDefault()}\r\n                                        key={label.id}\r\n                                        onChange={(ev) => this.handleChange(labelIdx, ev)}\r\n                                        value={labels[labelIdx].title}\r\n                                        onKeyDown={this.onEnterPress}\r\n                                        ref={elRefs[labelIdx]}\r\n                                        className={`popover-section-list-item ${label.isPicked && 'picked'}`} style={{ backgroundColor: label.color }}></input>\r\n                                    <EditOutlinedIcon onClick={(ev) => this.onEditLabel(labelIdx, ev)} />\r\n                                </div>\r\n\r\n                            )\r\n                        })}\r\n                    </ul>\r\n                </section>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.currBoard\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    updateBoard,\r\n}\r\n\r\nexport const LabelsPopover = connect(mapStateToProps, mapDispatchToProps)(_LabelsPopover)\r\n","import Avatar from 'react-avatar';\r\n\r\n\r\nexport default function BoardMemberImg({ member, size = 30, className = null }) {\r\n\r\n    return (\r\n        //  <div className=\"task-member-img\"><img className=\"task-member-preview-img\" src={member?.imgUrl} /></div>\r\n        <Avatar className={`task-member-preview-img ${className}`} alt=\"task-member-preview-img\" name={member.fullname.toUpperCase()} size={size} textSizeRatio={1.75} fgColor='#fff' round={true} src={member.imgUrl} />\r\n    )\r\n\r\n\r\n}","import React, { Component } from 'react'\r\nimport { boardService } from '../services/boardService'\r\nimport DoneIcon from '@material-ui/icons/Done'\r\nimport { PopoverHeader } from './PopoverHeader'\r\nimport BoardMemberImg from './BoardMemberImg'\r\n\r\nexport class ChangeMembersPopover extends Component {\r\n    state = {\r\n        currTask: {},\r\n    }\r\n\r\n    loadTaskMembers() {\r\n        const { task } = this.props\r\n        return task.members\r\n    }\r\n\r\n    onUpdateTaskMember = async (ev) => {\r\n        ev.stopPropagation()\r\n        const { membersRef } = this.props\r\n        const { id } = ev.target.dataset\r\n        const { board } = { ...this.props }\r\n        const { members } = board\r\n        const member = members.find(member => member._id === id)\r\n        this.isTaskMember(member._id) ? await this.onRemoveTaskMember(member)\r\n            : await this.onAddTaskMember(member)\r\n        if (membersRef?.current) {\r\n            membersRef.current.clientWidth > 97 ?\r\n                membersRef.current.classList.add('narrow-down')\r\n                : membersRef.current.classList.remove('narrow-down')\r\n        }\r\n    }\r\n\r\n    onAddTaskMember = async (member) => {\r\n        const { board, updateBoard } = { ...this.props }\r\n        const { listIdx, taskIdx } = this.listAndTaskIdx\r\n        const currTask = board.lists[listIdx].tasks[taskIdx]\r\n        const { _id, username, fullname, imgUrl } = member\r\n        const miniMember = { _id, username, fullname, imgUrl }\r\n        currTask.members ? currTask.members.push(miniMember) : currTask.members = [miniMember]\r\n        this.setState({ currTask })\r\n        const activity = { txt: `has added ${miniMember.fullname} to task`, task: { ...currTask } }\r\n        await updateBoard(board, activity)\r\n    }\r\n\r\n    onRemoveTaskMember = async (member) => {\r\n        const { board, updateBoard, task } = { ...this.props },\r\n            { members } = task,\r\n            memberIdx = members.findIndex(currMember => member._id === currMember._id)\r\n        const { listIdx, taskIdx } = this.listAndTaskIdx\r\n        const { fullname } = { ...members[memberIdx] }\r\n        const currTask = board.lists[listIdx].tasks[taskIdx]\r\n        currTask.members.splice(memberIdx, 1)\r\n        this.setState({ currTask })\r\n        const activity = { txt: `has removed ${fullname} from task`, task: { ...currTask } }\r\n        await updateBoard(board, activity)\r\n    }\r\n\r\n    isTaskMember(id) {\r\n        const currTask = this.props.task\r\n        const isTaskMember = currTask.members?.some(currMember => id === currMember._id)\r\n        return isTaskMember\r\n    }\r\n\r\n    get listAndTaskIdx() {\r\n        const { board, list, task } = this.props\r\n        const { listIdx, taskIdx } = boardService.getListAndTaskIdxById(board, list.id, task.id)\r\n        return { listIdx, taskIdx }\r\n    }\r\n\r\n    render() {\r\n        const boardMembers = this.props.board.members\r\n        return (\r\n            <div className=\"change-members-popover \" onClick={(ev) => { ev.stopPropagation() }}>\r\n                <PopoverHeader title='Members' setCurrPopover={this.props.setCurrPopover} />\r\n                <section className=\"popover-section\">\r\n                    <ul className=\"popover-section-list clear-list\">\r\n                        <h3 className=\"popover-section-header\">Board members</h3>\r\n                        {boardMembers.map(member => {\r\n                            return <li key={member._id} data-id={member._id} onClick={this.onUpdateTaskMember} className={`popover-section-list-item flex align-center ${this.isTaskMember(member._id) && 'picked'}`}>\r\n                                    <BoardMemberImg member={member} size={40} className=\"board-member-img\"/>\r\n                                \r\n                                <span data-id={member._id}>{member.fullname}  ({member.username})</span>\r\n                                {this.isTaskMember(member._id) && <DoneIcon className=\"picked-icon\" />}\r\n                            </li>\r\n                        })}\r\n                    </ul>\r\n                </section>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n","import React, { Component } from 'react'\r\nimport { utilService } from '../services/utilService'\r\nimport { PopoverHeader } from './PopoverHeader'\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport { cloneDeep } from 'lodash'\r\n\r\nexport class CopyTaskPopover extends Component {\r\n    state = {\r\n        selectedListIdx: 0\r\n    }\r\n\r\n    handleInput = (ev) => {\r\n        this.setState({ selectedListIdx: ev.target.value })\r\n    }\r\n\r\n    onCopyClick = async () => {\r\n        const { board, task, updateBoard, setCurrPopover } = this.props\r\n        const { selectedListIdx } = this.state\r\n        const copyBoard = cloneDeep(board)\r\n        const copyTask = cloneDeep(task)\r\n        copyTask.id = utilService.makeId()\r\n        copyTask.createdAt = Date.now()\r\n        copyBoard.lists[selectedListIdx].tasks.push(copyTask)\r\n        await updateBoard(copyBoard)\r\n        setCurrPopover()\r\n    }\r\n\r\n    render() {\r\n        const { board } = this.props\r\n        return (\r\n            <div className=\"copy-task-popover\" onClick={(ev) => ev.stopPropagation()}>\r\n                <PopoverHeader title=\"Copy Task\" setCurrPopover={this.props.setCurrPopover} />\r\n                <div className=\"copy-task-body flex column  justify-center align-center\">\r\n                    <h3>Select Destination</h3>\r\n                    <FormControl style={{ marginBottom: '10px', minWidth: '120px' }} >\r\n                        <Select\r\n                            native\r\n                            onChange={this.handleInput}\r\n                            inputProps={{\r\n                                name: 'list',\r\n                                id: 'age-native-simple',\r\n                            }}\r\n                        >\r\n                            {board.lists.map((list, listIdx) => {\r\n                                if (!list.title) return\r\n                                return <option value={listIdx}>{list.title}</option>\r\n                            })}\r\n                        </Select>\r\n                    </FormControl>\r\n                    <button onClick={this.onCopyClick} className=\"date-close-btn primary-btn\">Copy</button>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component, Fragment } from 'react'\r\n\r\nexport class QuickEditButton extends Component {\r\n\r\n    state = {\r\n        isLabelsPopoverOpen: false\r\n    }\r\n\r\n    render() {\r\n        const { title, Component, setCurrPopover, currPopover, Icon } = this.props\r\n        return (\r\n            <>\r\n            <a className=\"quick-task-editor-buttons-item js-edit-labels\" onClick={ev => {\r\n                ev.stopPropagation()\r\n                currPopover === title ? setCurrPopover() : setCurrPopover(title)\r\n            }} data-for={'editLabels'}>\r\n                <span className=\"quick-task-editor-buttons-item-text flex align-center\">{Icon && <Icon className=\"quick-task-editor-buttons-item-icon\" />}{title}</span>\r\n            </a >\r\n                { Component && (currPopover === title) && <Component {...this.props} />}\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    container: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n    },\r\n    textField: {\r\n        marginLeft: theme.spacing(1),\r\n        marginRight: theme.spacing(1),\r\n        width: 200,\r\n    },\r\n}));\r\n\r\nexport default function DateAndTimePickers(props) {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <form className={classes.container} noValidate>\r\n            <TextField\r\n\r\n                id=\"datetime-local\"\r\n                format=\"yyyy/MM/dd HH:mm\"\r\n                type=\"datetime-local\"\r\n                defaultValue=\"2021-01-24T10:30\"\r\n                className={classes.textField}\r\n                InputLabelProps={{\r\n                    shrink: true,\r\n                }}\r\n                {...props}\r\n            />\r\n        </form>\r\n    );\r\n}\r\n","import React, { Component } from 'react'\r\nimport DateTime from './MUIDateTime'\r\nimport { PopoverHeader } from './PopoverHeader'\r\n\r\nexport class DateTimePopover extends Component {\r\n\r\n\r\n    render() {\r\n        const { classNames } = this.props\r\n        return (\r\n            <div className={`due-date-popover quick-edit-popover ${classNames && classNames}`} onClick={(ev) => ev.stopPropagation()}>\r\n                <PopoverHeader title='Due Date' setCurrPopover={this.props.setCurrPopover} />\r\n                <div className=\"due-date-body flex justify-center align-center\">\r\n                    <DateTime onChange={this.props.onDateChange} />\r\n                    <button onClick={() => this.props.onSaveDate()} className=\"date-close-btn primary-btn\">Save</button>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n","import React, { Component } from 'react'\r\nimport { boardService } from '../services/boardService'\r\nimport { PopoverHeader } from './PopoverHeader'\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport { cloneDeep } from 'lodash'\r\n\r\n\r\nexport class MoveTaskPopover extends Component {\r\n\r\n    state = {\r\n        selectedListIdx: 0\r\n    }\r\n\r\n    handleInput = (ev) => {\r\n        this.setState({ selectedListIdx: ev.target.value })\r\n    }\r\n\r\n    onMoveSaveClick = async () => {\r\n        const { board, list, task, updateBoard, setCurrPopover } = this.props\r\n        const { selectedListIdx } = this.state\r\n        const { listIdx, taskIdx } = boardService.getListAndTaskIdxById(board, list.id, task.id)\r\n        const copyBoard = cloneDeep(board)\r\n        const taskToMove = copyBoard.lists[listIdx].tasks.splice(taskIdx, 1)\r\n        copyBoard.lists[+selectedListIdx].tasks.push(taskToMove[0])\r\n        await updateBoard(copyBoard)\r\n        setCurrPopover()\r\n        const { taskId, listId } = this.props.match.params\r\n        if (taskId && listId) {\r\n            this.props.history.push(`/board/${board._id}/${board.lists[selectedListIdx].id}/${task.id}`)\r\n        }\r\n    }\r\n    render() {\r\n        const { board } = this.props\r\n        return (\r\n            <div className=\"move-task-popover\" onClick={(ev) => ev.stopPropagation()}>\r\n                <PopoverHeader title=\"Move Task\" setCurrPopover={this.props.setCurrPopover} />\r\n                <div className=\"move-task-body flex column  justify-center align-center\">\r\n                    <h3>Select Destination</h3>\r\n                    <FormControl style={{ marginBottom: '10px', minWidth: '120px' }} >\r\n                        <Select\r\n                            native\r\n                            onChange={this.handleInput}\r\n                            inputProps={{\r\n                                name: 'list',\r\n                                id: 'age-native-simple',\r\n                            }}\r\n                        >\r\n                            {board.lists.map((list, listIdx) => {\r\n                                if (!list.title) return\r\n                                return <option value={listIdx}>{list.title}</option>\r\n                            })}\r\n                        </Select>\r\n                    </FormControl>\r\n                    <button onClick={this.onMoveSaveClick} className=\"date-close-btn primary-btn\">Move</button>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { boardService } from '../services/boardService'\r\nimport { LabelsPopover } from './LabelsPopover'\r\nimport { ChangeMembersPopover } from './ChangeMembersPopover'\r\nimport { CopyTaskPopover } from './CopyTaskPopover'\r\nimport { QuickEditButton } from './QuickEditButton'\r\nimport LabelIcon from '@material-ui/icons/LabelOutlined';\r\nimport ChangeMembersIcon from '@material-ui/icons/PeopleOutline';\r\nimport RemoveIcon from '@material-ui/icons/DeleteOutline';\r\nimport ChangeDueDateIcon from '@material-ui/icons/QueryBuilder';\r\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\r\nimport FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined'\r\nimport { DateTimePopover } from './DateTimePopover'\r\nimport { MoveTaskPopover } from './MoveTaskPopover'\r\nimport { parseISO } from 'date-fns'\r\nimport { getTime } from 'date-fns'\r\n\r\n/* FOR DEMO 3:\r\nthe TaskEdit component renders the quick edit buttons which on click, opens the respected popover.\r\nas you can see, it is built in a way that assuming in the future a programmer would like to add a new component, \r\nall that is required is to add another object to the state.\r\n\r\n*/\r\n\r\nconst popovers = [\r\n    {\r\n        title: 'Edit Labels',\r\n        Component: LabelsPopover,\r\n        Icon: LabelIcon\r\n    },\r\n    {\r\n        title: 'Change Members',\r\n        Component: ChangeMembersPopover,\r\n        Icon: ChangeMembersIcon\r\n    },\r\n    { title: 'Move', Icon: ArrowForwardIcon, Component: MoveTaskPopover },\r\n    { title: 'Copy', Icon: FileCopyOutlinedIcon},\r\n    {\r\n        title: 'Change Due Date',\r\n        Component: DateTimePopover,\r\n        Icon: ChangeDueDateIcon,\r\n        classNames: 'quick-edit-datepicker'\r\n    },\r\n]\r\n\r\nexport class TaskEdit extends Component {\r\n\r\n    state = {\r\n        dueDate: {\r\n            timestamp: '',\r\n            isDone: false\r\n        }\r\n    }\r\n\r\n    dueDateHandlers = {\r\n        onDateChange: (ev) => {\r\n            let parsedString = parseISO(ev.target.value)\r\n            let timestamp = getTime(parsedString)\r\n            const dueDate = {\r\n                timestamp,\r\n                isDone: false\r\n            }\r\n            this.setState({ dueDate })\r\n        },\r\n        onSaveDate: () => {\r\n            const { board, list, task, updateBoard } = this.props\r\n            const { listIdx, taskIdx } = boardService.getListAndTaskIdxById(board, list.id, task.id)\r\n            const copyBoard = { ...board }\r\n            if (!this.state.dueDate.timestamp) return\r\n            copyBoard.lists[listIdx].tasks[taskIdx].dueDate = this.state.dueDate\r\n            updateBoard(copyBoard)\r\n            this.props.setCurrPopover()\r\n        }\r\n    }\r\n\r\n    onRemoveTask = ev => {\r\n        ev.stopPropagation()\r\n        const { task, list, board } = this.props\r\n        const { listIdx, taskIdx } = boardService.getListAndTaskIdxById(board, list.id, task.id)\r\n        const boardCopy = { ...this.props.board }\r\n        boardCopy.lists[listIdx].tasks.splice(taskIdx, 1)\r\n        this.props.updateBoard(boardCopy)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"quick-task-editor-buttons\">\r\n                {popovers.map(popover => {\r\n                    return <QuickEditButton\r\n                        {...this.dueDateHandlers}\r\n                        {...this.props}\r\n                        {...popover} />\r\n                })}\r\n                <a className=\"quick-task-editor-buttons-item js-edit-labels\" href=\"#\" onClick={this.onRemoveTask}>\r\n                    <span className=\"icon-sm icon-label light\"></span>\r\n                    <span className=\"quick-task-editor-buttons-item-text flex align-center\">\r\n                        <RemoveIcon className=\"quick-task-editor-buttons-item-icon\" />Remove</span>\r\n                </a>\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n","import React, { Component, Fragment } from 'react'\r\nimport { boardService } from '../services/boardService'\r\nimport { toggleTask, setCurrListAndTaskIdx, updateBoard } from '../store/actions/boardActions'\r\nimport { connect } from 'react-redux'\r\nimport { withRouter } from 'react-router-dom'\r\nimport ContentEditable from \"react-contenteditable\";\r\nimport EditIcon from '@material-ui/icons/CreateOutlined';\r\nimport CheckIcon from '@material-ui/icons/CheckBoxOutlined';\r\nimport DueDateIcon from '@material-ui/icons/QueryBuilderOutlined';\r\nimport NotesOutlinedIcon from '@material-ui/icons/NotesOutlined';\r\nimport { TaskEdit } from './TaskEdit'\r\nimport CommentIcon from '@material-ui/icons/TextsmsOutlined';\r\nimport { format } from 'date-fns'\r\nimport { Draggable } from 'react-beautiful-dnd';\r\nimport BoardMemberImg from './BoardMemberImg'\r\n\r\nexport class _TaskPreview extends Component {\r\n\r\n    state = {\r\n        isTaskHovered: false,\r\n        isEditOpen: false,\r\n        taskTitle: '',\r\n        titleBeforeChange: '',\r\n        unreadNotificationsCount: 0,\r\n        isLabelOpen: false,\r\n        isManyMembers: false,\r\n    }\r\n\r\n    membersRef = React.createRef()\r\n\r\n\r\n    componentDidMount() {\r\n        const { task } = this.props\r\n        this.setState({ taskTitle: task.title, titleBeforeChange: task.title })\r\n\r\n        if (this.membersRef.current) {\r\n            this.membersRef.current.clientWidth > 97 ?\r\n                this.membersRef.current.classList.add('narrow-down')\r\n                : this.membersRef.current.classList.remove('narrow-down')\r\n        }\r\n    }\r\n\r\n    onTaskUpdated = (activityTxt) => {\r\n        const { unreadNotificationsCount } = { ...this.state }\r\n        this.setState({ unreadNotificationsCount: unreadNotificationsCount + 1 }, () => {\r\n        })\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { task } = this.props\r\n        if (prevProps.task === task) return\r\n        this.setState({ taskTitle: task.title, titleBeforeChange: task.title })\r\n    }\r\n\r\n\r\n    setDefaultTitle = () => {\r\n        const { titleBeforeChange } = this.state\r\n        this.setState({ taskTitle: titleBeforeChange })\r\n    }\r\n\r\n    get doesContainIndics() {\r\n        const { task } = this.props\r\n        return task.description || task.checklists?.length || task.dueDate || task.comments?.length || task.members?.length\r\n    }\r\n    onOpenDetails = async (ev) => {\r\n        ev.stopPropagation()\r\n        if (this.state.isEditOpen) return\r\n\r\n        const { list, board, task } = this.props\r\n        const { taskIdx, listIdx } = boardService.getListAndTaskIdxById(board, list.id, task.id)\r\n\r\n        await this.props.setCurrListAndTaskIdx(listIdx, taskIdx)\r\n        await this.props.toggleOverlay()\r\n\r\n        // await this.props.toggleTask()\r\n        this.props.history.push(`/board/${board._id}/${list.id}/${task.id}`)\r\n    }\r\n\r\n    taskPreviewHandlers = {\r\n        //To identify hover state (for revealing quick edit icon)\r\n        onMouseEnter: () => {\r\n            this.setState({ isTaskHovered: true })\r\n        },\r\n        onMouseLeave: () => {\r\n            this.setState({ isTaskHovered: false })\r\n        }\r\n    }\r\n\r\n    onToggleEdit = ev => {\r\n        ev.stopPropagation()\r\n        const { isEditOpen } = this.state\r\n        this.setState({ isEditOpen: !isEditOpen })\r\n        if (isEditOpen) this.setDefaultTitle()\r\n        this.props.setListDnd(isEditOpen)\r\n    }\r\n\r\n\r\n\r\n    get taskTodosLength() {\r\n        const { task } = this.props\r\n        const totalLen = task.checklists.reduce((acc, checklist) => { return acc + checklist.todos.length }, 0)\r\n        return totalLen\r\n    }\r\n\r\n    get taskDoneTodosLength() {\r\n        const { task } = this.props\r\n        var doneTodos = []\r\n        task.checklists.forEach(checklist => {\r\n            const checklistDoneTodos = checklist.todos.filter(todo => todo.isDone)\r\n            doneTodos = [...doneTodos, ...checklistDoneTodos]\r\n        })\r\n        return doneTodos.length\r\n    }\r\n\r\n\r\n    handleChange = evt => {\r\n        this.setState({ taskTitle: evt.target.value });\r\n    };\r\n\r\n    onSaveTitle = async (ev) => {\r\n        const { taskTitle } = this.state\r\n        if (!taskTitle) return\r\n        const { list, board, task } = this.props\r\n        if (taskTitle === task.title) {\r\n            this.onToggleEdit(ev)\r\n            return\r\n        }\r\n        const { listIdx, taskIdx } = boardService.getListAndTaskIdxById(board, list.id, task.id)\r\n        const copyBoard = { ...board }\r\n        copyBoard.lists[listIdx].tasks[taskIdx].title = taskTitle\r\n        const { user } = this.props\r\n        await this.props.updateBoard(copyBoard, { user, txt: `has changed task (${task.title}) title`, task: { ...this.props.task } })\r\n        this.onToggleEdit(ev)\r\n    }\r\n\r\n    render() {\r\n        const { task, list, taskIdx, toggleLabels, isLabelOpen } = this.props\r\n        const { isEditOpen, isTaskHovered } = this.state\r\n        return (\r\n            <Fragment>\r\n                <div className={`${isEditOpen && 'main-overlay'}`} onClick={this.onToggleEdit}></div>\r\n                <Draggable\r\n                    draggableId={task.id}\r\n                    index={taskIdx}\r\n                    isDragDisabled={isEditOpen}\r\n                >\r\n                    {(provided, snapshot) => (\r\n                        <div\r\n                            {...provided.draggableProps}\r\n                            {...provided.dragHandleProps}\r\n                            ref={provided.innerRef}\r\n                        >\r\n                            <div {...this.taskPreviewHandlers} className={`task-preview ${snapshot.isDragging && 'moving'} ${isEditOpen && ' quickEdit'} ${this.props.className}`} onClick={this.onOpenDetails} >\r\n                                {(task.attachments?.length) ?\r\n                                    <div className=\"preview-img\" style={{ backgroundImage: `url(${task.attachments.slice(-1)[0]})` }}>\r\n                                    </div>\r\n                                    : ''\r\n                                }\r\n                                {task.labels?.length ? <div className=\"top-line-preview-container flex\">\r\n                                    <div className=\"labels-container flex\">\r\n                                        {task.labels.map(label => {\r\n                                            return (\r\n                                                <div onClick={(ev) => {\r\n                                                    ev.stopPropagation()\r\n                                                    toggleLabels()\r\n                                                }} style={{ backgroundColor: label.color }} key={label.id} className={`task-label ${isLabelOpen && \"open\"}`} title={label.title}>{isLabelOpen ? label.title : ''}</div>\r\n                                            )\r\n\r\n                                        })}\r\n\r\n                                    </div>\r\n                                    <div className=\"quick-edit-wrapper\">\r\n                                        {isTaskHovered && <EditIcon className=\"edit-icon\" onClick={this.onToggleEdit} />}\r\n                                        {isEditOpen && <TaskEdit\r\n                                            {...this.props}\r\n                                            membersRef={this.membersRef}\r\n                                            task={task}\r\n                                            list={list}\r\n                                            onToggleEdit={this.onToggleEdit} />}\r\n                                    </div>\r\n                                </div> : ''}\r\n                                <div className=\"task-title-wrapper flex space-between \">\r\n\r\n\r\n                                    <ContentEditable\r\n                                        style={{ color: list.style.title.bgColor }}\r\n                                        html={this.state.taskTitle} // innerHTML of the editable div\r\n                                        disabled={!isEditOpen} // use true to disable edition\r\n                                        onChange={this.handleChange} // handle innerHTML change\r\n                                        className=\"task-title-input\"\r\n                                    />\r\n\r\n                                    {!task.labels?.length && <div className=\"quick-edit-wrapper\">\r\n                                        {(isTaskHovered || isEditOpen) &&\r\n                                            <EditIcon className=\"edit-icon\" onClick={this.onToggleEdit} />}\r\n                                        {isEditOpen && <TaskEdit {...this.props} task={task} membersRef={this.membersRef} list={list} onToggleEdit={this.onToggleEdit} />}\r\n                                    </div>}\r\n                                </div>\r\n                                {this.doesContainIndics &&\r\n                                    <div className=\"task-preview-icons-container indication-icon flex \">\r\n                                        <div className=\"task-preview-indication-icons flex start\">\r\n                                            {task.description && <NotesOutlinedIcon className=\"description-indication-icon indication-icon\" />}\r\n                                            {task.checklists?.length ? <div className=\"flex align-center\"><CheckIcon className=\"indication-icon\" />{this.taskDoneTodosLength}/{this.taskTodosLength}</div> : ''}\r\n                                            {task.dueDate ? <div className={`date-indication  flex align-center ${task.dueDate.isDone ? \"complete\" : \"\"}`}><DueDateIcon className=\"indication-icon\" /><div>{format(new Date(task?.dueDate?.timestamp), 'LLL')} {format(new Date(task?.dueDate?.timestamp), 'd')}</div></div> : ''}\r\n                                            {task.comments && <CommentIcon className=\"comment-indication-icon indication-icon\" />}\r\n                                        </div>\r\n                                        {task.members?.length ?\r\n                                            <div ref={this.membersRef} className=\"task-members-imgs flex\">\r\n                                                {task.members.map(member => { return <BoardMemberImg key={member._id} member={member} /> })}\r\n                                            </div>\r\n                                            : ''}\r\n\r\n                                    </div>\r\n                                }\r\n                                {isEditOpen && <button className=\"primary-btn quick-btn\" onClick={this.onSaveTitle}> Save </button>}\r\n                            </div >\r\n\r\n                        </div>\r\n                    )}\r\n                </Draggable>\r\n\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapDispatchToProps = {\r\n    toggleTask,\r\n    setCurrListAndTaskIdx,\r\n    updateBoard\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        isTaskOpen: state.boardReducer.isTaskOpen,\r\n        isOverlayOpen: state.boardReducer.isOverlayOpen,\r\n        board: state.boardReducer.currBoard\r\n    }\r\n}\r\n\r\nexport const TaskPreview = connect(mapStateToProps, mapDispatchToProps)(withRouter(_TaskPreview))\r\n\r\n\r\n/*\r\nSockets activities plan:\r\nlogged in user is adding somebody to a task.\r\nat the same time board is updated ,\r\nupdateUserActivities is sent,\r\n\"you have been added to the task.\"\r\n\r\n*/","\r\nexport function setCurrPopover(popover=null) {\r\n    return async dispatch => {\r\n        try {\r\n            dispatch({ type: 'SET_CURR_POPOVER', popover })\r\n        } catch (err) {\r\n            console.log('Could not set popover status, ', err);\r\n        }\r\n    }\r\n}","import React, { Component } from 'react'\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { PopoverHeader } from './PopoverHeader'\r\nimport onClickOutside from 'react-onclickoutside'\r\n\r\n\r\nexport class _ListActions extends Component {\r\n    state = {\r\n        listColors: ['#9895E0', '#4A94F8', '#56c991', '#3cc2e0', '#eb5a46', '#ac0275', '#67c0a4', '#F5E50E'],\r\n    }\r\n\r\n    onSetListColor = (color) => {\r\n        const { board, listIdx, updateBoard } = { ...this.props }\r\n        board.lists[listIdx].style.title.bgColor = color\r\n        updateBoard(board)\r\n    }\r\n\r\n    handleClickOutside = () => {\r\n        this.props.handleClickOutside()\r\n    }\r\n    render() {\r\n        const { onToggleComposer, onRemoveList, setCurrPopover } = this.props\r\n        return (\r\n            <div className=\"list-actions-popover\" onClick={(ev) => ev.stopPropagation()}>\r\n                <PopoverHeader title='List Actions' setCurrPopover={setCurrPopover} />\r\n                <section className=\"popover-section\">\r\n                    <ul className=\"popover-section-list clear-list\">\r\n                        <li className=\"add-task popover-section-list-item\" onClick={(ev) => {\r\n                            setCurrPopover()\r\n                            onToggleComposer(ev)\r\n                        }}>Add task...</li>\r\n                        <li className=\"remove-list popover-section-list-item\" onClick={(ev) => {\r\n                            setCurrPopover()\r\n                            onRemoveList(ev)\r\n                        }}>Remove list...</li>\r\n                        <li className=\" popover-section-list-item\">\r\n                            {/* <div className=\"pick-list-color\">Change color...</div> */}\r\n                            <div className=\"list-colors-grid\">{this.state.listColors.map(color => {\r\n                                return <div key={color} className=\"list-color-option\" onClick={() => this.onSetListColor(color)} style={{ backgroundColor: color }}></div>\r\n                            })}\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                </section>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport const ListActions = onClickOutside(_ListActions)","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { updateBoard, toggleOverlay } from '../store/actions/boardActions'\r\nimport { boardService } from '../services/boardService'\r\nimport { utilService } from '../services/utilService'\r\nimport { setCurrPopover } from '../store/actions/popoverActions'\r\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\r\nimport { ListActions } from './ListActions'\r\nimport { LoadingSpinner } from './LoadingSpinner'\r\n\r\nexport class _ListTitle extends Component {\r\n    state = {\r\n        title: '',\r\n        isListActionsOpen: false\r\n    }\r\n\r\n    elListTitleRef = React.createRef()\r\n\r\n    componentDidMount() {\r\n        const { title } = this.props\r\n        this.setState({ title })\r\n    }\r\n\r\n    updateBoard = async (board) => {\r\n        await this.props.updateBoard(board)\r\n    }\r\n\r\n    listTitleHandlers = {\r\n        onChange: (ev) => {\r\n            const { name, value } = ev.target\r\n            this.setState({ [name]: value })\r\n        },\r\n        onBlur: ({ target }) => {\r\n            const board = { ...this.props.board }\r\n            const { list } = this.props\r\n            const listIdx = boardService.getListIdxById(board, list.id)\r\n            board.lists[listIdx][target.name] = target.value\r\n            target.style.backgroundColor = list.style.title.bgColor\r\n            target.style.color = '#fff'\r\n            this.props.updateBoard(board)\r\n        },\r\n        onFocus: ({ target }) => {\r\n            target.style.backgroundColor = '#fff'\r\n            target.style.color = '#212121'\r\n            target.style.borderRadius = \"2px\"\r\n        }\r\n    }\r\n\r\n    editIconHandlers = {\r\n        onMouseEnter: ({ target }) => {\r\n            const { list } = this.props\r\n            const bgColor = utilService.lightenColor(list.style.title.bgColor, 10)\r\n            target.style.backgroundColor = bgColor\r\n        },\r\n        onMouseLeave: ({ target }) => {\r\n            target.style.backgroundColor = 'transparent'\r\n        }\r\n    }\r\n    onPressEnter = (ev) => {\r\n        ev.preventDefault()\r\n        this.elListTitleRef.current.blur()\r\n    }\r\n\r\n    onToggleListActions = (ev) => {\r\n        console.log('isPropagation stopped? ', ev.stopPropagation);\r\n        this.setState({ isListActionsOpen: !this.state.isListActionsOpen })\r\n    }\r\n\r\n    handleClickOutside = ev => {\r\n        this.setState({ isListActionsOpen: false })\r\n    }\r\n\r\n    render() {\r\n        const { list, isComposerOpen } = this.props\r\n        const { isListActionsOpen } = this.state\r\n        if (!list) return <LoadingSpinner />\r\n        return (\r\n            <form onSubmit={this.onPressEnter}\r\n                autoComplete=\"off\"\r\n                className=\"list-title flex align-center\"\r\n                style={{ backgroundColor: `${list.style.title.bgColor}` }}>\r\n                <input\r\n                    {...this.listTitleHandlers}\r\n                    placeholder=\"Enter list title\"\r\n                    ref={this.elListTitleRef}\r\n                    value={this.state.title}\r\n                    name=\"title\" />\r\n                <div className=\"list-actions-popover-wrapper\">\r\n                    {<MoreHorizIcon\r\n                        {...this.editIconHandlers}\r\n                        onClick={this.onToggleListActions}\r\n\r\n                        className={`toggle-actions-icon ${isComposerOpen && 'close'}`} />}\r\n                    {isListActionsOpen && <ListActions {...this.props} handleClickOutside={this.handleClickOutside} />}\r\n                </div>\r\n            </form>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.currBoard,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    updateBoard,\r\n    setCurrPopover,\r\n    toggleOverlay\r\n}\r\n\r\nexport const ListTitle = connect(mapStateToProps, mapDispatchToProps)(_ListTitle)","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { updateBoard } from '../store/actions/boardActions'\r\nimport { boardService } from '../services/boardService'\r\nimport { utilService } from '../services/utilService'\r\n\r\nexport class _TaskComposer extends Component {\r\n\r\n    state = {\r\n        task: {\r\n            title: '',\r\n            description: '',\r\n        }\r\n    }\r\n\r\n    handleChange = ev => {\r\n        const { name, value } = ev.target\r\n        this.setState(prevState => ({ task: { ...prevState.task, [name]: value } }))\r\n    }\r\n\r\n    onAddTask = ev => {\r\n        ev.preventDefault()\r\n        ev.stopPropagation()\r\n        const { task } = { ...this.state }\r\n        const { board } = { ...this.props }\r\n        const { list } = this.props\r\n        const listIdx = boardService.getListIdxById(board, list.id)\r\n        task.createdAt = Date.now()\r\n        task.id = utilService.makeId()\r\n        if (!board.lists[listIdx].tasks) {\r\n            board.lists[listIdx].tasks = []\r\n        }\r\n        board.lists[listIdx].tasks.push(task)\r\n        this.setState({\r\n            task: {\r\n                title: '',\r\n                description: '',\r\n            }\r\n        }, () => {\r\n            this.props.updateBoard(board)\r\n        })\r\n    }\r\n\r\n    updateBoard(board = this.props.board) {\r\n        this.props.updateBoard(board)\r\n    }\r\n\r\n    render() {\r\n        const { isComposerOpen, titleRef, setCurrPopover, list } = this.props\r\n        const { task } = this.state\r\n        return (\r\n            <form className={`task-composer`} onSubmit={this.onAddTask}>\r\n                <input value={task.title} type=\"text\" ref={titleRef} name=\"title\" onClick={() => { setCurrPopover(`TASK_COMPOSER${list.id}`) }} onChange={this.handleChange}\r\n                    placeholder={list.tasks.length ? \"+ Add another card\" : \"+ Add a card\"} autoComplete=\"off\" id=\"\" />\r\n                <div className={`open-composer-section ${!isComposerOpen && 'display-none'}`}>\r\n                    <button className={`save-task-btn primary-btn `}>Add</button>\r\n                </div>\r\n            </form>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.currBoard\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    updateBoard\r\n}\r\n\r\nexport const TaskComposer = connect(mapStateToProps, mapDispatchToProps)(_TaskComposer)\r\n","import React, { Component } from 'react'\r\nimport { TaskPreview } from './TaskPreview'\r\nimport { boardService } from '../services/boardService'\r\nimport { ListTitle } from './ListTitle'\r\nimport { TaskComposer } from './TaskComposer'\r\nimport { Droppable, Draggable } from 'react-beautiful-dnd';\r\n\r\n\r\nexport class TaskList extends Component {\r\n    state = {\r\n        isComposerOpen: false,\r\n        isDragDisabled: false\r\n    }\r\n\r\n    elTaskTitleRef = React.createRef()\r\n\r\n    updateBoard = async (board = this.props.board) => {\r\n        await this.props.updateBoard(board)\r\n    }\r\n\r\n    onEditTask = () => {\r\n        const { list } = this.props\r\n        const { task } = this.state\r\n        const board = { ...this.props.board }\r\n        const taskIdx = boardService.getTaskIdxById(list, task.id)\r\n        board.lists.tasks[taskIdx] = task\r\n        this.updateBoard()\r\n    }\r\n\r\n    listTitleHandlersProps = {\r\n        onRemoveList: () => {\r\n            const listIdx = this.listIdx\r\n            const { board, updateBoard } = { ...this.props }\r\n            const activity = { txt: `has removed list ${board.lists[listIdx].title}` }\r\n            board.lists.splice(listIdx, 1)\r\n            updateBoard(board, activity)\r\n\r\n        },\r\n        onToggleComposer: ev => {\r\n            ev.stopPropagation()\r\n            this.props.setCurrPopover(`TASK_COMPOSER${this.props.list.id}`)\r\n            this.setState({ isComposerOpen: !this.state.isComposerOpen }, () => {\r\n                this.elTaskTitleRef.current.focus()\r\n            })\r\n        }\r\n    }\r\n\r\n    get listIdx() {\r\n        const { list, board } = this.props\r\n        const listIdx = boardService.getListIdxById(board, list.id)\r\n        return listIdx\r\n    }\r\n\r\n    setDragability = (boolean) => {\r\n        this.setState({ isDragDisabled: !boolean })\r\n        console.log('isDragable?', this.state.isDragDisabled);\r\n    }\r\n\r\n    render() {\r\n        const { list, currPopover, listIdx } = this.props\r\n        const { tasks } = list\r\n\r\n        return (\r\n            <Draggable draggableId={list.id} index={listIdx} isDragDisabled={this.state.isDragDisabled} >\r\n\r\n                {(provided, snapshot) => (\r\n                    <li\r\n                        style={{ backgroundColor: list.style.bgColor }}\r\n                        className={`task-list task-list-container ${snapshot.isDragging && 'moving'}  `}\r\n                        {...provided.dragHandleProps}\r\n                        {...provided.draggableProps}\r\n                        ref={provided.innerRef}>\r\n\r\n                        <ListTitle\r\n                            {...provided.dragHandleProps}\r\n                            {...this.props}\r\n                            {...this.listTitleHandlersProps}\r\n                        />\r\n\r\n                        <div className=\"task-previews-container\">\r\n                            <Droppable droppableId={list.id} type=\"task\">\r\n                                {provided => (\r\n                                    <div ref={provided.innerRef} {...provided.droppableProps} className=\"flex column\" style={{ flexGrow: \"1\", minHeight: \"1px\" }}>\r\n\r\n                                        {tasks ? tasks.map((task, idx) => <TaskPreview key={task.id} taskIdx={idx} {...this.props} setListDnd={this.setDragability} task={task} className={(idx === tasks.length - 1) && \"last-child\"} />) : ''}\r\n\r\n                                        {provided.placeholder}\r\n                                    </div>\r\n                                )}\r\n                            </Droppable>\r\n                        </div>\r\n                        <TaskComposer {...this.props} titleRef={this.elTaskTitleRef} isComposerOpen={currPopover === `TASK_COMPOSER${list.id}`} onToggleComposer={this.onToggleComposer} />\r\n                    </li>\r\n                )\r\n                }\r\n            </Draggable>\r\n\r\n        )\r\n    }\r\n}\r\n\r\n","import React, { Component } from 'react'\r\nimport { TaskList } from './TaskList'\r\nimport { boardService } from '../services/boardService'\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport { connect } from 'react-redux'\r\nimport { updateBoard } from '../store/actions/boardActions'\r\nimport { utilService } from '../services/utilService'\r\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd';\r\nimport { LoadingSpinner } from './LoadingSpinner';\r\n\r\n\r\nexport class _Board extends Component {\r\n    state = {\r\n        listColors: ['#9895E0', '#4A94F8', '#56c991', '#3cc2e0', '#eb5a46'],\r\n        listToAdd: {\r\n            title: '',\r\n            tasks: [],\r\n            style: {\r\n                bgColor: '',\r\n                title: { bgColor: '' }\r\n            }\r\n        },\r\n        isLabelOpen: false\r\n    }\r\n\r\n    elListTitleRef = React.createRef()\r\n\r\n    toggleLabels = (boolean = !this.state.isLabelOpen) => {\r\n        this.setState({ isLabelOpen: boolean })\r\n    }\r\n\r\n    addListHandlers = {\r\n        onClick: (ev) => {\r\n            ev.stopPropagation()\r\n            this.elListTitleRef.current.focus()\r\n            const { setCurrPopover } = this.props\r\n            setCurrPopover('LIST_ADD')\r\n        },\r\n        onSubmit: ev => {\r\n            ev.preventDefault()\r\n            const { board, updateBoard } = { ...this.props }\r\n            const { listToAdd } = { ...this.state }\r\n            const listToAddIdx = board.lists.length\r\n            let listColor = this.state.listColors[listToAddIdx]\r\n            if (!listColor) listColor = utilService.getRandomColor()\r\n            listToAdd.id = utilService.makeId()\r\n            listToAdd.style.title.bgColor = listColor\r\n            listToAdd.style.bgColor = listToAdd.style.title.bgColor + '82'\r\n            board.lists.push(listToAdd)\r\n            this.setState({\r\n                listToAdd: {\r\n                    title: '',\r\n                    tasks: [],\r\n                    style: {\r\n                        title: { bgColor: '' }\r\n                    }\r\n                }\r\n            })\r\n            var activity = { txt: `has added list (${listToAdd.title}) to the board.` }\r\n            updateBoard(board, activity)\r\n        }\r\n    }\r\n\r\n    handleChange = ({ target }) => {\r\n        const { name, value } = target\r\n        this.setState(prevState => ({ listToAdd: { ...prevState.listToAdd, [name]: value } }))\r\n    }\r\n\r\n\r\n\r\n    // activate when a dragged item is released\r\n    onDragEnd = (res) => {\r\n        const { destination, source, type } = res;\r\n\r\n        if (!destination) return\r\n\r\n        if (//if the item stayed in the same spot \r\n            destination.droppableId === source.droppableId &&\r\n            destination.index === source.index\r\n        ) return;\r\n\r\n        const copyBoard = { ...this.props.board }\r\n\r\n        if (type === 'task') {\r\n\r\n            const sourceListIdx = boardService.getListIdxById(copyBoard, source.droppableId)\r\n            const destinationListIdx = boardService.getListIdxById(copyBoard, destination.droppableId)\r\n\r\n            const task = copyBoard.lists[sourceListIdx].tasks.splice(source.index, 1);\r\n            copyBoard.lists[destinationListIdx].tasks.splice(destination.index, 0, task[0]);\r\n\r\n        } else {\r\n\r\n            const list = copyBoard.lists.splice(source.index, 1);\r\n            copyBoard.lists.splice(destination.index, 0, list[0]);\r\n\r\n        }\r\n\r\n        this.props.updateBoard(copyBoard)\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        const { board, currPopover, isDashboardOpen } = this.props\r\n        const { lists } = board\r\n        const isCurrPopover = (currPopover === 'LIST_ADD')\r\n        const { listToAdd,isLabelOpen } = this.state\r\n        if (!board) return <LoadingSpinner/>\r\n        return (\r\n            <div className={`board board-layout ${isDashboardOpen && 'slide-from-left'}`} style={{ height: \"76vh\" }}>\r\n\r\n                <DragDropContext onDragEnd={this.onDragEnd} >\r\n                    <Droppable\r\n                        droppableId=\"all-columns\"\r\n                        direction=\"horizontal\"\r\n                        type=\"list\"\r\n                    >\r\n                        {provided => (\r\n                            <ul\r\n                                className=\"lists-group clear-list flex  \"\r\n                                {...provided.droppableProps}\r\n                                ref={provided.innerRef}\r\n                            >\r\n                                {lists.map((list, idx) =>\r\n                                    <TaskList\r\n                                        toggleLabels={this.toggleLabels}\r\n                                        isLabelOpen={isLabelOpen}\r\n                                        key={list.id} list={list} listIdx={idx}\r\n                                        title={list.title} {...this.props}\r\n                                    />)}\r\n\r\n                                {provided.placeholder}\r\n\r\n\r\n                                <li className=\"add-list task-list-container flex column\">\r\n\r\n                                    <form {...this.addListHandlers} className={`add-list-form  flex column ${isCurrPopover && 'open'}`}>\r\n                                        <div className=\"input-wrapper align-center flex\">\r\n                                            {!isCurrPopover && <AddIcon />}\r\n                                            <input type=\"text\" value={listToAdd.title} className=\"add-list-title\" placeholder=\"Add New List\" name=\"title\" autoComplete=\"off\" ref={this.elListTitleRef} onChange={this.handleChange} />\r\n                                        </div>\r\n\r\n                                        <button type=\"submit\" className={`add-list-btn primary-btn ${isCurrPopover && 'open'}`}>Add list</button>\r\n                                    </form>\r\n\r\n                                </li>\r\n                            </ul>\r\n                        )}\r\n                    </Droppable>\r\n                </DragDropContext>\r\n\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        currPopover: state.popoverReducer.currPopover\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    updateBoard,\r\n}\r\n\r\nexport const Board = connect(mapStateToProps, mapDispatchToProps)(_Board)","import React, { Component } from 'react'\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport onClickOutside from 'react-onclickoutside'\r\n\r\nclass _BoardFilter extends Component {\r\n\r\n    state = {\r\n        isOpen: false\r\n    }\r\n\r\n    handleClickOutside = () => {\r\n        this.setState({ isOpen: false })\r\n    }\r\n\r\n    toggleSearch = (boolean = true) => {\r\n        this.setState({ isOpen: boolean })\r\n    }\r\n\r\n    render() {\r\n        const {isOpen} = this.state\r\n        return (\r\n            <div className={`board-filter flex align-center ${isOpen && 'open'}`}>\r\n                <input type=\"text\" name=\"txt\" className=\"filter-by-txt\" disabled={!isOpen} autoComplete=\"off\"/>\r\n                <SearchIcon onClick={this.toggleSearch} className=\"filter-icon\" />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport const BoardFilter = onClickOutside(_BoardFilter)","import React, { Component } from 'react'\r\nimport { boardService } from '../services/boardService'\r\nimport {PopoverHeader} from './PopoverHeader'\r\n\r\nexport class NotificationPopover extends Component {\r\n    state = {\r\n        notifications: []\r\n    }\r\n\r\n    componentDidMount() {\r\n        const notifications = boardService.getNotifications()\r\n        this.setState({ notifications })\r\n    }\r\n\r\n    onReadNotification = (notificationId) => {\r\n        const { notifications } = this.state\r\n        const notificationIdx = notifications.findIndex(notification => notification.id === notificationId)\r\n        notifications.splice(notificationIdx, 1)\r\n        this.setState({notifications})\r\n    }\r\n    render() {\r\n        const { notifications } = this.state\r\n        const { board, setCurrPopover } = this.props\r\n\r\n        if (!notifications) return <h1>Loading...</h1>\r\n        return (\r\n            <div className=\"notification-popover flex column\" onClick={ev => ev.stopPropagation()}>\r\n                <PopoverHeader title='Notifications' setCurrPopover={setCurrPopover}/>\r\n                <div className=\"notification-actions flex space-between\">\r\n                    <span className=\"view-all\">View All</span>\r\n                    <span className=\"mark-all-as-read\">Mark All as Read</span>\r\n                </div>\r\n                <section className=\"popover-section flex column\">\r\n                    <ul className=\"popover-section-list clear-list\">\r\n                        <h3 className=\"popover-section-header\">Your Notifications</h3>\r\n                        {notifications.map(notification => {\r\n                            return <li key={notification.id} className=\"popover-section-list-item flex\">\r\n                                <div className=\"checkbox-container \" title=\"mark-read\">\r\n                                    <input type=\"checkbox\" className={`read-notification-checkbox`} onChange={() => { this.onReadNotification(notification.id) }} />\r\n                                </div>\r\n                                <div className=\"notification-details\">\r\n                                    <div className=\"notification-details-header flex column justify-center align-start\">\r\n                                        <span className=\"notification-details-header-task-title\">{notification.txt}</span>\r\n                                        <div className=\"notification-details-header-board-title\">\r\n                                            <span>{board.title}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"notification-details-body\">\r\n                                        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Nesciunt odit voluptas, similique eius corporis reprehenderit officiis cupiditate eos beatae molestias.\r\n                                    </div>\r\n                                </div>\r\n                            </li>\r\n                        })}\r\n                    </ul>\r\n                </section>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport BoardMemberImg from './BoardMemberImg';\r\nimport { PopoverHeader } from './PopoverHeader'\r\nimport { boardService } from '../services/boardService';\r\nimport formatDistanceToNow from 'date-fns/formatDistanceToNow'\r\n\r\nexport class ActivityMenu extends Component {\r\n    state = {\r\n        activites: []\r\n    }\r\n\r\n    componentDidMount() {\r\n    }\r\n\r\n    onOpenTask = (taskId) => {\r\n        const list = boardService.getListByTaskId(this.props.board, taskId)\r\n        this.props.history.push(`/board/${this.props.board._id}/${list.id}/${taskId}`)\r\n    }\r\n    render() {\r\n        const { setCurrPopover } = this.props;\r\n        const { board } = { ...this.props },\r\n            { activities } = board\r\n        const isCurrPopover = this.props.currPopover === 'ACTIVITY_MENU'\r\n        return (\r\n            <div className={`activity-menu ${isCurrPopover && 'open'}`} onClick={ev => { ev.stopPropagation() }}>\r\n                <PopoverHeader title='Activities' setCurrPopover={setCurrPopover} />\r\n                <section className=\"popover-section flex column\">\r\n                    <ul className=\"popover-section-list clear-list\">\r\n                        {activities.map(activity => {\r\n                            return <li key={activity.id} className=\"popover-section-list-item\">\r\n                                <BoardMemberImg member={activity.byMember} />\r\n                                <div className=\"activity-txt\">\r\n                                    <span className=\"activity-by\">{activity.byMember.fullname} </span>\r\n                                    <span className=\"txt\">\r\n                                        {activity.txt} {activity.task && <span className=\"task-title\" onClick={() => { this.onOpenTask(activity.task.id) }}>{activity.task.title}</span>}</span>\r\n                                    <div className=\"activity-at\">\r\n                                        {formatDistanceToNow(new Date(activity.createdAt), { addSuffix: true })}\r\n                                    </div>\r\n                                </div>\r\n                            </li>\r\n                        })}\r\n                    </ul>\r\n                </section>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { BoardFilter } from './BoardFilter'\r\nimport { NotificationPopover } from './NotificationPopover'\r\nimport NotificationsIcon from '@material-ui/icons/NotificationsNone';\r\nimport MoreHorizOutlinedIcon from '@material-ui/icons/MoreHorizOutlined';\r\n// import DashboardOutlinedIcon from '@material-ui/icons/DashboardOutlined';\r\nimport DashboardOutlinedIcon from '@material-ui/icons/TimelineOutlined';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport { ActivityMenu } from './ActivityMenu'\r\nimport BoardMemberImg from './BoardMemberImg'\r\n\r\nexport class BoardHeader extends Component {\r\n\r\n    state = {\r\n        currBadgeCount: 0,\r\n    }\r\n\r\n\r\n    incNotificationBadge = (notification) => {\r\n        this.setState({ currBadgeCount: this.state.currBadgeCount + 1 }, () => {\r\n        })\r\n    }\r\n    render() {\r\n        const { board, setCurrPopover, currPopover, onToggleDashboard, className, isDashboardOpen } = this.props\r\n        const { members } = board\r\n        const { currBadgeCount } = this.state\r\n        const isCurrPopover = currPopover === 'NOTIFICATION_POPOVER'\r\n        // const isActivityCurrPopover = currPopover === 'ACTIVITY_MENU'\r\n        return (\r\n            <>\r\n                <header className={`board-header board-layout  ${className}`}>\r\n                    {isDashboardOpen && <ArrowBackIcon className=\"go-back-icon\" onClick={()=>onToggleDashboard()}/>}\r\n                    <div className=\"board-title\">{board.title}</div>\r\n                    <div className=\"members-nav-display flex\">\r\n                        {members.map(member => {\r\n                            return <div key={member._id} className=\"board-member-img-wrapper\">\r\n\r\n                                <BoardMemberImg member={member} />\r\n\r\n                            </div>\r\n                        })}\r\n                    </div>\r\n                    <ul className=\"board-nav clear-list flex\">\r\n                        <li className=\"board-filter-container\"><BoardFilter /></li>\r\n                        <li className={`notification-icon-container ${currBadgeCount && 'unread'}`}>\r\n                            <NotificationsIcon onClick={ev => {\r\n                                ev.stopPropagation()\r\n                                this.setState({ currBadgeCount: 0 })\r\n                                setCurrPopover('NOTIFICATION_POPOVER')\r\n                            }} />\r\n                        </li>\r\n                        <li title=\"dashboard\">\r\n                            <DashboardOutlinedIcon\r\n                                className=\"dashboard-icon\"\r\n                                onClick={() => onToggleDashboard()}\r\n                            />\r\n                        </li>\r\n                        <li title=\"activity\"><MoreHorizOutlinedIcon className=\"activity-menu-icon\" onClick={ev => {\r\n                            ev.stopPropagation()\r\n                            setCurrPopover('ACTIVITY_MENU')\r\n                        }} /></li>\r\n                    </ul>\r\n                </header>\r\n                {isCurrPopover\r\n                    &&\r\n                    <NotificationPopover {...this.props} />}\r\n                <ActivityMenu {...this.props} />\r\n            </>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { cloneDeep } from 'lodash'\r\nimport { boardService } from '../services/boardService'\r\nimport { formatRelative } from 'date-fns'\r\nimport { connect } from 'react-redux'\r\nimport { updateBoard } from '../store/actions/boardActions'\r\nimport { ChangeMembersPopover } from './ChangeMembersPopover'\r\nimport { LabelsPopover } from './LabelsPopover'\r\nimport AddIcon from '@material-ui/icons/Add';\r\n\r\nexport class _TaskDetailsInfo extends Component {\r\n    state = {\r\n        isMemberModalOpen: false,\r\n    }\r\n\r\n\r\n    onToggleMembersModal = () => {\r\n        this.setState({ isMemberModalOpen: !this.state.isMemberModalOpen })\r\n    }\r\n\r\n    onDateCheckChange = (listIdx, taskIdx, ev) => {\r\n        const { currBoard, updateBoard, user, task } = this.props\r\n        const copyBoard = cloneDeep(currBoard)\r\n        const taskDueDate = copyBoard.lists[listIdx].tasks[taskIdx].dueDate\r\n        taskDueDate.isDone = ev.target.checked\r\n        let txt\r\n        if (taskDueDate.isDone) {\r\n            txt = 'marked the due date complete on'\r\n        } else {\r\n            txt = 'marked the due date incomplete on'\r\n        }\r\n        const activity = {\r\n            user,\r\n            txt,\r\n            task,\r\n        }\r\n        updateBoard(copyBoard, activity)\r\n    }\r\n\r\n\r\n    render() {\r\n        const { currBoard, currPopver, togglePopover } = this.props\r\n        const { listId, taskId } = this.props.match.params\r\n        const { listIdx, taskIdx } = boardService.getListAndTaskIdxById(currBoard, listId, taskId)\r\n        const list = currBoard.lists[listIdx]\r\n        const task = currBoard.lists[listIdx].tasks[taskIdx]\r\n        const { isMemberModalOpen } = this.state\r\n        return (\r\n            <div className=\"details-info\">\r\n                <div className=\"flex\" style={{ flexWrap: 'wrap' }}>\r\n\r\n                    {task?.members?.length && <div className=\"card-detail\">\r\n                        <h3>Members</h3>\r\n                        <div className=\"member-imgs flex align-center\">\r\n\r\n                            {task.members.map(member => {\r\n                                return <div key={member._id} className=\"task-member-img\">\r\n                                    <img src={member.imgUrl} />\r\n                                </div>\r\n                            })}\r\n                            <div className=\"task-add-member small-btn-bgc\" title=\"Add Member\">\r\n                                {<AddIcon onClick={this.onToggleMembersModal} style={{ height: '32px' }} />}\r\n                                {isMemberModalOpen && <ChangeMembersPopover board={currBoard} list={list} task={task} setCurrPopover={this.onToggleMembersModal} currListIdx={this.props.currListIdx}\r\n                                    currTaskIdx={this.props.currTaskIdx}\r\n                                    updateBoard={this.props.updateBoard}\r\n                                />}\r\n                            </div>\r\n                        </div>\r\n                    </div>}\r\n                    {(task.labels?.length) ? <div className=\"card-detail detail-labels\">\r\n                        <h3>Labels</h3>\r\n                        <div className=\"task-labels flex\">\r\n                            {task.labels.map(label => {\r\n                                return <span onClick={() => togglePopover('labels')} key={label.id} className=\"task-label-preview flex align-center justify-center\" style={{ backgroundColor: label.color }}>\r\n                                    <span className=\"label-title\">{label?.title}</span>\r\n                                </span>\r\n                            })}\r\n                            <div className=\"task-add-label small-btn-bgc\" title=\"Add Label\">\r\n                                {<AddIcon onClick={() => togglePopover('labels')} style={{ height: '32px' }} />}\r\n                                {currPopver === 'labels' && <LabelsPopover setCurrPopover={() => togglePopover('')} {...this.props} />}\r\n                            </div>\r\n                        </div>\r\n                    </div> : ''}\r\n                    {task.dueDate?.timestamp && <div className=\"card-detail\">\r\n                        <h3>Due Date</h3>\r\n                        <div className=\"task-due-time flex align-center justify-center\">\r\n                            <span style={{ marginLeft: '5px' }}>\r\n                                <span className=\"date-checkbox\">\r\n                                    <input checked={task.dueDate.isDone} onChange={(ev) => this.onDateCheckChange(listIdx, taskIdx, ev)} type=\"checkbox\" />\r\n                                </span>\r\n                                {formatRelative(task?.dueDate?.timestamp, Date.now())}</span>\r\n                            <span className={`date-complete ${!task.dueDate.isDone && \"hidden\"}`}>COMPLETE</span>\r\n                        </div>\r\n                    </div>}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        currBoard: state.boardReducer.currBoard,\r\n        currListIdx: state.boardReducer.currListIdx,\r\n        currTaskIdx: state.boardReducer.currTaskIdx,\r\n\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    updateBoard\r\n}\r\n\r\nexport const TaskDetailsInfo = connect(mapStateToProps, mapDispatchToProps)(_TaskDetailsInfo)\r\n","import React, { Component } from 'react'\r\nimport { boardService } from '../services/boardService'\r\nimport { withRouter } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport { updateBoard } from '../store/actions/boardActions'\r\nimport { cloneDeep } from 'lodash'\r\nimport NotesOutlinedIcon from '@material-ui/icons/NotesOutlined'\r\nimport CloseIcon from '@material-ui/icons/Close'\r\n\r\nexport class _TaskDetailsDesc extends Component {\r\n    state = {\r\n        currTask: '',\r\n        isTxtAreaOpen: false,\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { task } = this.props\r\n        this.setState({ currTask: task })\r\n    }\r\n\r\n\r\n    handleInput = ({ target }) => {\r\n        const field = target.name\r\n        const value = target.value\r\n        this.setState(prevState => {\r\n            return {\r\n                currTask: {\r\n                    ...prevState.currTask,\r\n                    [field]: value\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    toggleControls = (boolean) => {\r\n        this.setState({ isTxtAreaOpen: boolean })\r\n    }\r\n\r\n    closeInput = () => {\r\n        this.setState({ currTask: this.props.task }, () => this.toggleControls(false))\r\n    }\r\n\r\n    saveDescription = (ev) => {\r\n        const { board, user } = this.props\r\n        const { listId, taskId } = this.props.match.params\r\n        const { listIdx, taskIdx } = boardService.getListAndTaskIdxById(board, listId, taskId)\r\n        let task = cloneDeep(this.props.task)\r\n        const currTask = cloneDeep(this.state.currTask)\r\n        task = currTask\r\n        const boardCopy = cloneDeep(board)\r\n        boardCopy.lists[listIdx].tasks[taskIdx] = task\r\n        const activity = {\r\n            user,\r\n            txt: `changed task description on`,\r\n            task,\r\n        }\r\n        this.props.updateBoard(boardCopy, activity)\r\n        this.toggleControls(false)\r\n    }\r\n\r\n    render() {\r\n        const { board, list, task } = this.props\r\n        const { currTask, isTxtAreaOpen } = this.state\r\n        return (\r\n            <div className=\"task-middle-details\">\r\n                <div className=\"details-description\">\r\n                    <NotesOutlinedIcon style={{ position: 'absolute', left: '-30px', top: '3px' }} />\r\n                    <h3 className=\"task-section-heading\">Description</h3>\r\n                    {(task.description)\r\n                        ? <textarea className=\"task-textarea\" style={{ fontSize: '16px', fontWeight: '400px', height: 'auto' }}\r\n                            value={currTask.description}\r\n                            name=\"description\"\r\n                            spellCheck=\"false\"\r\n                            onChange={this.handleInput}\r\n                            rows=\"3\"\r\n                            onFocus={() => this.toggleControls(true)}\r\n                            onBlur={() => this.saveDescription()}\r\n                        />\r\n                        : <textarea className=\"task-textarea\" style={{ fontSize: '16px', fontWeight: '400px', height: 'auto', backgroundColor: 'rgba(9,30,66,.04)' }}\r\n                            value={currTask.description}\r\n                            placeholder=\"Add a more detailed description...\"\r\n                            name=\"description\"\r\n                            spellCheck=\"false\"\r\n                            onChange={this.handleInput}\r\n                            rows=\"3\"\r\n                            onFocus={() => this.toggleControls(true)}\r\n                            onBlur={() => this.saveDescription()}\r\n                        />\r\n                    }\r\n                    <div className={`task-desc-buttons flex align-center ${!isTxtAreaOpen && \"hidden\"}`}>\r\n                        <button onClick={this.saveDescription} className=\"primary-btn\">Save</button>\r\n                        <CloseIcon onClick={() => this.closeInput()} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.currBoard,\r\n        currListIdx: state.boardReducer.currListIdx,\r\n        currTaskIdx: state.boardReducer.currTaskIdx,\r\n\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    updateBoard\r\n}\r\n\r\nexport const TaskDetailsDesc = connect(mapStateToProps, mapDispatchToProps)(withRouter(_TaskDetailsDesc))\r\n","import React, { Component } from 'react'\r\nimport { boardService } from '../services/boardService'\r\nimport { utilService } from '../services/utilService'\r\nimport { connect } from 'react-redux'\r\nimport { updateBoard } from '../store/actions/boardActions'\r\nimport { cloneDeep } from 'lodash'\r\nimport CheckBoxOutlinedIcon from '@material-ui/icons/CheckBoxOutlined';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\nimport DeleteOutlinedIcon from '@material-ui/icons/DeleteOutlined';\r\nimport { LoadingSpinner } from './LoadingSpinner'\r\n\r\nexport class _TaskDetailsChecklist extends Component {\r\n\r\n    state = {\r\n        checklists: [],\r\n        newTodo: {\r\n            txt: ''\r\n        },\r\n        newTodos: []\r\n\r\n\r\n    }\r\n\r\n    elTitleRef = React.createRef()\r\n\r\n\r\n    componentDidMount() {\r\n        const { checklists } = this.props.task\r\n        if (checklists) {\r\n\r\n            const copyChecklists = cloneDeep(checklists)\r\n            this.setState({ checklists: copyChecklists })\r\n        } else {\r\n            this.setState({ checklists: [] })\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { checklists } = this.props.task\r\n        if (prevProps.task.checklists !== checklists) {\r\n\r\n            const copyChecklists = cloneDeep(checklists)\r\n            this.setState({ checklists: copyChecklists })\r\n        }\r\n    }\r\n\r\n\r\n\r\n    handleInput = (idx, { target }) => {\r\n        const field = target.name\r\n        const value = target.value\r\n        const checkListToUpdate = cloneDeep(this.state.checklists[idx])\r\n        const checklistsCopy = cloneDeep(this.state.checklists)\r\n        checkListToUpdate[field] = value\r\n        checklistsCopy[idx] = checkListToUpdate\r\n        this.setState({ checklists: checklistsCopy })\r\n    }\r\n\r\n\r\n    handleCheckbox = (todoIdx, listIdx, ev) => {\r\n        const copyChecklists = cloneDeep(this.state.checklists)\r\n        const todo = copyChecklists[listIdx].todos[todoIdx]\r\n        todo.isDone = ev.target.checked\r\n        this.setState({ checklists: copyChecklists }, () => {\r\n            if (todo.isDone) {\r\n                this.onUpdateBoard('completed', todo.title)\r\n            } else {\r\n                this.onUpdateBoard('unchecked', todo.title)\r\n            }\r\n        })\r\n    }\r\n\r\n    handleTodoChange = (todoIdx, listIdx, ev) => {\r\n        const copyChecklists = cloneDeep(this.state.checklists)\r\n        copyChecklists[listIdx].todos[todoIdx].title = ev.target.value\r\n        this.setState({ checklists: copyChecklists })\r\n    }\r\n\r\n    percentDone = (checklist) => {\r\n        const doneTodos = checklist.todos.filter(todo => todo.isDone)\r\n        const percent = parseInt((doneTodos.length / checklist.todos.length) * 100)\r\n        return percent\r\n    }\r\n\r\n    handleNewTodo = (ev) => {\r\n        const checklistIdx = ev.target.name\r\n        const value = ev.target.value\r\n        const newTodos = [...this.state.newTodos]\r\n        newTodos[checklistIdx] = value\r\n        this.setState({ newTodos })\r\n    }\r\n\r\n    onEnterPress = ev => {\r\n        if (!ev.target.value) return\r\n        if (ev.keyCode === 13 && ev.shiftKey === false) {\r\n            ev.preventDefault()\r\n            if (ev.target.name === 'title') {\r\n                this.onUpdateBoard('changeTitle')\r\n            } else {\r\n                this.onUpdateBoard('changeTxt')\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    onUpdateBoard = async (activityType, title) => {\r\n        const { board, list, task } = this.props\r\n        const { checklists } = this.state\r\n        const boardCopy = cloneDeep(board)\r\n        const listIdx = boardService.getListIdxById(board, list.id)\r\n        const taskIdx = boardService.getTaskIdxById(list, task.id)\r\n        boardCopy.lists[listIdx].tasks[taskIdx].checklists = checklists\r\n        const { user } = this.props\r\n        let txt\r\n        if (activityType === 'completed') {\r\n            txt = `completed \"${title}\" on task `\r\n        } else if (activityType === 'changeTxt') {\r\n            txt = 'changed a todo in task'\r\n        } else if (activityType === 'unchecked') {\r\n            txt = `unchecked \"${title}\" on task`\r\n        } else if (activityType === 'remove') {\r\n            txt = `removed \"${title}\" from task`\r\n        } else if (activityType === 'newTodo') {\r\n            txt = `added a todo: \"${title}\" to task`\r\n        } else {\r\n            txt = 'changed checklist title in'\r\n        }\r\n        const activity = {\r\n            user,\r\n            txt,\r\n            task,\r\n        }\r\n        await this.props.updateBoard(boardCopy, activity)\r\n        this.elTitleRef.current?.blur()\r\n    }\r\n\r\n    onRemoveTodo = (todoIdx, listIdx, ev) => {\r\n        let copyChecklists = cloneDeep(this.state.checklists)\r\n        const todoToRemove = copyChecklists[listIdx].todos[todoIdx]\r\n        copyChecklists[listIdx].todos.splice(todoIdx, 1)\r\n        if (!copyChecklists[listIdx].todos.length) {\r\n            copyChecklists.splice(listIdx, 1)\r\n        }\r\n        this.setState({ checklists: copyChecklists }, () => this.onUpdateBoard('remove', todoToRemove.title))\r\n\r\n    }\r\n\r\n    onAddItem = (listIdx, ev) => {\r\n        if (!ev.target.value) return\r\n        if (ev.keyCode === 13 && ev.shiftKey === false) {\r\n            const todoToAdd = {\r\n                id: utilService.makeId(),\r\n                title: this.state.newTodos[listIdx],\r\n                isDone: false\r\n            }\r\n            const copyChecklists = cloneDeep(this.state.checklists)\r\n            copyChecklists[listIdx].todos.push(todoToAdd)\r\n            this.setState({ checklists: copyChecklists }, () => {\r\n                this.onUpdateBoard('newTodo', todoToAdd.title)\r\n                const newTodos = [...this.state.newTodos]\r\n                newTodos[listIdx] = ''\r\n                this.setState({ newTodos })\r\n            })\r\n        }\r\n    }\r\n\r\n    onDeleteChecklist = (checklistIdx) => {\r\n        const boardCopy = cloneDeep(this.props.board)\r\n        const { list, task, updateBoard } = this.props\r\n        const { listIdx, taskIdx } = boardService.getListAndTaskIdxById(boardCopy, list.id, task.id)\r\n        boardCopy.lists[listIdx].tasks[taskIdx].checklists.splice(checklistIdx, 1)\r\n        updateBoard(boardCopy)\r\n    }\r\n\r\n    render() {\r\n        const { checklists, newTodos } = this.state\r\n        const { percentDone } = this\r\n        if (!checklists) return <LoadingSpinner />\r\n        return (\r\n            <div className=\"task-checklist\">\r\n                { checklists?.map((checklist, listIdx) => {\r\n                    return <div className=\"checklist-header\">\r\n                        <CheckBoxOutlinedIcon style={{ position: 'absolute', left: '-30px', top: '3px' }} />\r\n                        <div className=\"flex align-center space-between\">\r\n\r\n                            <textarea style={{ width: '70%' }}\r\n                                className=\"task-textarea\"\r\n                                value={checklist.title}\r\n                                name=\"title\"\r\n                                onChange={(ev) => this.handleInput(listIdx, ev)}\r\n                                spellCheck=\"false\"\r\n                                onKeyDown={this.onEnterPress}\r\n                                ref={this.elTitleRef}\r\n                            />\r\n                            <span onClick={() => this.onDeleteChecklist(listIdx)}><button className=\"secondary-btn\" style={{ padding: '5px 8px' }}>Delete</button></span>\r\n                        </div>\r\n                        {checklist?.todos.length ? <LinearProgressWithLabel value={percentDone(checklist)} /> : ''}\r\n\r\n                        {checklist?.todos &&\r\n                            checklist.todos.map((todo, todoIdx) => {\r\n                                return <div className=\"task-todo-container flex align-center justify-center\">\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        name=\"checkbox\"\r\n                                        onChange={(ev) => this.handleCheckbox(todoIdx, listIdx, ev)}\r\n                                        checked={todo.isDone}\r\n                                    />\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        className={`${todo.isDone && \"checked\"} todo-title task-todo-input`}\r\n                                        value={todo.title}\r\n                                        onChange={(ev) => this.handleTodoChange(todoIdx, listIdx, ev)}\r\n                                        onKeyDown={this.onEnterPress}\r\n                                        autoComplete=\"false\"\r\n                                        onBlur={this.onUpdateBoard}\r\n                                    />\r\n                                    <DeleteOutlinedIcon className=\"todo-delete-btn\" onClick={(ev) => this.onRemoveTodo(todoIdx, listIdx, ev)} />\r\n                                </div>\r\n\r\n                            })\r\n\r\n                        }\r\n                        <input\r\n                            type=\"text\"\r\n                            autoComplete=\"false\"\r\n                            name={listIdx}\r\n                            placeholder=\"Add an item\"\r\n                            className=\"task-todo-input\"\r\n                            value={newTodos[listIdx]}\r\n                            onChange={this.handleNewTodo}\r\n                            onKeyDown={(ev) => this.onAddItem(listIdx, ev)}\r\n                            onBlur={() => {\r\n                                const newTodo = { txt: '' }\r\n                                this.setState({ newTodo })\r\n                            }}\r\n                        />\r\n                    </div>\r\n                })\r\n                }\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\nconst mapDispatchToProps = {\r\n    updateBoard,\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        currListIdx: state.boardReducer.currListIdx,\r\n    }\r\n}\r\n\r\nexport const TaskDetailsChecklist = connect(mapStateToProps, mapDispatchToProps)(_TaskDetailsChecklist)\r\n\r\n\r\nfunction LinearProgressWithLabel(props) {\r\n    return (\r\n        <Box display=\"flex\" alignItems=\"center\">\r\n            <Box width=\"100%\" mr={1}>\r\n                <LinearProgress variant=\"determinate\" {...props} />\r\n            </Box>\r\n            <Box minWidth={35}>\r\n                <Typography variant=\"body2\" color=\"textSecondary\">{`${Math.round(\r\n                    props.value,\r\n                )}%`}</Typography>\r\n            </Box>\r\n        </Box>\r\n    );\r\n}\r\n\r\nLinearProgressWithLabel.propTypes = {\r\n\r\n    value: PropTypes.number.isRequired,\r\n};\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        width: '100%',\r\n    },\r\n});\r\n\r\nexport default function LinearWithValueLabel() {\r\n    const classes = useStyles();\r\n    const [progress, setProgress] = React.useState(10);\r\n\r\n    React.useEffect(() => {\r\n        const timer = setInterval(() => {\r\n            setProgress((prevProgress) => (prevProgress >= 100 ? 10 : prevProgress + 10));\r\n        }, 800);\r\n        return () => {\r\n            clearInterval(timer);\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <LinearProgressWithLabel value={progress} />\r\n        </div>\r\n    );\r\n}\r\n\r\n","import React, { Component } from 'react'\r\nimport { formatDistance } from 'date-fns'\r\nimport { cloneDeep } from 'lodash'\r\nimport { boardService } from '../services/boardService'\r\nimport { utilService } from '../services/utilService'\r\nimport { connect } from 'react-redux'\r\nimport { updateBoard } from '../store/actions/boardActions'\r\nimport TextsmsOutlinedIcon from '@material-ui/icons/TextsmsOutlined';\r\nimport PermIdentityOutlinedIcon from '@material-ui/icons/PermIdentityOutlined';\r\nimport DeleteOutlinedIcon from '@material-ui/icons/DeleteOutlined';\r\nimport { LoadingSpinner } from './LoadingSpinner'\r\n\r\n\r\nexport class _TaskDetailsActivity extends Component {\r\n    state = {\r\n        isActivityOpen: false,\r\n        comment: {\r\n            txt: ''\r\n        },\r\n    }\r\n\r\n    onToggleDetails = () => {\r\n        this.setState({ isActivityOpen: !this.state.isActivityOpen })\r\n    }\r\n\r\n    handleComment = ({ target }) => {\r\n        const field = target.name\r\n        const value = target.value\r\n        this.setState(prevState => {\r\n            return {\r\n                comment: {\r\n                    ...prevState.comment,\r\n                    [field]: value\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    onEnterPress = ev => {\r\n        if (ev.keyCode === 13 && ev.shiftKey === false) {\r\n            ev.preventDefault()\r\n            this.saveComment(ev)\r\n        }\r\n    }\r\n\r\n    saveComment = async (ev) => {\r\n        ev.preventDefault()\r\n        const { txt } = this.state.comment\r\n        const { user } = this.props\r\n        const commentToAdd = {\r\n            id: utilService.makeId(),\r\n            createdAt: Date.now(),\r\n            txt\r\n        }\r\n        let byMember;\r\n        if (!user) {\r\n            byMember = { _id: 'guest', fullname: 'Guest', imgUrl: 'https://res.cloudinary.com/nofar/image/upload/v1611336021/psvaqtmh8ithfqe8ah27.png' }\r\n        } else {\r\n            byMember = { _id: user._id, fullname: user.fullname, imgUrl: user.imgUrl }\r\n        }\r\n        commentToAdd.byMember = byMember\r\n        const { currBoard, list, task } = this.props\r\n        const copyTask = cloneDeep(task)\r\n        const copyBoard = cloneDeep(currBoard)\r\n        if (copyTask.comments) {\r\n            copyTask.comments.unshift(commentToAdd)\r\n        } else {\r\n            copyTask.comments = []\r\n            copyTask.comments.unshift(commentToAdd)\r\n        }\r\n\r\n        const { taskIdx, listIdx } = boardService.getListAndTaskIdxById(currBoard, list.id, task.id)\r\n        copyBoard.lists[listIdx].tasks[taskIdx] = copyTask\r\n        const activity = {\r\n            user,\r\n            txt: `commented  \"${txt}\" on`,\r\n            task,\r\n        }\r\n        await this.props.updateBoard(copyBoard, activity)\r\n        const comment = { txt: '' }\r\n        this.setState({ comment })\r\n\r\n    }\r\n\r\n    onRemoveComment = async (listIdx, taskIdx, commentIdx) => {\r\n        const copyBoard = cloneDeep(this.props.currBoard)\r\n        copyBoard.lists[listIdx].tasks[taskIdx].comments.splice(commentIdx, 1)\r\n        const { user, task } = this.props\r\n        const activity = {\r\n            user,\r\n            txt: `removed a comment from`,\r\n            task,\r\n        }\r\n        await this.props.updateBoard(copyBoard, activity)\r\n    }\r\n\r\n    render() {\r\n        const { currBoard, user } = this.props\r\n        const { listId, taskId } = this.props.match.params\r\n        const { listIdx, taskIdx } = boardService.getListAndTaskIdxById(currBoard, listId, taskId)\r\n        const task = currBoard.lists[listIdx].tasks[taskIdx]\r\n        const taskComments = task?.comments\r\n        const taskActivities = currBoard.activities.filter(activity => {\r\n            if (activity.task) {\r\n                return activity.task.id === task.id\r\n            }\r\n        })\r\n        const { isActivityOpen, comment } = this.state\r\n        if (!taskActivities) return <LoadingSpinner />\r\n        return (\r\n            <div className=\"task-activity\">\r\n                <div className=\"activity-header flex\">\r\n                    <TextsmsOutlinedIcon style={{ position: 'absolute', left: '-30px', top: '3px' }} />\r\n                    <h3 className=\"task-section-heading\" style={{ padding: '4px 8px' }}>Activity</h3>\r\n                    <button onClick={this.onToggleDetails} className=\"secondary-btn\">{(isActivityOpen) ? 'Hide Activity' : 'Show Activity'}</button>\r\n                </div>\r\n                <div className=\"task-comments\">\r\n                    <div className=\"new-comment flex align-center\">\r\n                        <div className=\"task-member-img\">{(user) ? <img src={user.imgUrl} /> : <img src=\"https://res.cloudinary.com/nofar/image/upload/v1611336021/psvaqtmh8ithfqe8ah27.png\" />}</div>\r\n                        <form>\r\n                            <div className=\"comment-box\">\r\n                                <textarea\r\n                                    className=\"comment-textarea\"\r\n                                    placeholder=\"Write a comment...\"\r\n                                    value={comment.txt}\r\n                                    name=\"txt\"\r\n                                    onChange={this.handleComment}\r\n                                    onKeyDown={this.onEnterPress}\r\n                                >\r\n                                </textarea>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    {taskComments ?\r\n                        taskComments.map((comment, commentIdx) => {\r\n                            return <div key={comment.id} className=\"task-user-comment flex\">\r\n                                <div className=\"task-member-img\"><img src={comment.byMember.imgUrl} /></div>\r\n                                <div className=\"activity-info flex column justify-center\">\r\n                                    <p className=\"activity-txt\">\r\n                                        <span className=\"activity-member-name\">{comment.byMember.fullname} </span>\r\n                                        <div className=\"activity-date\" style={{ display: 'inline-block' }}><span>{formatDistance(comment.createdAt, Date.now())}</span></div>\r\n                                    </p>\r\n                                    <div className=\"comment-txt\">\r\n                                        <span>{comment.txt}</span>\r\n                                    </div>\r\n                                </div>\r\n                                {(comment.byMember._id === user?._id) ? <span onClick={() => this.onRemoveComment(listIdx, taskIdx, commentIdx)} className=\"comment-dlt-container\" ><DeleteOutlinedIcon className=\"comment-dlt-btn\" /></span> : ''}\r\n                            </div>\r\n                        })\r\n                        : ''}\r\n                </div>\r\n                <div className={`activity-container ${!isActivityOpen && \"hidden\"}`}>\r\n                    {taskActivities &&\r\n                        taskActivities.map(activity => {\r\n                            return <div key={activity.id} className=\"task-user-activity flex\">\r\n                                <div className=\"task-member-img\"><img src={activity.byMember.imgUrl} /></div>\r\n                                <div className=\"activity-info flex column justify-center\">\r\n                                    <p className=\"activity-txt\">\r\n                                        <span className=\"activity-member-name\">{activity.byMember.fullname} </span>\r\n                                        <span>{activity.txt} </span>\r\n                                        <span className=\"activity-task-title\">{activity.task.title}</span>\r\n                                    </p>\r\n                                    <div className=\"activity-date\">\r\n                                        <span>{formatDistance(activity.createdAt, Date.now())}</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        })\r\n                    }\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        currBoard: state.boardReducer.currBoard,\r\n        user: state.userReducer.user\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    updateBoard\r\n}\r\n\r\nexport const TaskDetailsActivity = connect(mapStateToProps, mapDispatchToProps)(_TaskDetailsActivity)\r\n","import React, { Component } from 'react'\r\nimport ImageOutlinedIcon from '@material-ui/icons/ImageOutlined'\r\nimport DeleteOutlinedIcon from '@material-ui/icons/DeleteOutlined';\r\nimport { boardService } from '../services/boardService'\r\nimport { cloneDeep } from 'lodash'\r\n\r\n\r\n\r\nexport class TaskDetailsAttachments extends Component {\r\n\r\n    onDeleteImg = (imgIdx) => {\r\n        const { board, list, task, updateBoard, user } = this.props\r\n        const { listIdx, taskIdx } = boardService.getListAndTaskIdxById(board, list.id, task.id)\r\n        const boardCopy = cloneDeep(board)\r\n        boardCopy.lists[listIdx].tasks[taskIdx].attachments.splice(imgIdx, 1)\r\n        const activity = {\r\n            user,\r\n            txt: `removed an image from`,\r\n            task,\r\n        }\r\n        updateBoard(boardCopy, activity)\r\n\r\n    }\r\n    render() {\r\n        const { board, list, task } = this.props\r\n        const taskImages = task.attachments\r\n        return (\r\n            <section className=\"attachments\">\r\n                <div className=\"details-images\">\r\n                    <ImageOutlinedIcon style={{ position: 'absolute', left: '-30px', top: '3px' }} />\r\n                    <h3 className=\"task-section-heading\">Images</h3>\r\n                    {(taskImages ? <div className=\"img-list\">\r\n                        {taskImages.map((img, imgIdx) => {\r\n                            return <div className=\"img-preview flex\" style={{ backgroundImage: `url('${img}')` }}>\r\n                                <DeleteOutlinedIcon onClick={() => this.onDeleteImg(imgIdx)} className=\"todo-delete-btn\" style={{ position: 'absolute', right: '0' }} />\r\n                            </div>\r\n                        })}\r\n                    </div>\r\n\r\n                        : ''\r\n                    )}\r\n                </div>\r\n            </section>\r\n        )\r\n    }\r\n}\r\n","import axios from 'axios'\r\n\r\n\r\nexport const cloudinaryService = {\r\n  uploadImg\r\n}\r\n\r\n\r\nasync function uploadImg(file) {\r\n\r\n  console.log('Clouddddddddd');\r\n\r\n  const CLOUD_NAME = \"nofar\"\r\n  const UPLOAD_URL = `https://api.cloudinary.com/v1_1/nofar/image/upload`\r\n\r\n  const formData = new FormData();\r\n  formData.append('file', file)\r\n  formData.append('upload_preset', 'yn9mpntb');\r\n  try {\r\n    const res = await axios(UPLOAD_URL, {\r\n      method: 'POST',\r\n      data: formData\r\n    })\r\n    const data = res.data\r\n    console.log('data:', data);\r\n    return data\r\n\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport LabelOutlinedIcon from '@material-ui/icons/LabelOutlined'\r\nimport ChangeMembersIcon from '@material-ui/icons/PeopleOutline'\r\nimport QueryBuilderOutlinedIcon from '@material-ui/icons/QueryBuilderOutlined'\r\nimport CheckBoxOutlinedIcon from '@material-ui/icons/CheckBoxOutlined'\r\nimport ImageOutlinedIcon from '@material-ui/icons/ImageOutlined'\r\nimport ArrowRightAltOutlinedIcon from '@material-ui/icons/ArrowRightAltOutlined'\r\nimport DeleteOutlineOutlinedIcon from '@material-ui/icons/DeleteOutlineOutlined'\r\nimport FileCopyOutlinedIcon from '@material-ui/icons/FileCopyOutlined'\r\nimport { ChangeMembersPopover } from './ChangeMembersPopover'\r\nimport { LabelsPopover } from './LabelsPopover'\r\nimport { DateTimePopover } from './DateTimePopover'\r\nimport { MoveTaskPopover } from './MoveTaskPopover'\r\nimport { CopyTaskPopover } from './CopyTaskPopover'\r\nimport { cloneDeep } from 'lodash'\r\nimport { utilService } from '../services/utilService'\r\nimport { cloudinaryService } from '../services/cloudinaryService'\r\nimport { parseISO } from 'date-fns'\r\nimport { getTime } from 'date-fns'\r\nimport { formatRelative } from 'date-fns'\r\nimport { boardService } from '../services/boardService';\r\n\r\nexport class TaskSidebar extends Component {\r\n\r\n    state = {\r\n        dueDate: {\r\n            timestamp: '',\r\n            isDone: false\r\n        },\r\n        taskImgUrl: ''\r\n    }\r\n\r\n    onAddNewList = () => {\r\n        const { board, list, task, updateBoard, user } = this.props\r\n        const { listIdx, taskIdx } = boardService.getListAndTaskIdxById(board, list.id, task.id)\r\n        const copyBoard = cloneDeep(board)\r\n        const newChecklist = {\r\n            \"id\": utilService.makeId(),\r\n            \"title\": \"Checklist\",\r\n            \"todos\": []\r\n        }\r\n        if (!copyBoard.lists[listIdx].tasks[taskIdx].checklists) {\r\n            copyBoard.lists[listIdx].tasks[taskIdx].checklists = []\r\n        }\r\n        copyBoard.lists[listIdx].tasks[taskIdx].checklists.push(newChecklist)\r\n        const activity = {\r\n            user,\r\n            txt: `added ${newChecklist.title} to`,\r\n            task,\r\n        }\r\n        updateBoard(copyBoard, activity)\r\n        console.log('after update')\r\n    }\r\n\r\n    onRemoveTask = async () => {\r\n        const { board, list, task, updateBoard, user } = this.props\r\n        const { listIdx, taskIdx } = boardService.getListAndTaskIdxById(board, list.id, task.id)\r\n        const copyBoard = cloneDeep(board)\r\n        copyBoard.lists[listIdx].tasks.splice(taskIdx, 1)\r\n        const activity = {\r\n            user,\r\n            txt: `removed task`,\r\n            task,\r\n        }\r\n        this.props.history.push(`/board/${board._id}`)\r\n        await updateBoard(copyBoard, activity)\r\n    }\r\n\r\n    onDateChange = (ev) => {\r\n        let parsedString = parseISO(ev.target.value)\r\n        let timestamp = getTime(parsedString)\r\n        const dueDate = {\r\n            timestamp,\r\n            isDone: false\r\n        }\r\n        this.setState({ dueDate })\r\n    }\r\n\r\n    onSaveDate = () => {\r\n\r\n        const { board, list, task, updateBoard, user } = this.props\r\n        const { listIdx, taskIdx } = boardService.getListAndTaskIdxById(board, list.id, task.id)\r\n        const copyBoard = cloneDeep(board)\r\n        if (!this.state.dueDate.timestamp) return\r\n        copyBoard.lists[listIdx].tasks[taskIdx].dueDate = this.state.dueDate\r\n        const activity = {\r\n            user,\r\n            txt: `set a due date to ${formatRelative(this.state.dueDate.timestamp, Date.now())} on`,\r\n            task,\r\n        }\r\n        updateBoard(copyBoard, activity)\r\n        this.props.togglePopover('')\r\n    }\r\n\r\n    onUploadImg = async ev => {\r\n        try {\r\n            const { secure_url } = await cloudinaryService.uploadImg(ev.target.files[0])\r\n            this.setState({ taskImgUrl: secure_url }, async () => {\r\n                const { board, list, task, updateBoard, user } = this.props\r\n                const { listIdx, taskIdx } = boardService.getListAndTaskIdxById(board, list.id, task.id)\r\n                const copyBoard = cloneDeep(board)\r\n                let currTask = copyBoard.lists[listIdx].tasks[taskIdx]\r\n                if (currTask.attachments?.length) {\r\n                    currTask.attachments = [\r\n                        ...copyBoard.lists[listIdx].tasks[taskIdx].attachments,\r\n                        this.state.taskImgUrl\r\n                    ]\r\n                } else {\r\n                    currTask.attachments = []\r\n                    currTask.attachments.push(this.state.taskImgUrl)\r\n                }\r\n                const activity = {\r\n                    user,\r\n                    txt: `uploaded an image to`,\r\n                    task,\r\n                }\r\n                await updateBoard(copyBoard, activity)\r\n            })\r\n\r\n        } catch (err) {\r\n            this.setState({ msg: 'Couldnt upload your image try again' })\r\n            console.log('problem loading the img ', err);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { currPopover, togglePopover } = this.props\r\n        return (\r\n            <aside className=\"sidebar flex column\">\r\n                <h3 className=\"sidebar-heading\">Actions</h3>\r\n                <div className=\"sidebar-actions flex column\">\r\n                    <div className=\"action-container flex align-center\" onClick={() => togglePopover('labels')} >\r\n                        <span className=\"action-icon\"><LabelOutlinedIcon /></span>\r\n                        <span className=\"action-txt\">Labels</span>\r\n                        {currPopover === 'labels' && <LabelsPopover setCurrPopover={() => togglePopover('')} {...this.props} />}\r\n\r\n                    </div>\r\n                    <div className=\"action-container flex align-center\" onClick={() => togglePopover('members')}>\r\n                        <span className=\"action-icon\"><ChangeMembersIcon /></span>\r\n                        <span className=\"action-txt\">Members</span>\r\n                        {currPopover === 'members' && <ChangeMembersPopover setCurrPopover={() => togglePopover('')} {...this.props} />}\r\n                    </div>\r\n                    <div className=\"action-container flex align-center\" onClick={() => togglePopover('date')}>\r\n                        <span className=\"action-icon\"><QueryBuilderOutlinedIcon /></span>\r\n                        <span className=\"action-txt\">Due Date</span>\r\n                        {currPopover === 'date' && <DateTimePopover\r\n                            onClick={(ev) => ev.stopPropagation()}\r\n                            setCurrPopover={() => togglePopover('')}\r\n                            onDateChange={this.onDateChange}\r\n                            onSaveDate={this.onSaveDate}\r\n                            {...this.props} />}\r\n\r\n                    </div>\r\n                    <div className=\"action-container flex align-center\" onClick={this.onAddNewList}>\r\n                        <span className=\"action-icon\"><CheckBoxOutlinedIcon /></span>\r\n                        <span className=\"action-txt\">Checklist</span>\r\n                    </div>\r\n                    <div className=\"action-container flex align-center\">\r\n                        <label className=\"action-icon\" style={{ width: '100%', cursor: 'pointer' }}>  <ImageOutlinedIcon className=\"add-img-icon\" />\r\n                            <input onChange={this.onUploadImg} type=\"file\" hidden />\r\n                            <span className=\"action-txt\">Image</span>\r\n                        </label>\r\n                    </div>\r\n                    <div className=\"action-container flex align-center\" onClick={() => togglePopover('move')}>\r\n                        <span className=\"action-icon\"><ArrowRightAltOutlinedIcon /></span>\r\n                        <span className=\"action-txt\">Move</span>\r\n                        {currPopover === 'move' && <MoveTaskPopover setCurrPopover={() => togglePopover('')} {...this.props} />}\r\n                    </div>\r\n                    <div className=\"action-container flex align-center\" onClick={() => togglePopover('copy')}>\r\n                        <span className=\"action-icon\"><FileCopyOutlinedIcon /></span>\r\n                        <span className=\"action-txt\">Copy</span>\r\n                        {currPopover === 'copy' && <CopyTaskPopover setCurrPopover={() => togglePopover('')} {...this.props} />}\r\n                    </div>\r\n                    <div className=\"action-container flex align-center\" onClick={this.onRemoveTask}>\r\n                        <span className=\"action-icon\"><DeleteOutlineOutlinedIcon /></span>\r\n                        <span className=\"action-txt\">Delete</span>\r\n                    </div>\r\n                </div>\r\n            </aside>\r\n        )\r\n    }\r\n}\r\n","import React, { Component, Fragment } from 'react'\r\nimport { boardService } from '../services/boardService'\r\nimport { TaskDetailsInfo } from './TaskDetailsInfo'\r\nimport { TaskDetailsDesc } from './TaskDetailsDesc'\r\nimport { TaskDetailsChecklist } from './TaskDetailsChecklist'\r\nimport { TaskDetailsActivity } from './TaskDetailsActivity'\r\nimport { TaskDetailsAttachments } from './TaskDetailsAttachments'\r\nimport { TaskSidebar } from './TaskSidebar'\r\nimport { cloneDeep } from 'lodash'\r\nimport { connect } from 'react-redux'\r\nimport { updateBoard, toggleTask, toggleOverlay } from '../store/actions/boardActions'\r\nimport { withRouter } from 'react-router-dom'\r\nimport DvrOutlinedIcon from '@material-ui/icons/DvrOutlined';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nexport class _TaskDetails extends Component {\r\n    state = {\r\n        isDetailsOpen: false,\r\n        currPopover: '',\r\n        board: {},\r\n        list: {},\r\n        task: {}\r\n\r\n    }\r\n\r\n    elTitleRef = React.createRef()\r\n\r\n    componentDidMount() {\r\n        const { listId, taskId } = this.props.match.params // Whenever someone opens task through URL\r\n        const details = this.getDetails()\r\n        if (details) {\r\n\r\n            const { board, list, task } = details\r\n            this.getCurrTask(board._id, taskId)\r\n            this.setState({ board, list, task })\r\n        }\r\n\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        const { listId, taskId } = this.props.match.params\r\n        const details = this.getDetails()\r\n        if (details) {\r\n\r\n            const { board, list, task } = details\r\n            if (taskId && listId && !this.state.isDetailsOpen) { // When task is clicked on board\r\n                this.setState({ isDetailsOpen: true, board, list, task }, async () => {\r\n                    this.getCurrTask(board._id, taskId)\r\n                    if (!this.props.isOverlayOpen) {\r\n                        await this.props.toggleOverlay()\r\n                    }\r\n\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.props.toggleOverlay()\r\n    }\r\n\r\n    // TRY TO REFACTOR\r\n    getDetails = () => {\r\n        const { listId, taskId } = this.props.match.params\r\n        if (listId && taskId) {\r\n            const { board } = { ...this.props }\r\n            const { listIdx, taskIdx } = boardService.getListAndTaskIdxById(board, listId, taskId)\r\n            const list = board.lists[listIdx]\r\n            const task = list.tasks[taskIdx]\r\n            return { board, list, task }\r\n        }\r\n    }\r\n\r\n    handleTitle = ({ target }) => {\r\n        const field = target.name\r\n        const value = target.value\r\n        const copyTask = cloneDeep(this.state.task)\r\n        copyTask.title = value\r\n        this.setState({ task: copyTask })\r\n    }\r\n\r\n    onEnterPress = ev => {\r\n        if (ev.keyCode === 13 && ev.shiftKey === false) {\r\n            ev.preventDefault()\r\n            this.onSubmitForm(ev)\r\n        }\r\n    }\r\n\r\n    onSubmitForm = async (ev) => {\r\n        ev.preventDefault()\r\n        const { board, list, task } = this.state\r\n        if (!task.title) return\r\n        const boardCopy = { ...this.state.board }\r\n        const currListIdx = boardService.getListIdxById(board, list.id)\r\n        const taskIdx = boardCopy.lists[currListIdx].tasks.findIndex(currTask => currTask.id === task.id)\r\n        boardCopy.lists[currListIdx].tasks[taskIdx] = task\r\n        const { user } = this.props\r\n        const activity = {\r\n            user,\r\n            txt: `has changed task (${task.title}) title`,\r\n            task,\r\n        }\r\n        this.elTitleRef.current.blur()\r\n        await this.props.updateBoard(boardCopy, activity)\r\n    }\r\n\r\n    getCurrTask = async (boardId, taskId) => {\r\n        const task = await boardService.getTaskById(boardId, taskId)\r\n        this.setState({ task })\r\n    }\r\n\r\n    onCloseModal = (ev) => {\r\n        ev.preventDefault()\r\n        ev.stopPropagation()\r\n        const { board } = this.state\r\n        this.setState({ isDetailsOpen: false }, async () => {\r\n            this.props.history.push(`/board/${board._id}`)\r\n        })\r\n    }\r\n\r\n    togglePopover = (name) => {\r\n        const { currPopover } = this.state\r\n        if (currPopover === name) {\r\n            this.setState({ currPopover: '' })\r\n        } else {\r\n            this.setState({ currPopover: name })\r\n\r\n        }\r\n    }\r\n\r\n    onOverlayClick = () => {\r\n        const { board } = this.props\r\n        this.props.history.push(`/board/${board._id}`)\r\n    }\r\n\r\n\r\n    render() {\r\n        const { isDetailsOpen, currPopover } = this.state\r\n        const { board, user } = this.props\r\n        const { listId, taskId } = this.props.match.params\r\n        const { listIdx, taskIdx } = boardService.getListAndTaskIdxById(board, listId, taskId)\r\n        const currList = board.lists[listIdx]\r\n        const currTask = board.lists[listIdx].tasks[taskIdx]\r\n\r\n\r\n        if (!currTask) return <div>Loading details...</div>\r\n        return (\r\n            <section onClick={() => currPopover ? this.togglePopover('') : ''} className=\"task-details\">\r\n                {this.state.isDetailsOpen &&\r\n                    <div className={`${this.props.isOverlayOpen && \"main-overlay\"} ${!isDetailsOpen && \"hidden\"}`} onClick={this.onOverlayClick}>\r\n                        <div className=\"details-modal flex\" onClick={(ev) => {\r\n                            ev.stopPropagation()\r\n                            if (currPopover) this.togglePopover('')\r\n                        }}>\r\n                            <div className=\"main-details flex column\">\r\n\r\n                                <div className=\"details-header flex column\">\r\n                                    <form className=\"flex\">\r\n                                        <DvrOutlinedIcon style={{ position: 'absolute', left: '-30px', top: '3px' }} />\r\n                                        <textarea onKeyDown={this.onEnterPress} ref={this.elTitleRef} className=\"task-textarea\"\r\n                                            name=\"title\"\r\n                                            onChange={this.handleTitle}\r\n                                            value={this.state.task?.title}\r\n                                            spellCheck=\"false\"\r\n                                            onBlur={this.onSubmitForm}\r\n                                        />\r\n                                        <div className=\"task-details-close-btn close-btn flex align-center justify-center\">\r\n                                            <CloseIcon onClick={this.onCloseModal} />\r\n                                        </div>\r\n                                    </form>\r\n                                    <p>in list <span className=\"details-list-name\">{currList?.title}</span></p>\r\n                                </div>\r\n                                <div className=\"details-info\">\r\n                                    <TaskDetailsInfo board={board} list={currList} task={currTask} togglePopover={this.togglePopover} currPopover={this.state.currPopover}  {...this.props} />\r\n                                </div>\r\n                                <div className=\"details-description\">\r\n                                    <TaskDetailsDesc board={board} list={currList} task={currTask} user={user} />\r\n                                </div>\r\n                                {currTask.attachments?.length ?\r\n                                    <div className=\"details-attachments\">\r\n                                        <TaskDetailsAttachments board={board} list={currList} task={currTask} {...this.props} />\r\n                                    </div>\r\n                                    : ''\r\n                                }\r\n                                <div className=\"details-checklist\">\r\n                                    <TaskDetailsChecklist board={board} list={currList} task={currTask} user={user} />\r\n                                </div>\r\n                                <div className=\"details-activity\">\r\n                                    <TaskDetailsActivity board={board} list={currList} task={currTask} {...this.props} />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"details-buttons\">\r\n\r\n\r\n                                <div className=\"task-sidebar\">\r\n                                    <TaskSidebar board={board} list={currList} task={currTask} togglePopover={this.togglePopover} currPopover={this.state.currPopover} {...this.props} />\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                }\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    updateBoard,\r\n    toggleTask,\r\n    toggleOverlay\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        isTaskOpen: state.boardReducer.isTaskOpen,\r\n        board: state.boardReducer.currBoard,\r\n        currListIdx: state.boardReducer.currListIdx,\r\n        currTaskIdx: state.boardReducer.currTaskIdx,\r\n        isOverlayOpen: state.boardReducer.isOverlayOpen,\r\n        user: state.userReducer.user\r\n    }\r\n}\r\n\r\nexport const TaskDetails = connect(mapStateToProps, mapDispatchToProps)(withRouter(_TaskDetails))","import io from 'socket.io-client'\r\n\r\nimport { storageService } from '../services/storageService.js'\r\nconst baseUrl = (process.env.NODE_ENV === 'production') ? '' : 'http://localhost:3031'\r\nexport const socketService = createSocketService()\r\n// socketService.setup()\r\n// export const socketService = createDummySocketService()\r\n\r\nwindow.socketService = socketService\r\nconst MSG_STORAGE_KEY = 'msgDB'\r\n\r\nfunction createSocketService() {\r\n    var socket;\r\n\r\n    const socketService = {\r\n        setup() {\r\n            socket = io(baseUrl, {\r\n                withCredentials: true,\r\n            });\r\n        },\r\n        on(eventName, cb) {\r\n            socket.on(eventName, cb)\r\n        },\r\n        off(eventName, cb) {\r\n            socket.off(eventName, cb)\r\n        },\r\n        emit(eventName, data) {\r\n            socket.emit(eventName, data)\r\n        },\r\n        terminate() {\r\n            socket = null\r\n        },\r\n        saveMsgsToStorage(msgs) {\r\n            storageService.store(MSG_STORAGE_KEY, msgs)\r\n        },\r\n        getMsgsFromStorage() {\r\n            return storageService.load(MSG_STORAGE_KEY)\r\n        }\r\n        \r\n\r\n    }\r\n    return socketService\r\n}\r\n\r\n// eslint-disable-next-line\r\nfunction createDummySocketService() {\r\n    var listenersMap = {}\r\n    const socketService = {\r\n        setup() {\r\n            listenersMap = {}\r\n        },\r\n        terminate() {\r\n            this.setup()\r\n        },\r\n        on(eventName, cb) {\r\n            listenersMap[eventName] = [...(listenersMap[eventName]) || [], cb]\r\n        },\r\n        off(eventName, cb) {\r\n            if (!listenersMap[eventName]) return\r\n            listenersMap[eventName] = listenersMap[eventName].filter(l => l !== cb)\r\n        },\r\n        emit(eventName, data) {\r\n            if (!listenersMap[eventName]) return\r\n            listenersMap[eventName].forEach(listener => {\r\n                listener(data)\r\n            })\r\n        },\r\n        debugMsg() {\r\n            this.emit('chat addMsg', { from: 'Someone', txt: 'Aha it worked!' })\r\n        },\r\n    }\r\n    return socketService\r\n}\r\n\r\n// Basic Tests\r\n// function cb(x) {console.log(x)}\r\n// socketService.on('baba', cb)\r\n// socketService.emit('baba', 'DATA')\r\n// socketService.off('baba', cb)\r\n","import { zonedTimeToUtc, utcToZonedTime, format } from 'date-fns-tz'\r\n\r\nexport const dashboardService = {\r\n    getTasksPerPeopleData,\r\n    getActivityPerDayData,\r\n    getTasksPerDayData\r\n}\r\n\r\nfunction getTasksPerPeopleData(board) {\r\n    const labels = board.members.map(member => member.fullname)\r\n    var boardTasks = []\r\n    board.lists.forEach(list => {\r\n        boardTasks = [...boardTasks, ...list.tasks]\r\n    })\r\n    const tasksPerPerson = boardTasks.reduce((acc, task) => {\r\n        task.members?.length && task.members.forEach(member => {\r\n            const currIdx = labels.indexOf(member.fullname)\r\n            acc[currIdx] = acc[currIdx] ? acc[currIdx] + 1 : 1\r\n        })\r\n\r\n        return acc\r\n    }, [])\r\n    return {\r\n        labels, tasksPerPerson, data: {\r\n            labels,\r\n            datasets: [{\r\n                data: tasksPerPerson,\r\n                backgroundColor: [\r\n                    '#FF6384',\r\n                    '#36A2EB',\r\n                    '#FFCE56'\r\n                ],\r\n                hoverBackgroundColor: [\r\n                    '#FF6384',\r\n                    '#36A2EB',\r\n                    '#FFCE56'\r\n                ]\r\n            }]\r\n        }\r\n    }\r\n}\r\n\r\nfunction getActivityPerDayData(board) {\r\n    var labels = []\r\n\r\n    const timeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;\r\n    const date = new Date()\r\n    const zonedDate = utcToZonedTime(date, timeZone)\r\n\r\n    for (var i = 0; i < 6; i++) {\r\n        labels[i] = format(zonedDate, 'LLL') + ' ' + (zonedDate.getDate() - i)\r\n    }\r\n\r\n    const activityPerDay = board.activities.reduce((acc, activity) => {\r\n        const zonedCreatedAt = utcToZonedTime(new Date(activity.createdAt), timeZone)\r\n        const formattedTime = format(zonedCreatedAt, 'LLL') + ' ' + (zonedCreatedAt.getDate())\r\n        const currIdx = labels.indexOf(formattedTime)\r\n        if (currIdx !== -1) acc[currIdx] = acc[currIdx] ? acc[currIdx] + 1 : 1\r\n        return acc\r\n    }, [])\r\n\r\n    return {\r\n        labels,\r\n        datasets: [\r\n            {\r\n                label: 'Activity',\r\n                data: activityPerDay,\r\n                barPercentage: 0.8,\r\n                borderColor: [\r\n                    '#FF6384',\r\n                    '#36A2EB',\r\n                    '#FFCE56',\r\n                    '#c377e0',\r\n                    '#FFCE56',\r\n                    '#FFCE56',\r\n                    '#FFCE56',\r\n                ],\r\n                borderWidth: 2,\r\n                backgroundColor: [\r\n                    '#FF638450',\r\n                    '#36A2EB50',\r\n                    '#FFCE5650',\r\n                    '#c377e050',\r\n                    '#FFCE56',\r\n                    '#FFCE56',\r\n                    '#FFCE56',\r\n                ],\r\n                hoverBackgroundColor: [\r\n                    '#FF6384',\r\n                    '#36A2EB',\r\n                    '#FFCE56',\r\n                    '#c377e0',\r\n                    '#FFCE56',\r\n                    '#FFCE56',\r\n                    '#FFCE56',\r\n                ]\r\n            }\r\n        ]\r\n    }\r\n}\r\n\r\nfunction getTasksPerDayData(board) {\r\n    var labels = []\r\n\r\n    const timeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;\r\n    const date = new Date()\r\n    const zonedDate = utcToZonedTime(date, timeZone)\r\n\r\n    for (var i = 0; i < 6; i++) {\r\n        labels[i] = format(zonedDate, 'LLL') + ' ' + (zonedDate.getDate() - i)\r\n    }\r\n\r\n    var boardTasks = []\r\n    board.lists.forEach(list => {\r\n        boardTasks = [...boardTasks, ...list.tasks]\r\n    })\r\n\r\n    const tasksPerDay = boardTasks.reduce((acc, task) => {\r\n        const zonedCreatedAt = utcToZonedTime(new Date(task.createdAt), timeZone)\r\n        const formattedTime = format(zonedCreatedAt, 'LLL') + ' ' + (zonedCreatedAt.getDate())\r\n        const currIdx = labels.indexOf(formattedTime)\r\n        if (currIdx !== -1) acc[currIdx] = acc[currIdx] ? acc[currIdx] + 1 : 1\r\n        return acc\r\n    }, [])\r\n\r\n    return {\r\n        labels,\r\n        datasets: [\r\n            {\r\n                label: 'Tasks',\r\n                data: tasksPerDay,\r\n                barPercentage: 0.8,\r\n                borderColor: [\r\n                    '#FF6384',\r\n                    '#36A2EB',\r\n                    '#FFCE56',\r\n                    '#FFCE56',\r\n                    '#FFCE56',\r\n                    '#FFCE56',\r\n                    '#FFCE56',\r\n                ],\r\n                borderWidth: 2,\r\n                backgroundColor: [\r\n                    '#FF638450',\r\n                    '#36A2EB50',\r\n                    '#FFCE56',\r\n                    '#FFCE56',\r\n                    '#FFCE56',\r\n                    '#FFCE56',\r\n                    '#FFCE56',\r\n                ],\r\n                hoverBackgroundColor: [\r\n                    '#FF6384',\r\n                    '#36A2EB',\r\n                    '#FFCE56',\r\n                    '#FFCE56',\r\n                    '#FFCE56',\r\n                    '#FFCE56',\r\n                    '#FFCE56',\r\n                ]\r\n            }\r\n        ]\r\n    }\r\n}\r\n\r\n","import { Component } from 'react';\r\nimport { Doughnut } from 'react-chartjs-2'\r\nimport { dashboardService } from '../../services/dashboardService'\r\n\r\nexport default class MyChart extends Component {\r\n    state = {\r\n        data: {\r\n            labels: [\r\n                'Adult Toys',\r\n                'Kid Toys',\r\n                'Yellow'\r\n            ],\r\n            datasets: [{\r\n                data: [300, 50, 100],\r\n                backgroundColor: [\r\n                    '#FF6384',\r\n                    '#36A2EB',\r\n                    '#FFCE56'\r\n                ],\r\n                hoverBackgroundColor: [\r\n                    '#FF6384',\r\n                    '#36A2EB',\r\n                    '#FFCE56'\r\n                ]\r\n            }]\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        // const { board } = this.props,\r\n        //     { data } = dashboardService.getTasksPerPeopleData(board)\r\n        // this.setState({ data })\r\n    }\r\n\r\n    render() {\r\n        const { board } = this.props,\r\n        { data } = dashboardService.getTasksPerPeopleData(board)\r\n        // const { data } = this.state\r\n        return (\r\n            <div className=\"tasks-per-person\">\r\n                <h3>Tasks per Person</h3>\r\n                <Doughnut data={data} height={400} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n","import { Bar } from 'react-chartjs-2'\r\nimport { dashboardService } from '../../services/dashboardService'\r\n\r\nimport React, { Component } from 'react'\r\n\r\nexport default class ActivityPerDay extends Component {\r\n    state = {\r\n        data: {}\r\n    }\r\n\r\n    componentDidMount() {\r\n        // const { board } = this.props,\r\n        //     data = dashboardService.getActivityPerDayData(board)\r\n        // this.setState({ data }, () => {\r\n        //     console.log('Data: ', this.state.data);\r\n        // })\r\n    }\r\n\r\n    render() {\r\n        const { board } = this.props,\r\n            data = dashboardService.getActivityPerDayData(board)\r\n        // const { data } = this.state\r\n        if (!data) return <h1>Loading</h1>\r\n        return (\r\n            <div>\r\n                <h3>Activity per Day</h3>\r\n                <Bar data={data} width={400} height={400} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import { Component } from 'react';\r\nimport { Line } from 'react-chartjs-2'\r\nimport { dashboardService } from '../../services/dashboardService'\r\n\r\n\r\nexport default class MyChart extends Component {\r\n    state = {\r\n        data: {}\r\n    }\r\n\r\n    componentDidMount() {\r\n        // const { board } = this.props,\r\n        //     data = dashboardService.getTasksPerDayData(board)\r\n        // this.setState({ data })\r\n    }\r\n\r\n    render() {\r\n        const { board } = this.props,\r\n        data = dashboardService.getTasksPerDayData(board)\r\n        // const { data } = this.state\r\n        return (\r\n            <div className=\"tasks-per-person\">\r\n                <h3>New Tasks per Day</h3>\r\n                <Line data={data} height={400} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport TasksPerPerson from './Charts/TasksPerPerson'\r\nimport ActivityPerDay from './Charts/ActivityPerDay'\r\nimport TasksPerDay from './Charts/TasksPerDay'\r\n\r\nexport class Dashboard extends Component {\r\n\r\n    state = {\r\n\r\n    }\r\n\r\n    handleClickOutside = ev => {\r\n        this.props.toggleDashboard(false)\r\n    }\r\n\r\n    render() {\r\n        const { board } = this.props\r\n        return (\r\n            <div className=\"dashboard flex space-between board-layout\">\r\n                <TasksPerPerson {...this.props} />\r\n                <ActivityPerDay {...this.props} />\r\n                <TasksPerDay {...this.props} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Board } from '../cmps/Board'\r\nimport { setBoard, toggleOverlay, updateBoard } from '../store/actions/boardActions'\r\nimport { setCurrPopover } from '../store/actions/popoverActions'\r\nimport { BoardHeader } from '../cmps/BoardHeader'\r\nimport { TaskDetails } from '../cmps/TaskDetails'\r\nimport { socketService } from '../services/socketService'\r\nimport { Dashboard } from '../cmps/Dashboard'\r\nimport { LoadingSpinner } from '../cmps/LoadingSpinner.jsx'\r\n\r\n\r\nclass _TrelloApp extends Component {\r\n\r\n    state = {\r\n        isDashboardOpen: false,\r\n        isBoardClosed: false\r\n    }\r\n\r\n\r\n    componentDidMount = async () => {\r\n        const { boardId } = this.props.match.params\r\n        socketService.setup()\r\n        socketService.emit('member connected', { userId: '123', boardId })\r\n        socketService.on('board updated fs', this.onBoardUpdated)\r\n        await this.props.setBoard(boardId)\r\n    }\r\n\r\n    toggleDashboard = (boolean = !this.state.isDashboardOpen) => {\r\n        this.setState({ isDashboardOpen: boolean }, () => {\r\n            this.state.isBoardClosed ? this.setState({ isBoardClosed: false }) :\r\n                setTimeout(() => {\r\n                    this.setState({ isBoardClosed: true })\r\n                }, 1000)\r\n        })\r\n    }\r\n\r\n    async componentWillUnmount() {\r\n        socketService.off('board updated fs', this.onBoardUpdated)\r\n        socketService.terminate()\r\n        const { setBoard } = this.props\r\n        await setBoard(null)\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        const { boardId } = this.props.match.params\r\n        if (prevProps.match.params.boardId !== boardId) {\r\n            this.props.setBoard(boardId)\r\n        }\r\n    }\r\n\r\n    onBoardUpdated = async ({ updatedBoard, activity }) => {\r\n        const board = { ...updatedBoard }\r\n        await this.props.updateBoard(board, null, false)\r\n    }\r\n\r\n    render() {\r\n        const { board, setCurrPopover } = this.props\r\n        const { isDashboardOpen, isBoardClosed } = this.state\r\n        if (!board) return <LoadingSpinner />\r\n        return (\r\n            <div onClick={() => {\r\n                setCurrPopover()\r\n                // if (isOverlayOpen) toggleOverlay()\r\n            }} style={{ paddingTop: '54px' }}>\r\n                <div className=\"main-bg\" style={{ backgroundImage: board.style.bg }} onClick={ev => { ev.stopPropagation() }}></div>\r\n                <div className={`bg-overlay `}>\r\n                    <BoardHeader {...this.props} className={isDashboardOpen && 'dashboard-mode'} isDashboardOpen={isDashboardOpen} onToggleDashboard={this.toggleDashboard} />\r\n                    {!isBoardClosed && <Board {...this.props} isDashboardOpen={isDashboardOpen} />}\r\n                    {this.props.match.params.listId && <TaskDetails />}\r\n                </div>\r\n                <div\r\n                    className={`dashboard-screen ${isDashboardOpen && 'slide-to-right'} ${!isDashboardOpen && 'hidden'}`}>\r\n                    <Dashboard board={board} />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        board: state.boardReducer.currBoard,\r\n        isOverlayOpen: state.boardReducer.isOverlayOpen,\r\n        currPopover: state.popoverReducer.currPopover,\r\n        user: state.userReducer.user\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    setBoard,\r\n    updateBoard,\r\n    setCurrPopover,\r\n    toggleOverlay\r\n}\r\n\r\nexport const TrelloApp = connect(mapStateToProps, mapDispatchToProps)(_TrelloApp)","export const refreshTokenSetup = (res) => {\r\n    // Timing to renew access token\r\n    let refreshTiming = (res.tokenObj.expires_in || 3600 - 5 * 60) * 1000;\r\n  \r\n    const refreshToken = async () => {\r\n      const newAuthRes = await res.reloadAuthResponse();\r\n      refreshTiming = (newAuthRes.expires_in || 3600 - 5 * 60) * 1000;\r\n      console.log('newAuthRes:', newAuthRes);\r\n      // saveUserToken(newAuthRes.access_token);  <-- save new token\r\n      localStorage.setItem('authToken', newAuthRes.id_token);\r\n  \r\n      // Setup the other timer after the first one\r\n      setTimeout(refreshToken, refreshTiming);\r\n    };\r\n  \r\n    // Setup first refresh timer\r\n    setTimeout(refreshToken, refreshTiming);\r\n  };","import React, { Component, Fragment } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\r\nimport { cloudinaryService } from '../services/cloudinaryService'\r\nimport { styleService } from '../services/styleService'\r\nimport { setUser, clearUser } from '../store/actions/userAction'\r\nimport AddAPhotoIcon from '@material-ui/icons/AddAPhoto';\r\nimport { GoogleLogin } from 'react-google-login';\r\nimport { GoogleLogout } from 'react-google-login';\r\nimport { eventBusService } from '../services/eventBusService'\r\nimport Avatar from 'react-avatar';\r\n// refresh token\r\nimport { refreshTokenSetup } from '../services/googleService';\r\n\r\n\r\nconst clientId = '996251564221-qedkti8vudlin8md60j8dllv408gqodo.apps.googleusercontent.com';\r\n\r\nclass _LoginSignup extends Component {\r\n\r\n    state = {\r\n        signupCred: {\r\n            username: '',\r\n            fullname: '',\r\n            password: '',\r\n            imgUrl: ''\r\n        },\r\n        loginCred: {\r\n            username: '',\r\n            password: ''\r\n        },\r\n        googleCreds: {},\r\n        isNewUser: true,\r\n        msg: '',\r\n        isUploading: false,\r\n        isGoogle: false\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.unsubscribe = eventBusService.on('logout', () => {\r\n            this.onLogout()\r\n        });\r\n\r\n    }\r\n\r\n\r\n    // -------------------------------------------------GOOGLE----------------------------------------\r\n    onSuccessGoogleLogin = (res) => {\r\n        console.log(res.profileObj);\r\n        const user = res.profileObj\r\n        this.setState({\r\n            signupCred: {\r\n                username: user.email,\r\n                fullname: user.name,\r\n                password: user.googleId,\r\n                imgUrl: user.imageUrl\r\n            }, isGoogle: true\r\n        })\r\n        refreshTokenSetup(res);\r\n\r\n    };\r\n\r\n    onFailureGoogleLogin = (res) => {\r\n        console.log('Login failed: res:', res);\r\n\r\n    };\r\n    //-------------------------------------------------------------------------------------------------------------\r\n\r\n    onSubmit = async (ev) => {\r\n        ev.preventDefault()\r\n        ev.stopPropagation()\r\n        const { signupCred, loginCred, isNewUser, isGoogle } = this.state\r\n\r\n        var userCreds;\r\n        if (isNewUser) userCreds = signupCred\r\n        else userCreds = loginCred\r\n\r\n\r\n        if (!userCreds.password || !userCreds.username) {\r\n            this.setState({ msg: 'you need to fill all the feilds' })\r\n            return\r\n        }\r\n\r\n        try {\r\n            const { setUser } = this.props\r\n            await setUser(userCreds, isNewUser, isGoogle)\r\n            const { user } = this.props\r\n            if (!user) return\r\n            this.setState({ msg: '' })\r\n            this.props.history.push(`/board`)//then gos to the boards page\r\n        } catch (err) {\r\n            console.log('inside the catchhhhhhhhhhhhhhhhhhhhhhhhhh')\r\n            console.log(err, 'inside catch');\r\n            this.setState({ msg: 'somthing went worng!' })\r\n        }\r\n\r\n    }\r\n\r\n    handleInput = ({ target }) => {\r\n        const value = target.value\r\n        const field = target.name\r\n        var typeOfForm = this.state.isNewUser ? 'signupCred' : 'loginCred'\r\n        this.setState(prevState => {\r\n            return {\r\n                [typeOfForm]: {\r\n                    ...prevState[typeOfForm],\r\n                    [field]: value\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    toggleForms = (ev) => {\r\n        ev.preventDefault()\r\n\r\n        this.setState(prevState => {\r\n            return {\r\n                isNewUser: !prevState.isNewUser,\r\n                msg: ''\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n\r\n\r\n    onUploadImg = async ev => {\r\n        this.setState({ isUploading: true })\r\n        try {\r\n            const { secure_url } = await cloudinaryService.uploadImg(ev.target.files[0])\r\n            console.log('url:', secure_url);\r\n            this.setState({ signupCred: { ...this.state.signupCred, imgUrl: secure_url }, isUploading: false }\r\n                , console.log('imgUrl', this.state.signupCred))\r\n\r\n        } catch (err) {\r\n            this.setState({ msg: 'Couldnt upload your image try again' })\r\n            console.log('problem loading the img ', err);\r\n        }\r\n    }\r\n\r\n    onLogout = async () => {\r\n        await this.props.clearUser()\r\n        this.setState({\r\n            signupCred: {\r\n                username: '',\r\n                fullname: '',\r\n                password: '',\r\n                imgUrl: ''\r\n            },\r\n            loginCred: {\r\n                username: '',\r\n                password: ''\r\n            },\r\n            isNewUser: true,\r\n            msg: '',\r\n            isUploading: false,\r\n            isGoogle: false\r\n\r\n        })\r\n        // , () => this.props.history.push(`/login`))\r\n\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        const { signupCred, loginCred, isNewUser, isUploading, msg } = this.state\r\n        const { user } = this.props\r\n        return (\r\n\r\n            <Fragment>\r\n                <div className=\"login-bg-screen\" > </div>\r\n                <div className=\"login-container flex justify-center \">\r\n\r\n\r\n                    <div className={`login-signup-wrapper flex  ${isUploading && 'uploadStage'}`} >\r\n\r\n\r\n\r\n\r\n                        {user && <div className=\"glass-form \">\r\n                            <h2>Welcome {user.fullname}</h2>\r\n                            <div className=\"avatar\" style={{ backgroundImage: `url(${user.imgUrl})` }}> </div>\r\n                            <button className=\"primary-btn\"> <Link to=\"/board\"> Start Now </Link> </button>\r\n                            <a onClick={this.onLogout}> <GoogleLogout\r\n                                clientId={clientId}\r\n                                buttonText=\"Logout\"\r\n                                onLogoutSuccess={this.onLogout}\r\n                            ></GoogleLogout></a>\r\n\r\n\r\n\r\n                        </div>}\r\n\r\n\r\n                        {!user && isNewUser && <div>\r\n                            <form className={`glass-form`} onSubmit={this.onSubmit}>\r\n\r\n\r\n                                <h1>Sign Up</h1>\r\n                                {/* <Avatar className=\"login-avatar\" name={signupCred.fullname.toUpperCase()} size=\"100\" textSizeRatio={1.75} fgColor='#fff' round={true} src={signupCred.imgUrl} /> */}\r\n                                <label> <div className=\"avatar flex justify-center align-center\" style={{\r\n                                    backgroundImage: ` url(${signupCred.imgUrl})`\r\n                                }}> <AddAPhotoIcon style={{ color: ' #dadbdb' }} className={signupCred.imgUrl && 'hidden'} />  </div>\r\n                                    <input onChange={this.onUploadImg} type=\"file\" hidden /></label>\r\n\r\n\r\n                                <GoogleLogin\r\n                                    className=\"with-btn\"\r\n                                    clientId={clientId}\r\n                                    buttonText=\"Login with Google\"\r\n                                    onSuccess={this.onSuccessGoogleLogin}\r\n                                    onFailure={this.onFailureGoogleLogin}\r\n                                    cookiePolicy={'single_host_origin'}\r\n\r\n                                    isSignedIn={user === true}\r\n                                />\r\n\r\n\r\n                                {/* <button className=\"with-btn\">Sign up with facebook <i className=\"fab fa-facebook\"></i></button> */}\r\n\r\n\r\n\r\n\r\n\r\n                                <input type=\"text\" value={signupCred.fullname} name=\"fullname\" placeholder=\"Name\" onChange={this.handleInput} />\r\n                                <input type=\"text\" value={signupCred.username} name=\"username\" placeholder=\"Username\" onChange={this.handleInput} />\r\n                                <input type=\"password\" className=\"password\" value={signupCred.password} name=\"password\" placeholder=\"Password\" onChange={this.handleInput} />\r\n\r\n\r\n                            </form>\r\n                            <span style={{ display: 'block' }}>{msg}</span>\r\n                            <button className=\"primary-btn\" onClick={this.onSubmit}><ArrowForwardIcon /></button>\r\n                            <p>Already have an account? <span onClick={this.toggleForms} >Sign In</span> </p>\r\n\r\n                        </div>\r\n                        }\r\n                        {!user && !isNewUser && <div>\r\n                            < form className={`glass-form  login`} onSubmit={this.onSubmit}>\r\n\r\n\r\n                                <h1 >Log In</h1>\r\n\r\n                                <input type=\"text\" name=\"username\" value={loginCred.username} placeholder=\"Username\" onChange={this.handleInput} />\r\n                                <input type=\"password\" name=\"password\" value={loginCred.password} placeholder=\"Password\" onChange={this.handleInput} />\r\n\r\n\r\n                                <span style={{ display: 'block' }}>{msg}</span>\r\n                                <button type=\"submit\" className=\"primary-btn\" onClick={this.onSubmit}><ArrowForwardIcon /></button>\r\n                            </form>\r\n                            <p>Dont have an account? <span onClick={this.toggleForms} >Sign Up</span> </p>\r\n\r\n                        </div>\r\n                        }\r\n                        <div className=\"SVG\" ></div>\r\n                    </div>\r\n\r\n\r\n                </div>\r\n            </Fragment >\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.userReducer.user\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    setUser,\r\n    clearUser\r\n}\r\n\r\nexport const LoginSignup = connect(mapStateToProps, mapDispatchToProps)(_LoginSignup)","import { HomePage } from \"./pages/HomePage.jsx\";\r\nimport { Boards } from \"./pages/Boards.jsx\";\r\nimport { TrelloApp } from \"./pages/TrelloApp.jsx\";\r\nimport { LoginSignup } from \"./pages/LoginSignup.jsx\";\r\n\r\nexport const routes = [\r\n  {\r\n    path: \"/\",\r\n    component: HomePage,\r\n  },\r\n  {\r\n    path: `/board/:boardId/:listId?/:taskId?`,\r\n    component: TrelloApp,\r\n  },\r\n  {\r\n    path: \"/board\",\r\n    component: Boards,\r\n  },\r\n  {\r\n    path: \"/login\",\r\n    component: LoginSignup,\r\n  },\r\n];\r\n","import React from 'react';\r\nimport { Switch, BrowserRouter as Router, Route } from 'react-router-dom'\r\nimport { AppHeader } from './cmps/AppHeader.jsx'\r\nimport { routes } from './routes'\r\nfunction App() {\r\n  return (\r\n    <Router>\r\n      <AppHeader />\r\n      <main className=\"App\">\r\n        <Switch>\r\n          {routes.map(route => <Route exact key={route.path} path={route.path} component={route.component} />)}\r\n        </Switch>\r\n      </main>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","\r\nconst initialState = {\r\n    currBoard: null,\r\n    isTaskOpen: false,\r\n    currListIdx: null,\r\n    currTaskIdx: null,\r\n    isOverlayOpen: false,\r\n    isPopoverOpen: false\r\n}\r\n\r\nexport function boardReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'SET_BOARD':\r\n            return { ...state, currBoard: action.board }\r\n        case 'TOGGLE_TASK':\r\n            return { ...state, isTaskOpen: !state.isTaskOpen }\r\n        case 'SET_CURR_LIST_AND_TASK':\r\n            return { ...state, currListIdx: action.listIdx, currTaskIdx: action.taskIdx }\r\n        case \"UPDATE_BOARD\":\r\n            return { ...state, currBoard: action.updatedBoard }\r\n        case \"TOGGLE_OVERLAY\":\r\n            return { ...state, isOverlayOpen: !state.isOverlayOpen }\r\n        case \"SET_POPOVER_STATUS\":\r\n            return { ...state, isPopoverOpen: action.isPopover }\r\n        default:\r\n            return state\r\n    }\r\n}","\r\nconst initialState = {\r\n    user: null\r\n}\r\n\r\n\r\nexport function userReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'SET_USER':\r\n            return { ...state, user: action.loggedUser }\r\n        case 'CLEAR_USER':\r\n            return { ...state, user: null }\r\n        default:\r\n            console.log('state')\r\n            return state\r\n    }\r\n}\r\n","const initialState = {\r\n    currPopover: '',\r\n}\r\n\r\n//IMPORTANT TO REMEMBER TO ADD STOPPROPAGATION TO PREVENT CLOSING OF POPOVERS.\r\n\r\nexport function popoverReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'SET_CURR_POPOVER':\r\n            return { ...state, currPopover: action.popover }\r\n        default:\r\n            return state\r\n    }\r\n}","import thunk from 'redux-thunk';\r\nimport { createStore, applyMiddleware, compose, combineReducers } from 'redux'\r\n\r\nimport { boardReducer } from './reducers/boardReducer'\r\nimport { userReducer } from './reducers/userReducer'\r\nimport { popoverReducer } from './reducers/popoverReducer'\r\nconst rootReducer = combineReducers({\r\n    boardReducer,\r\n    userReducer,\r\n    popoverReducer\r\n});\r\n\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nexport const store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)));\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorkerRegistration from \"./serviceWorkerRegistration\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport \"./assets/styles/styles.scss\";\r\nimport { Provider } from \"react-redux\";\r\nimport { store } from \"./store/store\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://cra.link/PWA\r\nserviceWorkerRegistration.unregister();\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}